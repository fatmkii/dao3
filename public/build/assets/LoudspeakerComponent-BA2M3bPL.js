var A=Object.defineProperty;var J=(c,l,s)=>l in c?A(c,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[l]=s;var B=(c,l,s)=>(J(c,typeof l!="symbol"?l+"":l,s),s);import{w as C,A as a,F as w,j as h,l as V,aA as R,u as O,$ as D,b as F,M as _,f as o,H as d,a as e,N as y,G as k,ag as S,aB as P,k as M,R as K,O as Q,_ as G,g as W,o as U,z,Q as E,C as I,n as H,i as q,ar as X,aC as N,s as T,p as Y,d as Z,c as ee,aj as te,m as oe,U as se}from"./app-lxfZSp_D.js";import{l as ae}from"./loudspeaker-BAarqPE_.js";import{N as re}from"./Spin-BQ--OYe0.js";const le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},ne=h("path",{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z",fill:"currentColor"},null,-1),ie=[ne],ce=C({name:"ArrowDown",render:function(l,s){return a(),w("svg",le,ie)}}),de={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},ue=h("path",{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z",fill:"currentColor"},null,-1),me=[ue],_e=C({name:"ArrowUp",render:function(l,s){return a(),w("svg",de,me)}}),he={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},pe=h("path",{d:"M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z",fill:"currentColor"},null,-1),fe=[pe],ge=C({name:"Forward",render:function(l,s){return a(),w("svg",he,fe)}}),we={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ve=h("path",{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33l-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23l-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87L12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z",fill:"currentColor"},null,-1),ke=[ve],Ce=C({name:"LayerGroup",render:function(l,s){return a(),w("svg",we,ke)}}),xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ye=h("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),ze=h("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1),Le=[ye,ze],Oe=C({name:"SearchOutline",render:function(l,s){return a(),w("svg",xe,Le)}}),j=c=>(K("data-v-1fb860bc"),c=c(),Q(),c),be=j(()=>h("svg",{viewBox:"0 0 16 16"},[h("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1)),$e=j(()=>h("svg",{viewBox:"0 0 512 512"},[h("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})],-1)),Se=C({__name:"Sidebar",props:{mode:{}},emits:["refresh","showJumpModal","newThread"],setup(c,{emit:l}){V(u=>({"9e5bd554":e(n).primaryColor}));const s=R(),n=O(),i=D(!1),r=D(24),L=F(),v=l;function p(u){u==="up"&&window.scrollTo(0,0),u==="down"&&window.scrollTo(0,document.body.scrollHeight)}return(u,t)=>(a(),_(e(M),{vertical:"",size:[0,16],class:P(["sidebar",[e(L).userCustom.sidebarLeft?"left":"right"]]),align:"center"},{default:o(()=>[d(S,{name:"slide-fade"},{default:o(()=>[i.value?(a(),_(e(y),{key:0,size:r.value+2,class:"icon",onClick:t[0]||(t[0]=f=>p("up")),color:e(s).themeColor.sidebarColor},{default:o(()=>[d(e(_e))]),_:1},8,["size","color"])):k("",!0)]),_:1}),d(S,{name:"slide-fade"},{default:o(()=>[i.value&&u.mode=="forum"?(a(),_(e(y),{key:0,size:r.value,class:"icon",onClick:t[1]||(t[1]=f=>v("newThread")),color:e(s).themeColor.sidebarColor},{default:o(()=>[be]),_:1},8,["size","color"])):k("",!0)]),_:1}),d(S,{name:"slide-fade"},{default:o(()=>[i.value?(a(),_(e(y),{key:0,size:r.value,class:"icon",onClick:t[2]||(t[2]=f=>v("refresh")),color:e(s).themeColor.sidebarColor},{default:o(()=>[$e]),_:1},8,["size","color"])):k("",!0)]),_:1}),d(S,{name:"slide-fade"},{default:o(()=>[i.value&&u.mode=="thread"?(a(),_(e(y),{key:0,size:r.value,class:"icon",color:e(s).themeColor.sidebarColor,onClick:t[3]||(t[3]=f=>v("showJumpModal"))},{default:o(()=>[d(e(ge))]),_:1},8,["size","color"])):k("",!0)]),_:1}),d(S,{name:"slide-fade"},{default:o(()=>[i.value?(a(),_(e(y),{key:0,size:r.value+2,class:"icon",onClick:t[4]||(t[4]=f=>p("down")),color:e(s).themeColor.sidebarColor},{default:o(()=>[d(e(ce))]),_:1},8,["size","color"])):k("",!0)]),_:1}),d(e(y),{size:r.value,class:"icon",onClick:t[5]||(t[5]=f=>i.value=!i.value),style:{"margin-top":"6px"},color:e(s).themeColor.sidebarColor},{default:o(()=>[d(e(Ce))]),_:1},8,["size","color"])]),_:1},8,["class"]))}}),Fe=G(Se,[["__scopeId","data-v-1fb860bc"]]);function Ge(){class c{constructor(){B(this,"_defaultValue",{});B(this,"_logData",D(this._defaultValue));const n=localStorage.getItem("browseLogger");if(!n)this._logData.value=this._defaultValue;else{let i=JSON.parse(n);for(let r in i)i[r].expireTime<Date.now()&&delete i[r];this._logData.value=i,localStorage.setItem("browseLogger",JSON.stringify(this._logData.value))}}reload(){const n=localStorage.getItem("browseLogger");n&&(this._logData.value=JSON.parse(n))}log(n,i){const r=new Date().getTime()+864e5;this._logData.value[n]={expireTime:r,floor:i},localStorage.setItem("browseLogger",JSON.stringify(this._logData.value))}initThread(n){this.get(n)===void 0&&this.log(n,0)}get(n){return this._logData.value[n]}get data(){return this._logData}}return new c}const De=C({__name:"LoudspeakerModal",props:{loudspeakerData:{}},setup(c,{expose:l}){V(p=>({"64a4b92e":e(n).textColor1}));const s=F(),n=O(),i=W(),r=D(!1);function L(){r.value=!0}l({show:L});function v(){i.push("/loudspeaker"),r.value=!1}return(p,u)=>(a(),_(e(X),{show:r.value,"onUpdate:show":u[2]||(u[2]=t=>r.value=t),"display-directive":"if"},{default:o(()=>[d(e(q),{style:H({maxWidth:e(s).modalMaxWidth}),title:"大喇叭列表",closable:"",onClose:u[1]||(u[1]=t=>r.value=!1),size:"small"},{action:o(()=>[d(e(M),{justify:"end"},{default:o(()=>[d(e(U),{type:"primary",onClick:v},{default:o(()=>[z("去发大喇叭")]),_:1}),d(e(U),{onClick:u[0]||(u[0]=t=>r.value=!1)},{default:o(()=>[z("关闭")]),_:1})]),_:1})]),default:o(()=>[d(e(M),{vertical:"",size:[0,12],class:"loudspeaker-content",style:{"max-height":"75vh","overflow-y":"auto"}},{default:o(()=>[(a(!0),w(I,null,E(p.loudspeakerData,(t,f)=>(a(),_(N(t.thread_id?"router-link":"span"),{key:t.id,style:H({color:e(s).userCustom.monochromeMode?e(n).textColor1:t.color}),to:t.thread_id!==null?`/thread/${t.thread_id}/1`:void 0},{default:o(()=>[z(T(f)+". "+T(t.content),1)]),_:2},1032,["style","to"]))),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]))}}),Me=G(De,[["__scopeId","data-v-d3b5fcaa"]]),He={class:"loudspeaker-container loudspeaker_container"},Te={key:1},Be=C({__name:"LoudspeakerComponent",setup(c){V(g=>({"1f7d45c6":e(i).textColor1}));const l=Y(),s=F(),n=D(),i=O(),r=Z(()=>!v&&p.value.length===0),L={binggan:l.binggan,mode:"effective"},{loading:v,data:p,send:u,onSuccess:t}=ee(g=>ae(g),{immediate:!1,initialData:[]});l.binggan&&u(L),t(()=>{te(()=>{setTimeout(()=>f(),1e3)})});function f(){const g=document.getElementsByClassName("loudspeaker-content")[0];if(g===null)return;const b=g.offsetHeight,$=document.createElement("style");$.id="loudspeaker-keyframe";const m=`@keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }
            @-webkit-keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }

            .loudspeaker-content {
                animation: SPEEDs loudspeaker-move infinite linear;
                -webkit-animation: SPEEDs loudspeaker-move infinite linear;
            }`;$.innerHTML=m.replace(/DOM_HEIGHT/g,String(Math.floor(b/2))).replace(/SPEED/g,String(Math.floor(b/20))),document.getElementsByTagName("head")[0].appendChild($)}return oe(()=>{var g;(g=document.getElementById("loudspeaker-keyframe"))==null||g.remove()}),(g,b)=>{const $=se("router-link");return a(),_(e(M),{wrap:!1,style:{"margin-top":"8px"}},{default:o(()=>[h("img",{style:{height:"2.5rem",cursor:"pointer"},src:"https://ll4484.bvimg.com/21501/47292a78bd68f016.png",onClick:b[0]||(b[0]=m=>{var x;return(x=n.value)==null?void 0:x.show()})}),h("div",He,[e(v)?(a(),_(e(re),{key:0,size:"small"})):k("",!0),r.value?(a(),w("div",Te,[d($,{to:"/loudspeaker"},{default:o(()=>[z(" 目前没有大喇叭，要发一个吗？ ")]),_:1})])):k("",!0),r.value?k("",!0):(a(),_(e(M),{key:2,vertical:"",size:[0,4],class:"loudspeaker-content"},{default:o(()=>[(a(!0),w(I,null,E(e(p),(m,x)=>(a(),_(N(m.thread_id?"router-link":"span"),{key:x,style:H({color:e(s).userCustom.monochromeMode?e(i).textColor1:m.color}),to:m.thread_id!==null?`/thread/${m.thread_id}/1`:void 0},{default:o(()=>[z(T(m.content),1)]),_:2},1032,["style","to"]))),128)),(a(!0),w(I,null,E(e(p),(m,x)=>(a(),_(N(m.thread_id?"router-link":"span"),{key:x+e(p).length,style:H({color:e(s).userCustom.monochromeMode?e(i).textColor1:m.color}),to:m.thread_id!==null?`/thread/${m.thread_id}/1`:void 0},{default:o(()=>[z(T(m.content),1)]),_:2},1032,["style","to"]))),128))]),_:1}))]),d(Me,{"loudspeaker-data":e(p),ref_key:"LoudspeakerModalCom",ref:n},null,8,["loudspeaker-data"])]),_:1})}}}),Ue=G(Be,[["__scopeId","data-v-356c942d"]]);export{ce as D,Ue as L,Oe as S,_e as U,Fe as a,Ge as u};
