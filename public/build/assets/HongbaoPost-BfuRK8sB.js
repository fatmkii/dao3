import{w as $,o as j,b as H,d as w,$ as F,c as q,A as u,M as m,f as e,H as t,a,i as A,k as g,h as n,z as s,s as i,j as h,m as C,G as _,F as K,x as E,n as G,_ as O}from"./app-DQ8266SS.js";import{j as U,g as R}from"./randomHeads-NKhEI1Yb.js";import{_ as v}from"./FInput.vue_vue_type_script_setup_true_lang-C8i50sDQ.js";import"./showDialog-CIaxRVxv.js";import"./FInputGroupLabel.vue_vue_type_script_setup_true_lang-D3FtrZJs.js";import"./InputGroup-CPu6Vif3.js";import"./InputNumber-C-juTiTI.js";import"./use-locale-BKZTEJ_B.js";import"./Input-Nv-VAIlA.js";import"./Add-BXASD_o3.js";import"./index-Crq6HWd9.js";import"./_commonjsHelpers-BosuxZz1.js";import"./inputNumberFormat-DaYmlx6U.js";import"./Select-Fwav5EqF.js";import"./Tag-C8_pW6Ju.js";import"./Grid-3ky8zDGx.js";import"./ColorPicker-BGdZvUim.js";import"./_createCompounder-B4xoQ4gz.js";import"./Ellipsis-C8oGpxce.js";import"./download-sglA049O.js";import"./emojiData-nGA-8XBz.js";import"./Tabs-C2GgeJQh.js";const x={key:0},B=$({__name:"HongbaoPost",props:{hongbaoData:{},threadId:{},forumId:{}},emits:["refreshPostsList"],setup(D,{emit:k}){const f=j(),S=H(),r=D,P=w(()=>({1:"随机olo",2:"定额olo"})[r.hongbaoData.type]),T=w(()=>({1:"口令红包",2:"抢答红包",3:"暗号红包"})[r.hongbaoData.key_word_type]),d=F(r.hongbaoData.key_word_type===1?r.hongbaoData.key_word:""),y=k,{loading:z,send:I,onSuccess:M,onError:L}=q(o=>U(o),{immediate:!1});function c(o){if(!o.isTrusted){const N={title:"错误",closable:!1,content:"请不要用脚本抢红包喔",positiveText:"确定"};window.$dialog.warning(N);return}const{timestamp:p,newPostKey:l}=R(o.isTrusted,r.threadId,f.binggan),b={binggan:f.binggan,forum_id:r.forumId,thread_id:r.threadId,content:"--红包口令: "+d.value,nickname:"= =",post_with_admin:!1,new_post_key:l,timestamp:p,hongbao_post_id:r.hongbaoData.id,hongbao_key_word:d.value};I(b)}return M(()=>{d.value="",y("refreshPostsList")}),L(()=>{d.value="",y("refreshPostsList")}),(o,p)=>(u(),m(a(g),{size:"small",vertical:""},{default:e(()=>[t(a(A),{size:"small",bordered:!0,embedded:"",class:"hongbao-post-card"},{default:e(()=>[t(a(g),{vertical:"",align:"center"},{default:e(()=>[t(a(g),{align:"center",size:"small"},{default:e(()=>[t(a(n),{style:{"font-size":"1rem"}},{default:e(()=>[s(i(T.value),1)]),_:1}),h("img",{src:"/hongbao.svg",style:C({height:a(S).isMobile?"30px":"36px"})},null,4)]),_:1}),h("div",null,[o.hongbaoData.question?(u(),m(a(n),{key:0,depth:3},{default:e(()=>[s("提示：")]),_:1})):_("",!0),t(a(n),null,{default:e(()=>[s(i(o.hongbaoData.question),1)]),_:1})]),h("div",null,[o.hongbaoData.key_word?(u(),m(a(n),{key:0,depth:3},{default:e(()=>[s("口令：")]),_:1})):_("",!0),t(a(n),null,{default:e(()=>[s(i(o.hongbaoData.key_word),1)]),_:1})]),h("div",null,[t(a(n),{depth:3},{default:e(()=>[s("数量：")]),_:1}),t(a(n),null,{default:e(()=>[s(i(o.hongbaoData.num_remains)+" /"+i(o.hongbaoData.num_total)+" （"+i(P.value)+"）",1)]),_:1})]),o.hongbaoData.olo_hide?_("",!0):(u(),K("div",x,[t(a(n),{depth:3},{default:e(()=>[s("总额：")]),_:1}),t(a(n),null,{default:e(()=>{var l;return[s(i((l=o.hongbaoData.olo_total)==null?void 0:l.toLocaleString("en-us"))+" olo ",1)]}),_:1})]))]),_:1})]),_:1}),t(a(g),{size:"small",wrap:!1},{default:e(()=>{var l;return[o.hongbaoData.hongbao_user===null?(u(),m(a(v),{key:0,value:d.value,"onUpdate:value":p[0]||(p[0]=b=>d.value=b),maxlength:255,onKeyup:E(c,["enter"]),style:{"max-width":"328px"},placeholder:o.hongbaoData.num_remains===0?"已经抢光啦":"请输入口令","auto-size":"",disabled:o.hongbaoData.hongbao_user!==null||o.hongbaoData.num_remains===0},null,8,["value","placeholder","disabled"])):(u(),m(a(v),{key:1,value:`你抢到了${(l=o.hongbaoData.hongbao_user)==null?void 0:l.olo.toLocaleString("en-us")}个olo`,maxlength:255,style:{"max-width":"328px"},"auto-size":"",disabled:""},null,8,["value"])),t(a(G),{type:"primary",onClick:c,disabled:o.hongbaoData.hongbao_user!==null||a(z)||o.hongbaoData.num_remains===0},{default:e(()=>[s("抢！")]),_:1},8,["disabled"])]}),_:1})]),_:1}))}}),_o=O(B,[["__scopeId","data-v-bb51ac79"]]);export{_o as default};
