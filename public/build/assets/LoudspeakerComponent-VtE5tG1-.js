import{n as N,U as V,W as B,t as E,p as d,j as l,q as e,I as M,aU as G,x as t,E as s,K as v,N as y,aS as O,aV as S,J as g,aW as W,aT as j,aX as J,X as q,D as A,F as K,H,i as D,w as $,Q as L,L as w,ab as I,P as T,l as R,g as X,az as Q,al as Y,T as Z,aE as ee}from"./vendor-CSO85mTd.js";import{h as oe,u as U,_ as F,b as P,a as te}from"./app-IEeuuotq.js";import{l as ae}from"./loudspeaker-DlSKM8Uf.js";const se=N({__name:"Sidebar",props:{mode:{}},emits:["refresh","showJumpModal","newThread"],setup(z,{emit:C}){V(a=>({d6d6f33a:e(k).primaryColor}));const u=oe(),k=B(),i=E(!1),r=E(24),b=U(),f=C;function m(a){a==="up"&&window.scrollTo(0,0),a==="down"&&window.scrollTo(0,document.body.scrollHeight)}return(a,o)=>(l(),d(e(M),{vertical:"",size:[0,24],class:G(["sidebar",[e(b).userCustom.sidebarLeft?"left":"right"]]),align:"center"},{default:t(()=>[s(S,{name:"slide-fade"},{default:t(()=>[i.value?(l(),d(e(y),{key:0,size:r.value+2,class:"icon",onClick:o[0]||(o[0]=c=>m("up")),color:e(u).themeColor.sidebarColor},{default:t(()=>[s(e(O))]),_:1},8,["size","color"])):v("",!0)]),_:1}),s(S,{name:"slide-fade"},{default:t(()=>[i.value&&z.mode=="forum"?(l(),d(e(y),{key:0,size:r.value,class:"icon",onClick:o[1]||(o[1]=c=>f("newThread")),color:e(u).themeColor.sidebarColor},{default:t(()=>[...o[6]||(o[6]=[g("svg",{viewBox:"0 0 16 16"},[g("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1)])]),_:1},8,["size","color"])):v("",!0)]),_:1}),s(S,{name:"slide-fade"},{default:t(()=>[i.value?(l(),d(e(y),{key:0,size:r.value,class:"icon",onClick:o[2]||(o[2]=c=>f("refresh")),color:e(u).themeColor.sidebarColor},{default:t(()=>[...o[7]||(o[7]=[g("svg",{viewBox:"0 0 512 512"},[g("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})],-1)])]),_:1},8,["size","color"])):v("",!0)]),_:1}),s(S,{name:"slide-fade"},{default:t(()=>[i.value&&z.mode=="thread"?(l(),d(e(y),{key:0,size:r.value,class:"icon",color:e(u).themeColor.sidebarColor,onClick:o[3]||(o[3]=c=>f("showJumpModal"))},{default:t(()=>[s(e(W))]),_:1},8,["size","color"])):v("",!0)]),_:1}),s(S,{name:"slide-fade"},{default:t(()=>[i.value?(l(),d(e(y),{key:0,size:r.value+2,class:"icon",onClick:o[4]||(o[4]=c=>m("down")),color:e(u).themeColor.sidebarColor},{default:t(()=>[s(e(j))]),_:1},8,["size","color"])):v("",!0)]),_:1}),s(e(y),{size:r.value,class:"icon",onClick:o[5]||(o[5]=c=>i.value=!i.value),color:e(u).themeColor.sidebarColor},{default:t(()=>[s(e(J))]),_:1},8,["size","color"])]),_:1},8,["class"]))}}),pe=F(se,[["__scopeId","data-v-a449bb83"]]),le=N({__name:"LoudspeakerModal",props:{loudspeakerData:{}},setup(z,{expose:C}){V(m=>({v0e072a93:e(k).textColor1}));const u=U(),k=B(),i=q(),r=E(!1);function b(){r.value=!0}C({show:b});function f(){i.push("/loudspeaker"),r.value=!1}return(m,a)=>(l(),d(e(A),{show:r.value,"onUpdate:show":a[2]||(a[2]=o=>r.value=o),"display-directive":"if"},{default:t(()=>[s(e(K),{style:H({maxWidth:e(u).modalMaxWidth}),title:"大喇叭列表",closable:"",onClose:a[1]||(a[1]=o=>r.value=!1),size:"small"},{action:t(()=>[s(e(M),{justify:"end"},{default:t(()=>[s(e(P),{type:"primary",onClick:f},{default:t(()=>[...a[3]||(a[3]=[w("去发大喇叭",-1)])]),_:1}),s(e(P),{onClick:a[0]||(a[0]=o=>r.value=!1)},{default:t(()=>[...a[4]||(a[4]=[w("关闭",-1)])]),_:1})]),_:1})]),default:t(()=>[s(e(M),{vertical:"",size:[0,12],class:"loudspeaker-content",style:{"max-height":"75vh","overflow-y":"auto"}},{default:t(()=>[(l(!0),D(L,null,$(z.loudspeakerData,(o,c)=>(l(),d(I(o.thread_id?"router-link":"span"),{key:o.id,style:H([{color:e(u).userCustom.monochromeMode?e(k).textColor1:o.color},{"white-space":"pre-wrap"}]),to:o.thread_id!==null?`/thread/${o.thread_id}/1`:void 0},{default:t(()=>[w(T(c)+". "+T(o.content),1)]),_:2},1032,["style","to"]))),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]))}}),re=F(le,[["__scopeId","data-v-2a682b08"]]),ne={class:"loudspeaker-container loudspeaker_container"},ie={key:1},de=N({__name:"LoudspeakerComponent",setup(z){V(p=>({v59eb691c:e(i).textColor1}));const C=te(),u=U(),k=E(),i=B(),r=R(()=>!f&&m.value.length===0),b={binggan:C.binggan,mode:"effective"},{loading:f,data:m,send:a,onSuccess:o}=X(p=>ae(p),{immediate:!1,initialData:[]});C.binggan&&a(b),o(()=>{Q(()=>{setTimeout(()=>c(),1e3)})});function c(){const p=document.getElementsByClassName("loudspeaker-content")[0];if(p===void 0)return;const h=p.offsetHeight,x=document.createElement("style");x.id="loudspeaker-keyframe";const n=`@keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }
            @-webkit-keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }

            .loudspeaker-content {
                animation: SPEEDs loudspeaker-move infinite linear;
                -webkit-animation: SPEEDs loudspeaker-move infinite linear;
            }`;x.innerHTML=n.replace(/DOM_HEIGHT/g,String(Math.floor(h/2))).replace(/SPEED/g,String(Math.floor(h/20))),document.getElementsByTagName("head")[0].appendChild(x)}return Y(()=>{var p;(p=document.getElementById("loudspeaker-keyframe"))==null||p.remove()}),(p,h)=>{const x=Z("router-link");return l(),d(e(M),{wrap:!1,style:{"margin-top":"8px"}},{default:t(()=>[g("img",{style:{height:"2.5rem",cursor:"pointer"},src:"/ui/miku-loudspeaker.png",onClick:h[0]||(h[0]=n=>{var _;return(_=k.value)==null?void 0:_.show()})}),g("div",ne,[e(f)?(l(),d(e(ee),{key:0,size:"small"})):v("",!0),r.value?(l(),D("div",ie,[s(x,{to:"/loudspeaker"},{default:t(()=>[...h[1]||(h[1]=[w(" 目前没有大喇叭，要发一个吗？ ",-1)])]),_:1})])):v("",!0),r.value?v("",!0):(l(),d(e(M),{key:2,vertical:"",size:[0,4],class:"loudspeaker-content"},{default:t(()=>[(l(!0),D(L,null,$(e(m),(n,_)=>(l(),d(I(n.thread_id?"router-link":"span"),{key:_,style:H([{color:e(u).userCustom.monochromeMode?e(i).textColor1:n.color},{"white-space":"pre-wrap"}]),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:t(()=>[w(T(n.content),1)]),_:2},1032,["style","to"]))),128)),(l(!0),D(L,null,$(e(m),(n,_)=>(l(),d(I(n.thread_id?"router-link":"span"),{key:_+e(m).length,style:H([{color:e(u).userCustom.monochromeMode?e(i).textColor1:n.color},{"white-space":"pre-wrap"}]),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:t(()=>[w(T(n.content),1)]),_:2},1032,["style","to"]))),128))]),_:1}))]),s(re,{"loudspeaker-data":e(m),ref_key:"LoudspeakerModalCom",ref:k},null,8,["loudspeaker-data"])]),_:1})}}}),fe=F(de,[["__scopeId","data-v-cd135ec8"]]);export{fe as L,pe as S};
