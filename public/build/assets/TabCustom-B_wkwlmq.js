import{w as A,o as C,b as E,$ as c,c as R,c4 as $,A as z,M as S,f as n,H as r,a,k as v,j as u,h as i,z as o,aF as k,n as N,i as B}from"./app-Wa4snSXg.js";import{_ as p}from"./FInput.vue_vue_type_script_setup_true_lang-BpNfDfOc.js";import{N as F,a as d}from"./FormItem-BIAz3khd.js";import"./Input-B0c9eymO.js";import"./use-locale-B56d6MS2.js";const U=u("span",null,"可自由输入名称的定制饼干",-1),q=u("span",null,"10万 olo",-1),Z=A({__name:"TabCustom",setup(T){const g=C(),_=E(),m=c(null),l=c({bingganApply:null,password:null,passwordRepeat:null}),b={bingganApply:{required:!0,validator:(t,e)=>{const s=/^[a-zA-Z0-9_]+$/;if(e===null)return new Error("请输入要定制的饼干");if(s.test(e)){if(e.length<7)return new Error("最少需要7个字符");if(e.length>16)return new Error("最多16个字符")}else return new Error("只能是数字、英文、下划线");return!0},trigger:"blur"},password:{required:!0,validator:(t,e)=>{const s=/^[a-zA-Z0-9_]+$/;if(e===null)return new Error("请输入密码");if(s.test(e)){if(e.length<7)return new Error("最少需要7个字符");if(e.length>20)return new Error("最多20个字符")}else return new Error("只能是数字、英文、下划线");return!0},trigger:"blur"},passwordRepeat:{required:!0,validator:(t,e)=>e===l.value.password,message:"密码不一致",trigger:"blur"}},{loading:w,send:h,onSuccess:y}=R(t=>$(t),{immediate:!1});y(()=>{g.refreshUserData(),l.value.password=null,l.value.passwordRepeat=null});function f(){var t;(t=m.value)==null||t.validate(e=>{if(e)window.$message.error("请确认信息填写完整");else{const s={title:"申请定制饼干",closable:!1,content:`申请的定制饼干：${l.value.bingganApply}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{const x={binggan:g.binggan,binggan_apply:l.value.bingganApply,password:l.value.password};h(x)}};window.$dialog.success(s)}})}return(t,e)=>(z(),S(a(B),{title:"定制饼干",size:"small"},{default:n(()=>[r(a(v),{vertical:""},{default:n(()=>[u("div",null,[r(a(i),{depth:3},{default:n(()=>[o("说明：")]),_:1}),U]),u("div",null,[r(a(i),{depth:3},{default:n(()=>[o("价格：")]),_:1}),q]),r(a(F),{ref_key:"formRef",ref:m,model:l.value,"label-placement":"left","label-width":"auto",style:{"max-width":"400px"},rules:b,size:a(_).isMobile?"small":"medium"},{default:n(()=>[r(a(d),{label:"定制饼干",path:"bingganApply"},{default:n(()=>[r(a(p),{value:l.value.bingganApply,"onUpdate:value":e[0]||(e[0]=s=>l.value.bingganApply=s),placeholder:"7~16个字符(字母、数字、下划线)",maxlength:16,minlength:7},null,8,["value"])]),_:1}),r(a(d),{label:"密码",path:"password"},{default:n(()=>[r(a(p),{value:l.value.password,"onUpdate:value":e[1]||(e[1]=s=>l.value.password=s),placeholder:"7~20个字符(字母、数字、下划线)",type:"password",maxlength:20,minlength:7,"show-password-on":"click"},null,8,["value"])]),_:1}),r(a(d),{label:"重复密码",path:"passwordRepeat"},{default:n(()=>[r(a(p),{value:l.value.passwordRepeat,"onUpdate:value":e[2]||(e[2]=s=>l.value.passwordRepeat=s),placeholder:"再次输入密码",type:"password",maxlength:20,minlength:7,"show-password-on":"click",onKeyup:k(f,["enter"])},null,8,["value"])]),_:1})]),_:1},8,["model","size"]),r(a(v),{size:"small",align:"center"},{default:n(()=>[r(a(N),{type:"primary",loading:a(w),disabled:a(w),onClick:f},{default:n(()=>[o("提交")]),_:1},8,["loading","disabled"]),r(a(i),{depth:3},{default:n(()=>[o("请务必保存好饼干和密码喔")]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Z as default};
