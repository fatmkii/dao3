import{w as L,o as O,b as $,g as F,u as j,d as g,$ as q,c as A,A as m,M as b,f as t,H as s,a,i as C,k as h,h as i,z as r,s as d,j as _,m as K,F as E,G,aI as Q,n as R,_ as U}from"./app-BYB32yAm.js";import{k as V,g as B}from"./randomHeads-DL3TN-el.js";import{u as J}from"./forums-DK5zcUOZ.js";import{_ as w}from"./FInput.vue_vue_type_script_setup_true_lang-CsJqv-RY.js";import"./showDialog-DZhBB07B.js";import"./Checkbox-Idy5uEl7.js";import"./index-u4XndDaU.js";import"./_commonjsHelpers-BosuxZz1.js";import"./Tabs-D1dnVlrx.js";import"./Ellipsis-wYYb2U2o.js";import"./Tag-BnmF-oYL.js";import"./emojiData-a0Hcov0e.js";const W={key:0},X=L({__name:"HongbaoPost",props:{hongbaoData:{},threadId:{},forumId:{}},emits:["refreshPostsList"],setup(k,{emit:v}){const c=O(),D=$();J(),F(),j();const e=k,S=g(()=>({1:"随机",2:"定额"})[e.hongbaoData.type]),P=g(()=>({1:"口令红包",2:"抢答红包",3:"暗号红包"})[e.hongbaoData.key_word_type]),T=g(()=>{const o={1:e.hongbaoData.key_word,2:e.hongbaoData.question,3:e.hongbaoData.question},n=e.hongbaoData.key_word_type;return o[n]}),z=g(()=>{const o={1:"口令：",2:"提示：",3:"提示："},n=e.hongbaoData.key_word_type;return o[n]}),u=q(e.hongbaoData.key_word_type===1?e.hongbaoData.key_word:""),y=v,{loading:x,send:I,onSuccess:N,onError:H}=A(o=>V(o),{immediate:!1});function f(o){if(!o.isTrusted){const M={title:"错误",closable:!1,content:"请不要用脚本抢红包喔",positiveText:"确定"};window.$dialog.warning(M);return}const{timestamp:n,newPostKey:l}=B(o.isTrusted,e.threadId,c.binggan),p={binggan:c.binggan,forum_id:e.forumId,thread_id:e.threadId,content:"--红包口令: "+u.value,nickname:"= =",post_with_admin:!1,new_post_key:l,timestamp:n,hongbao_post_id:e.hongbaoData.id,hongbao_key_word:u.value};I(p)}return N(()=>{u.value="",y("refreshPostsList")}),H(()=>{u.value="",y("refreshPostsList")}),(o,n)=>(m(),b(a(h),{size:"small",vertical:""},{default:t(()=>[s(a(C),{size:"small",bordered:!0,embedded:"",class:"hongbao-post-card"},{default:t(()=>[s(a(h),{vertical:"",align:"center"},{default:t(()=>[s(a(h),{align:"center",size:"small"},{default:t(()=>[s(a(i),{style:{"font-size":"1rem"}},{default:t(()=>[r(d(P.value),1)]),_:1}),_("img",{src:"/hongbao.svg",style:K({height:a(D).isMobile?"30px":"36px"})},null,4)]),_:1}),_("div",null,[s(a(i),{depth:3},{default:t(()=>[r(d(z.value),1)]),_:1}),s(a(i),null,{default:t(()=>[r(d(T.value),1)]),_:1})]),_("div",null,[s(a(i),{depth:3},{default:t(()=>[r("数量：")]),_:1}),s(a(i),null,{default:t(()=>[r(d(o.hongbaoData.num_remains)+" /"+d(o.hongbaoData.num_total)+" （"+d(S.value)+"）",1)]),_:1})]),o.hongbaoData.olo_hide?G("",!0):(m(),E("div",W,[s(a(i),{depth:3},{default:t(()=>[r("总额：")]),_:1}),s(a(i),null,{default:t(()=>{var l;return[r(d((l=o.hongbaoData.olo_total)==null?void 0:l.toLocaleString("en-us"))+" olo ",1)]}),_:1})]))]),_:1})]),_:1}),s(a(h),{size:"small",wrap:!1},{default:t(()=>{var l;return[o.hongbaoData.hongbao_user===null?(m(),b(a(w),{key:0,value:u.value,"onUpdate:value":n[0]||(n[0]=p=>u.value=p),maxlength:255,onKeyup:Q(f,["enter"]),style:{"max-width":"328px"},placeholder:"请输入口令","auto-size":"",disabled:o.hongbaoData.hongbao_user!==null},null,8,["value","disabled"])):(m(),b(a(w),{key:1,value:`你抢到了${(l=o.hongbaoData.hongbao_user)==null?void 0:l.olo.toLocaleString("en-us")}个olo`,maxlength:255,style:{"max-width":"328px"},"auto-size":"",disabled:""},null,8,["value"])),s(a(R),{type:"primary",onClick:f,disabled:o.hongbaoData.hongbao_user!==null||a(x)},{default:t(()=>[r("抢！")]),_:1},8,["disabled"])]}),_:1})]),_:1}))}}),go=U(X,[["__scopeId","data-v-3b101ce9"]]);export{go as default};
