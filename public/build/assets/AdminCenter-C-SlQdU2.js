import{n as H,U as ae,W as le,t as U,a1 as ie,l as te,am as q,g as R,p as M,j as o,x as a,K as C,E as t,q as e,F as G,I as x,i as T,Q as P,w as V,J as D,z as Le,L as l,S as d,a_ as pe,a2 as me,ay as ue,a3 as ge,b as h,ac as fe,ad as ve,b0 as be,aH as _e,bf as J,P as I,bl as se,ar as L,bg as ye,m as j,aZ as Z,aw as X,ax as O,av as we,bz as ce,ak as je,b3 as Ge,b4 as Je,ab as Ke}from"./vendor-B4iN01yc.js";import{a as E,u as B,b as N,_ as ne,c as ee}from"./app-IKFVVv2G.js";import{s as Qe,g as We,h as Ze,i as Ue,j as Xe,k as et,l as tt,m as at,w as lt,n as nt}from"./admin-cxkItXkF.js";import{u as re}from"./forums-DRdcKv8C.js";import{i as st,a as ut}from"./inputNumberFormat-BPxWRFt_.js";const it={class:"banner-box-sm"},rt=["src"],dt=["src","onClick"],ot=H({__name:"TabBanners",setup(Y){ae(r=>({v6a1c8eac:e(A).textColor1}));const w=E();B();const z=re(),A=le(),v=U(0);ie(()=>{m.value.length>0&&(v.value=m.value[0].value)});const m=te(()=>w.binggan===null||w.userData.binggan.admin_forums===void 0?[]:z.forumsData.reduce((r,s)=>(w.checkAdminForums(s.id)&&r.push({value:s.id,label:s.name,forumId:s.id}),r),[])),g=U([]);q(v,r=>{var s,F;r===void 0?g.value=[]:g.value=[...(F=(s=z.forumData(r))==null?void 0:s.banners)!=null?F:[]]});const S=U(!1),$=U(),n=te(()=>{var r,s;return(s=(r=$.value)==null?void 0:r.split(/[\n,，]+/).filter(F=>F!=""))!=null?s:[]});function _(){S.value=!1,g.value=g.value.concat(n.value),$.value=void 0,p()}function c(r){var s;(s=g.value)==null||s.splice(r,1)}const{loading:b,send:i,onSuccess:f}=R(r=>Qe(r),{immediate:!1});f(()=>{z.getForumsData()});function p(){const r={binggan:w.binggan,forum_id:v.value,banners:g.value};i(r)}return(r,s)=>(o(),M(e(x),{vertical:""},{default:a(()=>[S.value?(o(),M(e(G),{key:0,title:"待追加的版头",size:"small",class:"dash-line"},{"header-extra":a(()=>[t(e(x),{size:"small"},{default:a(()=>[t(e(N),{type:"primary",onClick:_},{default:a(()=>[...s[4]||(s[4]=[l("追加",-1)])]),_:1}),t(e(N),{type:"default",onClick:s[0]||(s[0]=F=>{S.value=!1,$.value=void 0})},{default:a(()=>[...s[5]||(s[5]=[l("关闭",-1)])]),_:1})]),_:1})]),default:a(()=>[t(e(x),{size:"small"},{default:a(()=>[(o(!0),T(P,null,V(n.value,(F,K,Q)=>(o(),T("div",it,[D("img",{src:F,style:{width:"100%"}},null,8,rt)]))),256))]),_:1}),t(e(Le),{type:"textarea",value:$.value,"onUpdate:value":s[1]||(s[1]=F=>$.value=F),placeholder:"在这里贴网址追加版头。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):C("",!0),t(e(G),{title:"版头设定",size:"small"},{"header-extra":a(()=>[t(e(x),{size:"small",align:"center",wrap:!0},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...s[6]||(s[6]=[l("选择小岛",-1)])]),_:1}),t(e(pe),{value:v.value,"onUpdate:value":s[2]||(s[2]=F=>v.value=F),options:m.value,"consistent-menu-width":!1,style:{width:"100px"}},null,8,["value","options"]),S.value?C("",!0):(o(),M(e(N),{key:0,type:"primary",onClick:s[3]||(s[3]=F=>S.value=!0)},{default:a(()=>[...s[7]||(s[7]=[l("追加",-1)])]),_:1}))]),_:1})]),default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...s[8]||(s[8]=[l("点击图片移除",-1)])]),_:1}),t(e(x),{wrap:!0,size:[4,4]},{default:a(()=>[(o(!0),T(P,null,V(g.value,(F,K)=>{var Q;return o(),T("div",{key:K+((Q=v.value)!=null?Q:0)*1e3,class:"banner-box"},[D("img",{src:F,class:"banner-img",onClick:de=>c(K)},null,8,dt)])}),128))]),_:1})]),_:1}),t(e(x),{align:"center",justify:"end"},{default:a(()=>[t(e(d),{depth:3,style:{"font-size":"0.875rem"}},{default:a(()=>[...s[9]||(s[9]=[l("各个小岛的变更要分别提交喔",-1)])]),_:1}),t(e(N),{type:"primary",loading:e(b),disable:e(b),onClick:p},{default:a(()=>[...s[10]||(s[10]=[l("提交",-1)])]),_:1},8,["loading","disable"])]),_:1})]),_:1}))}}),mt=ne(ot,[["__scopeId","data-v-35893c7d"]]),gt=H({__name:"TabGlobal",setup(Y){ae($=>({v21c7f12a:e(z).textColor1}));const w=E();B(),re();const z=le(),A=U(!1),v=U(!1),m=U(!1),g=U(!1);w.admin.isSuperAdmin===!0&&We().then($=>{A.value=$.new_binggan,v.value=$.new_loudspeaker,m.value=$.new_binggan_force,g.value=!0});function S($,n){const _={binggan:w.binggan,key:$,value:JSON.stringify(n)};Ze(_).then()}return($,n)=>(o(),M(e(x),{vertical:"",size:[6,12]},{default:a(()=>[t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...n[6]||(n[6]=[l("领取饼干开关",-1)])]),_:1}),t(e(ue),{value:A.value,"onUpdate:value":n[0]||(n[0]=_=>A.value=_),disabled:!g.value,onUpdateValue:n[1]||(n[1]=_=>S("new_binggan",_))},null,8,["value","disabled"]),me(t(e(d),{depth:3},{default:a(()=>[...n[7]||(n[7]=[l("读取中",-1)])]),_:1},512),[[ge,!g.value]])]),_:1}),t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...n[8]||(n[8]=[l("大喇叭开关",-1)])]),_:1}),t(e(ue),{value:v.value,"onUpdate:value":n[2]||(n[2]=_=>v.value=_),disabled:!g.value,onUpdateValue:n[3]||(n[3]=_=>S("new_loudspeaker",_))},null,8,["value","disabled"]),me(t(e(d),{depth:3},{default:a(()=>[...n[9]||(n[9]=[l("读取中",-1)])]),_:1},512),[[ge,!g.value]])]),_:1}),t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...n[10]||(n[10]=[l("强制打开饼干（慎用）",-1)])]),_:1}),t(e(ue),{value:m.value,"onUpdate:value":n[4]||(n[4]=_=>m.value=_),disabled:!g.value,onUpdateValue:n[5]||(n[5]=_=>S("new_binggan_force",_))},null,8,["value","disabled"]),me(t(e(d),{depth:3},{default:a(()=>[...n[11]||(n[11]=[l("读取中",-1)])]),_:1},512),[[ge,!g.value]])]),_:1})]),_:1}))}}),pt=ne(gt,[["__scopeId","data-v-3d2b5c4f"]]),ft={class:"actives-item"},vt={style:{"margin-left":"auto"}},bt={key:0,style:{"margin-top":"6px"}},_t={style:{"margin-top":"6px"}},yt={style:{"margin-top":"6px"}},kt=H({__name:"TabActives",setup(Y){ae(p=>({a0198f68:e(A).dividerColor})),h.extend(fe),h.extend(ve);const w=E(),z=B(),A=le(),v=U(h().tz("Asia/Shanghai").format("YYYY-MM-DD"));q(v,()=>c());const m=U(1);q(m,()=>c()),ie(()=>c());function g(p){return h().add(1,"day").isBefore(p)}const S=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0},{title:"主题",key:"thread_title",render:i,resizable:!0},{title:"回复",key:"post_content",render:f,resizable:!0}],{loading:$,data:n,send:_}=R(p=>Ue(p),{immediate:!1,initialData:{data:[],last_page:1}});function c(){const p={binggan:w.binggan,date:v.value,page:m.value};_(p)}function b(p){return{name:"thread",params:{threadId:p.thread_id,page:p.floor===null?1:Math.ceil((p.floor+1)/200)},hash:p.floor===null?void 0:"#f_"+p.floor}}function i(p,r){return p.thread_id!==null?j(se,{to:b(p),target:"_blank"},()=>j(L,{style:"max-width: 120px"},()=>p.thread_title)):j(L,{style:"max-width: 120px"},()=>p.thread_title)}function f(p,r){return p.thread_id!==null?j(se,{to:b(p),target:"_blank"},()=>j(L,{style:"max-width: 120px"},()=>p.post_content)):j(L,{style:"max-width: 120px"},()=>p.post_content)}return(p,r)=>(o(),M(e(x),{size:"small"},{default:a(()=>[t(e(be),{"formatted-value":v.value,"onUpdate:formattedValue":r[0]||(r[0]=s=>v.value=s),"value-format":"yyyy-MM-dd",type:"date",size:e(z).isMobile?"small":"medium","is-date-disabled":g},null,8,["formatted-value","size"]),t(e(N),{type:"primary",onClick:r[1]||(r[1]=s=>c())},{default:a(()=>[...r[4]||(r[4]=[l(" 查询 ",-1)])]),_:1}),t(e(G),{title:"管理员操作记录",size:"small"},{default:a(()=>[e(z).isMobile?C("",!0):(o(),M(e(x),{key:0},{default:a(()=>[t(e(_e),{columns:S,data:e(n).data,bordered:!1,loading:e($),style:{height:"100%"}},null,8,["data","loading"]),t(e(J),{page:m.value,"onUpdate:page":r[2]||(r[2]=s=>m.value=s),"page-count":e(n).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(o(),T(P,{key:1},[e(n).data.length>0?(o(),M(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e($)?C("",!0):(o(!0),T(P,{key:0},V(e(n).data,s=>(o(),T("div",ft,[t(e(x),null,{default:a(()=>[D("div",null,[t(e(d),{depth:3},{default:a(()=>[...r[5]||(r[5]=[l("时间：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(s.created_at),1)]),_:2},1024)]),D("div",vt,[t(e(d),{depth:3},{default:a(()=>[...r[6]||(r[6]=[l("管理员：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(s.name),1)]),_:2},1024)])]),_:2},1024),s.olo?(o(),T("div",bt,[t(e(d),{depth:3},{default:a(()=>[...r[7]||(r[7]=[l("罚款：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(s.olo),1)]),_:2},1024)])):C("",!0),D("div",_t,[t(e(d),{depth:3},{default:a(()=>[...r[8]||(r[8]=[l("操作：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(s.active),1)]),_:2},1024)]),D("div",yt,[t(e(d),{depth:3},{default:a(()=>[...r[9]||(r[9]=[l("原因：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(s.content),1)]),_:2},1024)]),s.thread_title!==null?(o(),M(e(x),{key:1,style:{"margin-top":"6px"},wrap:!1},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...r[10]||(r[10]=[l("主题：",-1)])]),_:1}),t(e(se),{to:b(s),style:{"max-width":"80%"}},{default:a(()=>[t(e(L),null,{default:a(()=>[l(I(s.thread_title),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):C("",!0),s.post_content!==null?(o(),M(e(x),{key:2,style:{"margin-top":"6px"},wrap:!1},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...r[11]||(r[11]=[l("主题：",-1)])]),_:1}),t(e(se),{to:b(s),style:{"max-width":"80%"}},{default:a(()=>[t(e(L),null,{default:a(()=>[l(I(s.post_content),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):C("",!0)]))),256)),t(e(J),{page:m.value,"onUpdate:page":r[3]||(r[3]=s=>m.value=s),"page-count":e(n).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(o(),M(e(ye),{key:1}))],64)):C("",!0)]),_:1})]),_:1}))}}),xt=ne(kt,[["__scopeId","data-v-a35e3f42"]]),zt={class:"actives-item"},St={style:{"margin-left":"auto"}},wt={key:0,style:{"margin-top":"6px"}},ct={key:1,style:{"margin-top":"6px"}},Ut={style:{"margin-top":"6px"}},$t={style:{"margin-top":"6px"}},Mt=H({__name:"TabActivesSuper",setup(Y){ae(b=>({v2c7ab229:e(A).dividerColor})),h.extend(fe),h.extend(ve);const w=E(),z=B(),A=le(),v=U(h().tz("Asia/Shanghai").format("YYYY-MM-DD"));q(v,()=>c());const m=U(1);q(m,()=>c()),ie(()=>c());function g(b){return h().add(1,"day").isBefore(b)}const S=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"目标饼干",key:"binggan_target",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0}],{loading:$,data:n,send:_}=R(b=>Ue(b),{immediate:!1,initialData:{data:[],last_page:1}});function c(){const b={binggan:w.binggan,date:v.value,page:m.value,show_super:!0};_(b)}return(b,i)=>(o(),M(e(x),{size:"small"},{default:a(()=>[t(e(be),{"formatted-value":v.value,"onUpdate:formattedValue":i[0]||(i[0]=f=>v.value=f),"value-format":"yyyy-MM-dd",type:"date",size:e(z).isMobile?"small":"medium","is-date-disabled":g},null,8,["formatted-value","size"]),t(e(N),{type:"primary",onClick:i[1]||(i[1]=f=>c())},{default:a(()=>[...i[4]||(i[4]=[l(" 查询 ",-1)])]),_:1}),t(e(G),{title:"管理员操作记录",size:"small"},{default:a(()=>[e(z).isMobile?C("",!0):(o(),M(e(x),{key:0},{default:a(()=>[t(e(_e),{columns:S,data:e(n).data,bordered:!1,loading:e($),style:{height:"100%"}},null,8,["data","loading"]),t(e(J),{page:m.value,"onUpdate:page":i[2]||(i[2]=f=>m.value=f),"page-count":e(n).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(o(),T(P,{key:1},[e(n).data.length>0?(o(),M(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e($)?C("",!0):(o(!0),T(P,{key:0},V(e(n).data,f=>(o(),T("div",zt,[t(e(x),null,{default:a(()=>[D("div",null,[t(e(d),{depth:3},{default:a(()=>[...i[5]||(i[5]=[l("时间：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(f.created_at),1)]),_:2},1024)]),D("div",St,[t(e(d),{depth:3},{default:a(()=>[...i[6]||(i[6]=[l("管理员：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(f.name),1)]),_:2},1024)])]),_:2},1024),f.olo?(o(),T("div",wt,[t(e(d),{depth:3},{default:a(()=>[...i[7]||(i[7]=[l("目标饼干：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(f.binggan_target),1)]),_:2},1024)])):C("",!0),f.olo?(o(),T("div",ct,[t(e(d),{depth:3},{default:a(()=>[...i[8]||(i[8]=[l("罚款：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(f.olo),1)]),_:2},1024)])):C("",!0),D("div",Ut,[t(e(d),{depth:3},{default:a(()=>[...i[9]||(i[9]=[l("操作：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(f.active),1)]),_:2},1024)]),D("div",$t,[t(e(d),{depth:3},{default:a(()=>[...i[10]||(i[10]=[l("原因：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(f.content),1)]),_:2},1024)])]))),256)),t(e(J),{page:m.value,"onUpdate:page":i[3]||(i[3]=f=>m.value=f),"page-count":e(n).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(o(),M(e(ye),{key:1}))],64)):C("",!0)]),_:1})]),_:1}))}}),It=ne(Mt,[["__scopeId","data-v-296b2d9d"]]),Tt={key:0,style:{"margin-top":"10px"}},At={key:1,style:{"margin-top":"10px"}},Dt=H({__name:"TabSuperAdmin",setup(Y){const w=E(),z=B(),A=re(),v=U(null),m=U(null),g=U(null),S=U(null),$=U(null),n=U({binggan:"",olo:void 0,message:""}),_=U({uuid:""}),c=U({thread_id:null,forum_id:1,nissin_clear:!0}),b=U({binggan:"",medalId:181}),i=U({watermark_string:"",result_binggan:null,result_thread_id:null}),f=te(()=>A.forumsData.map(y=>({value:y.id,label:y.name}))),p=[{value:181,label:"皇家御用画宗"},{value:182,label:"小火锅守护者"}],r={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},message:{required:!1},olo:{required:!0,message:"请选择要奖罚的olo",type:"number",trigger:"blur"}},s={uuid:{required:!0,message:"请填写目标UUID",trigger:"blur"}},F={thread_id:{required:!0,message:"请填写主题ID",type:"number",trigger:"blur"},forum_id:{required:!0,message:"请选择目标小岛",type:"number",trigger:"blur"},nissin_clear:{required:!0}},K={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},medalId:{required:!0,message:"请选择要发放的成就",type:"number",trigger:"blur"}},Q={watermark_string:{required:!0,message:"请填写混淆后的水印字符串",trigger:"blur"}},{loading:de,send:$e,onSuccess:Me,onError:Ie}=R(y=>Xe(y),{immediate:!1});Me(()=>{n.value.binggan=""}),Ie(()=>{n.value.binggan=""});function Te(){var y;(y=g.value)==null||y.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const k={binggan:w.binggan,binggan_target:n.value.binggan,olo_num:n.value.olo,olo_message:n.value.message},W=n.value.olo>0?"奖励":"罚款",oe={title:"奖罚olo",closable:!1,content:`对象饼干：${n.value.binggan} ${W}${n.value.olo}个olo`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{$e(k)}};window.$dialog.warning(oe)}})}const{loading:ke,send:Ae,onSuccess:De,onError:Pt}=R(y=>et(y),{immediate:!1});De(()=>{_.value.uuid=""});function Ce(){var y;(y=v.value)==null||y.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const k={binggan:w.binggan,uuid:_.value.uuid};Ae(k)}})}const{loading:xe,send:Fe,onSuccess:he,onError:Rt}=R(y=>tt(y),{immediate:!1});he(()=>{c.value.thread_id=null});function Ne(){var y;(y=m.value)==null||y.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const k={binggan:w.binggan,thread_id:c.value.thread_id,forum_id:c.value.forum_id,nissin_clear:c.value.nissin_clear};Fe(k)}})}const{loading:ze,send:Oe,onSuccess:Pe,onError:Re}=R(y=>at(y),{immediate:!1});Pe(()=>{b.value.binggan=""}),Re(()=>{b.value.binggan=""});function He(){var y;(y=S.value)==null||y.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const k={binggan:w.binggan,binggan_target:b.value.binggan,medal_id:b.value.medalId},W=p.find(Ve=>Ve.value===b.value.medalId),oe={title:"发放成就",closable:!1,content:`对象饼干：${b.value.binggan}  发放成就：${W==null?void 0:W.label}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Oe(k)}};window.$dialog.warning(oe)}})}const{loading:Se,send:Ee,onSuccess:Be,onError:Ye}=R(y=>lt(y),{immediate:!1});Be(y=>{i.value.result_binggan=y.data.binggan,i.value.result_thread_id=y.data.thread_id}),Ye(()=>{i.value.result_binggan=null,i.value.result_thread_id=null});function qe(){var y;(y=$.value)==null||y.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{i.value.result_binggan=null,i.value.result_thread_id=null;const k={watermark_string:i.value.watermark_string};Ee(k)}})}return(y,u)=>(o(),M(e(x),{style:{"max-width":"450px"}},{default:a(()=>[t(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[10]||(u[10]=[l("奖罚olo ",-1)])]),_:1})]),_:1}),t(e(X),{ref_key:"oloFormRef",ref:g,model:n.value,"label-placement":"left","label-width":"auto",rules:r,size:e(z).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:a(()=>[t(e(O),{label:"目标饼干",path:"binggan"},{default:a(()=>[t(e(ee),{value:n.value.binggan,"onUpdate:value":u[0]||(u[0]=k=>n.value.binggan=k)},null,8,["value"])]),_:1}),t(e(O),{label:"奖罚olo",path:"olo"},{default:a(()=>[t(e(we),{value:n.value.olo,"onUpdate:value":u[1]||(u[1]=k=>n.value.olo=k),max:1e6,min:-1e6,step:1e3,parse:e(ut),format:e(st),placeholder:"正数是奖励，负数是罚款"},null,8,["value","parse","format"])]),_:1}),t(e(O),{label:"附带留言",path:"message"},{default:a(()=>[t(e(ee),{value:n.value.message,"onUpdate:value":u[2]||(u[2]=k=>n.value.message=k),placeholder:"将显示在收支记录"},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(de),disabled:e(de),onClick:Te},{default:a(()=>[...u[11]||(u[11]=[l("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[12]||(u[12]=[l("解锁UUID ",-1)])]),_:1})]),_:1}),t(e(X),{ref_key:"uuidFormRef",ref:v,model:_.value,"label-placement":"left","label-width":"auto",rules:s,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(O),{label:"解锁UUID",path:"uuid"},{default:a(()=>[t(e(ee),{value:_.value.uuid,"onUpdate:value":u[3]||(u[3]=k=>_.value.uuid=k)},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(ke),disabled:e(ke),onClick:Ce},{default:a(()=>[...u[13]||(u[13]=[l("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[14]||(u[14]=[l("主题转区 ",-1)])]),_:1})]),_:1}),t(e(X),{ref_key:"transferFormRef",ref:m,model:c.value,"label-placement":"left","label-width":"auto",rules:F,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(O),{label:"主题ID",path:"thread_id"},{default:a(()=>[t(e(we),{"show-button":!1,value:c.value.thread_id,"onUpdate:value":u[4]||(u[4]=k=>c.value.thread_id=k),max:1e6,min:1},null,8,["value"])]),_:1}),t(e(O),{label:"目标小岛",path:"forum_id"},{default:a(()=>[t(e(pe),{value:c.value.forum_id,"onUpdate:value":u[5]||(u[5]=k=>c.value.forum_id=k),options:f.value,"consistent-menu-width":!1,style:{width:"300px"}},null,8,["value","options"])]),_:1}),t(e(O),{label:"解锁日清",path:"nissin_clear"},{default:a(()=>[t(e(ue),{value:c.value.nissin_clear,"onUpdate:value":u[6]||(u[6]=k=>c.value.nissin_clear=k)},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(xe),disabled:e(xe),onClick:Ne},{default:a(()=>[...u[15]||(u[15]=[l("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[16]||(u[16]=[l("发放成就 ",-1)])]),_:1})]),_:1}),t(e(X),{ref_key:"formRef",ref:S,model:b.value,"label-placement":"left","label-width":"auto",rules:K,size:e(z).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:a(()=>[t(e(O),{label:"目标饼干",path:"binggan"},{default:a(()=>[t(e(ee),{value:b.value.binggan,"onUpdate:value":u[7]||(u[7]=k=>b.value.binggan=k)},null,8,["value"])]),_:1}),t(e(O),{label:"发放成就",path:"medalId"},{default:a(()=>[t(e(pe),{value:b.value.medalId,"onUpdate:value":u[8]||(u[8]=k=>b.value.medalId=k),options:p,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(ze),disabled:e(ze),onClick:He},{default:a(()=>[...u[17]||(u[17]=[l("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[18]||(u[18]=[l("解密水印 ",-1)])]),_:1})]),_:1}),t(e(X),{ref_key:"watermarkFormRef",ref:$,model:i.value,"label-placement":"left","label-width":"auto",rules:Q,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(O),{label:"水印字符串",path:"watermark_string"},{default:a(()=>[t(e(ee),{value:i.value.watermark_string,"onUpdate:value":u[9]||(u[9]=k=>i.value.watermark_string=k)},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(Se),disabled:e(Se),onClick:qe},{default:a(()=>[...u[19]||(u[19]=[l("提交",-1)])]),_:1},8,["loading","disabled"]),i.value.result_binggan!==null?(o(),T("div",Tt,[t(e(d),null,{default:a(()=>[l("饼干："+I(i.value.result_binggan),1)]),_:1}),u[20]||(u[20]=D("br",null,null,-1)),t(e(ce),{href:"/thread/"+i.value.result_thread_id,target:"_blank"},{default:a(()=>[l(" 跳转到主题 (ID: "+I(i.value.result_thread_id)+") ",1)]),_:1},8,["href"])])):i.value.result_thread_id!==null?(o(),T("div",At,[t(e(d),{type:"warning"},{default:a(()=>[...u[21]||(u[21]=[l("未登录用户（无饼干）",-1)])]),_:1}),u[22]||(u[22]=D("br",null,null,-1)),t(e(ce),{href:"/thread/"+i.value.result_thread_id,target:"_blank"},{default:a(()=>[l(" 跳转到主题 (ID: "+I(i.value.result_thread_id)+") ",1)]),_:1},8,["href"])])):C("",!0)]),_:1},8,["model","size"])]),_:1}))}}),Ct={class:"daily-item"},Ft={style:{"margin-left":"auto"}},ht=H({__name:"TabDaily",setup(Y){ae(i=>({f158d648:e(A).dividerColor})),h.extend(fe),h.extend(ve);const w=E(),z=B(),A=le(),v=U([h().tz("Asia/Shanghai").subtract(7,"day").format("YYYY-MM-DD"),h().tz("Asia/Shanghai").format("YYYY-MM-DD")]);q(v,()=>{m.value=1,b()});const m=U(1);q(m,()=>b()),ie(()=>b());const g=h("2026-02-01").valueOf();function S(i){return!!(i<g||h().add(1,"day").isBefore(i))}const $=[{title:"日期",key:"date",resizable:!0},{title:"登录人数",key:"login_count",resizable:!0}],{loading:n,data:_,send:c}=R(i=>nt(i),{immediate:!1,initialData:{data:[],last_page:1}});function b(){const i={binggan:w.binggan,page:m.value,date_start:v.value[0],date_end:v.value[1]};c(i)}return(i,f)=>(o(),M(e(x),{size:"small"},{default:a(()=>[t(e(be),{"formatted-value":v.value,"onUpdate:formattedValue":f[0]||(f[0]=p=>v.value=p),"value-format":"yyyy-MM-dd",type:"daterange",size:e(z).isMobile?"small":"medium","is-date-disabled":S,clearable:""},null,8,["formatted-value","size"]),t(e(N),{type:"primary",onClick:f[1]||(f[1]=p=>b())},{default:a(()=>[...f[4]||(f[4]=[l(" 查询 ",-1)])]),_:1}),t(e(G),{title:"每日数据",size:"small"},{default:a(()=>[e(z).isMobile?C("",!0):(o(),M(e(x),{key:0},{default:a(()=>[t(e(_e),{columns:$,data:e(_).data,bordered:!1,loading:e(n),style:{height:"100%"}},null,8,["data","loading"]),t(e(J),{page:m.value,"onUpdate:page":f[2]||(f[2]=p=>m.value=p),"page-count":e(_).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(o(),T(P,{key:1},[e(_).data.length>0?(o(),M(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e(n)?C("",!0):(o(!0),T(P,{key:0},V(e(_).data,p=>(o(),T("div",Ct,[t(e(x),null,{default:a(()=>[D("div",null,[t(e(d),{depth:3},{default:a(()=>[...f[5]||(f[5]=[l("日期：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(p.date),1)]),_:2},1024)]),D("div",Ft,[t(e(d),{depth:3},{default:a(()=>[...f[6]||(f[6]=[l("登录人数：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[l(I(p.login_count),1)]),_:2},1024)])]),_:2},1024)]))),256)),t(e(J),{page:m.value,"onUpdate:page":f[3]||(f[3]=p=>m.value=p),"page-count":e(_).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(o(),M(e(ye),{key:1}))],64)):C("",!0)]),_:1})]),_:1}))}}),Nt=ne(ht,[["__scopeId","data-v-5f835062"]]),Ot=H({__name:"AdminCard",setup(Y){const w=E(),z=B(),A=re(),v=te(()=>w.binggan===null||w.userData.binggan.admin_forums===void 0?[]:A.forumsData.reduce((m,g)=>(w.checkAdminForums(g.id)&&m.push({value:g.id,label:g.name,forumId:g.id}),m),[]));return(m,g)=>(o(),M(e(G),{hoverable:"",size:"small"},{default:a(()=>[t(e(x),{vertical:e(z).isMobile},{default:a(()=>[t(e(x),{size:"small",align:"center"},{default:a(()=>[...g[0]||(g[0]=[D("img",{src:"/ui/my-binggan.png",style:{"max-width":"50px","max-height":"50px"}},null,-1),D("span",null,"管理员中心",-1)])]),_:1}),D("div",null,[t(e(d),{depth:3},{default:a(()=>[...g[1]||(g[1]=[l("我管理的板块",-1)])]),_:1}),t(e(x),null,{default:a(()=>[(o(!0),T(P,null,V(v.value,S=>(o(),M(e(je),null,{default:a(()=>[l(I(S.forumId)+". "+I(S.label),1)]),_:2},1024))),256))]),_:1})])]),_:1},8,["vertical"])]),_:1}))}}),Vt=H({__name:"AdminCenter",setup(Y){const w=E(),z=B(),A=U();document.title="管理员中心";const v=te(()=>{const m=[{name:"banners",tab:"版头设定",component:mt}];return w.admin.isNormalAdmin&&m.unshift({name:"actives",tab:"管理状况",component:xt}),w.admin.isSuperAdmin?m.concat([{name:"daily",tab:"每日数据",component:Nt},{name:"global",tab:"全局设置",component:pt},{name:"super_actives",tab:"超管状况",component:It},{name:"super_admin",tab:"超管操作",component:Dt}]):m});return(m,g)=>(o(),M(e(x),{vertical:"",style:{"margin-top":"8px"}},{default:a(()=>[t(e(Ot)),t(e(Ge),{type:"line","bar-width":e(z).isMobile?0:void 0,animated:"",size:e(z).isMobile?"small":"large",value:A.value,"onUpdate:value":g[0]||(g[0]=S=>A.value=S)},{default:a(()=>[(o(!0),T(P,null,V(v.value,S=>(o(),M(e(Je),{name:S.name,tab:S.tab,key:S.name},{default:a(()=>[(o(),M(Ke(S.component)))]),_:2},1032,["name","tab"]))),128))]),_:1},8,["bar-width","size","value"]),g[1]||(g[1]=D("div",{style:{height:"50px"}},null,-1))]),_:1}))}});export{Vt as default};
