import{n as N,U as R,W as j,X as E,g as V,T as A,p as d,j as r,q as s,I as w,x as l,i as T,w as b,Q as x,F as L,E as a,J as c,H as h,L as n,K as g,P as t,S as k}from"./vendor-CSO85mTd.js";import{d as J,s as K}from"./showDialog-BnseR1Jl.js";import{u as Q}from"./browseLogger-KpGxmd2K.js";import{u as U,b as z,_ as X}from"./app-BUDUzlnJ.js";const G={key:0},O=N({__name:"ThreadList",props:{threadsListData:{},showThis:{type:Boolean},newWindowToPost:{type:Boolean,default:!1}},emits:["withdrawDelayThreadSuccess"],setup(m,{expose:S,emit:P}){R(i=>({v07aae8c0:s(p).hoverColor,v4be6a5f4:s(p).textColor1}));const u=U(),p=j(),v=E(),W=m,M=P,C=Q(),_=C.data;function q(){C.reload()}S({reloadBrowseLogger:q});function B(i){const o={name:"thread",params:{threadId:i,page:Math.ceil((_.value[i].floor+1)/200)},hash:`#f_${_.value[i].floor}`};if(W.newWindowToPost){const f=v.resolve(o);window.open(f.href,"_blank")}else v.push(o)}const{loading:$,send:F,onSuccess:H}=V(i=>J(i),{immediate:!1});H(()=>{M("withdrawDelayThreadSuccess")});function I(i){K({title:"要撤回延时主题吗？",onPositiveClick:()=>{F(i)}})}return(i,o)=>{const f=A("router-link");return m.showThis?(r(),d(s(w),{key:0,vertical:"",size:2},{default:l(()=>[(r(!0),T(x,null,b(m.threadsListData,e=>(r(),d(s(L),{size:"small",bordered:!0,key:e.id,class:"thread-cards","content-style":{padding:s(u).userCustom.threadListCardPadding+"px"},hoverable:""},{default:l(()=>[a(s(w),{vertical:"",size:[0,0]},{default:l(()=>[c("div",{style:h({color:e.title_color&&!s(u).userCustom.monochromeMode?e.title_color:s(p).textColor1,fontSize:s(u).userCustom.fontSizeThreadList+"px",lineHeight:1.5}),class:"thread-title"},[n(t(e.sub_title)+" "+t(e.vote_question_id?"🗳️":"")+" "+t(e.gamble_question_id?"🎲":"")+" "+t(e.crowd_id?"💰":"")+" "+t(e.hongbao_id?"🧧":"")+" ",1),a(f,{to:{name:"thread",params:{threadId:e.id}},style:h({color:e.title_color&&!s(u).userCustom.monochromeMode?e.title_color:s(p).textColor1,pointerEvents:e.is_delay?"none":void 0}),target:m.newWindowToPost?"_blank":!1},{default:l(()=>[n(t(e.title),1)]),_:2},1032,["to","style","target"]),e.posts_num>200?(r(),d(f,{key:0,to:{name:"thread",params:{threadId:e.id,page:Math.ceil((e.posts_num+1)/200)}},target:m.newWindowToPost?"_blank":!1},{default:l(()=>[n(" ["+t(Math.ceil((e.posts_num+1)/200))+"] ",1)]),_:2},1032,["to","target"])):g("",!0),s(_)[e.id]?(r(),d(s(z),{key:1,size:"tiny",type:"primary",onClick:y=>B(e.id)},{default:l(()=>{var y;return[n(" ["+t((y=s(_)[e.id])==null?void 0:y.floor)+"楼] ",1)]}),_:2},1032,["onClick"])):g("",!0),e.is_your_thread?(r(),d(s(z),{key:2,size:"tiny",type:"warning",disabled:s($),onClick:y=>I(e.id)},{default:l(()=>[...o[0]||(o[0]=[n("撤回",-1)])]),_:1},8,["disabled","onClick"])):g("",!0)],4),a(s(w),{size:"small",class:"thread-title-secondary",style:h({fontSize:s(u).userCustom.fontSizeThreadListFooter+"px",marginTop:s(u).userCustom.threadListInnerMargin+"px",lineHeight:1.5})},{default:l(()=>[c("span",null,[a(s(k),{depth:"3"},{default:l(()=>[...o[1]||(o[1]=[n("最新回复:",-1)])]),_:1}),n(" "+t(e.updated_at),1)]),c("span",null,[a(s(k),{depth:"3"},{default:l(()=>[...o[2]||(o[2]=[n("发帖人:",-1)])]),_:1}),n(" "+t(e.nickname),1)]),o[4]||(o[4]=c("span",{style:{"margin-left":"auto"}},null,-1)),n(" "+t(e.posts_num>1200?"🔥":"")+" ",1),e.locked_by_coin>0?(r(),T("span",G,"🔒"+t(e.locked_by_coin),1)):g("",!0),c("span",null,[a(s(k),{depth:"3"},{default:l(()=>[...o[3]||(o[3]=[n("Re:",-1)])]),_:1}),n(" "+t(e.posts_num),1)])]),_:2},1032,["style"])]),_:2},1024)]),_:2},1032,["content-style"]))),128))]),_:1})):(r(),d(s(w),{key:1,vertical:"",size:2},{default:l(()=>[(r(),T(x,null,b(50,e=>a(s(L),{class:"threads-card-skeleton"})),64))]),_:1}))}}}),se=X(O,[["__scopeId","data-v-3819a25a"]]);export{se as T};
