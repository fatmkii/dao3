import{w as S,p as $,b as x,u as y,$ as m,c as R,A as z,M as F,f as n,H as s,a,o as H,z as N}from"./app-DNiDbruX.js";import{j as T}from"./admin-CvRjLelB.js";import{u as k}from"./forums-DNot3SDn.js";import{_ as q}from"./FInput.vue_vue_type_script_setup_true_lang-OWp00g7X.js";import{a as g,N as A}from"./FormItem-DDXeWY7y.js";import{N as C}from"./Select-DJR65rQm.js";import"./Input-DPs_spKr.js";import"./use-locale-Dk0lH-2-.js";import"./Tag-CfXSXn3u.js";const J=S({__name:"TabMedal",setup(O){const p=$(),b=x();k(),y();const i=m(null),e=m({binggan:"",medalId:181}),c={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},medalId:{required:!0,message:"请选择要发放的成就",type:"number",trigger:"blur"}},u=[{value:181,label:"皇家御用画宗"},{value:182,label:"小火锅守护者"}],{loading:d,send:f,onSuccess:v,onError:_}=R(t=>T(t),{immediate:!1});v(()=>{e.value.binggan=""}),_(()=>{e.value.binggan=""});function M(){var t;(t=i.value)==null||t.validate(l=>{if(l){window.$message.error("请确认信息填写完整");return}else{const r={binggan:p.binggan,binggan_target:e.value.binggan,medal_id:e.value.medalId},o=u.find(I=>I.value===e.value.medalId),w={title:"发放成就",closable:!1,content:`对象饼干：${e.value.binggan}  发放成就：${o==null?void 0:o.label}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{f(r)}};window.$dialog.warning(w)}})}return(t,l)=>(z(),F(a(A),{ref_key:"formRef",ref:i,model:e.value,"label-placement":"left","label-width":"auto",rules:c,size:a(b).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:n(()=>[s(a(g),{label:"目标饼干",path:"binggan"},{default:n(()=>[s(a(q),{value:e.value.binggan,"onUpdate:value":l[0]||(l[0]=r=>e.value.binggan=r)},null,8,["value"])]),_:1}),s(a(g),{label:"发放成就",path:"medalId"},{default:n(()=>[s(a(C),{value:e.value.medalId,"onUpdate:value":l[1]||(l[1]=r=>e.value.medalId=r),options:u,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),s(a(H),{type:"primary",loading:a(d),disabled:a(d),onClick:M},{default:n(()=>[N("提交")]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]))}});export{J as default};
