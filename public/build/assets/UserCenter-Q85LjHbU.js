var mn=Object.defineProperty,vn=Object.defineProperties;var bn=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var yn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable;var mt=(n,e,t)=>e in n?mn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ue=(n,e)=>{for(var t in e||(e={}))yn.call(e,t)&&mt(n,t,e[t]);if(pt)for(var t of pt(e))_n.call(e,t)&&mt(n,t,e[t]);return n},ye=(n,e)=>vn(n,bn(e));import{w as X,A as S,F as B,J as b,ba as Sn,bb as wn,ak as Dn,bc as Tn,m as r,b as z,bd as oe,as as Cn,$ as k,be as On,M as $,o,H as s,E as V,z as g,au as xe,t as _,aY as Te,aV as de,aW as le,av as U,aX as Ye,aw as ee,at as K,s as x,K as Ee,O as et,L as tt,P as Ie,g as Q,Z as Ut,aE as nt,x as G,_ as Y,Q as ne,v as q,bf as Ht,bg as Ft,I as ce,D as J,y as Le,aZ as qt,S as rt,p as Ce,B as Bt,bh as Xe,al as it,ar as xn,r as En,N as Wt,ai as In,aj as Mn,R as Nn,X as Pn,bi as vt,aF as bt,bj as ze,C as Ae,bk as kn,bl as yt,b1 as Rn,b0 as $n,a8 as Ln}from"./vendor-DQqxAeCv.js";import{u as re,b as L,a as ie,j as zn,k as An,e as je,c as ae,l as jn,m as Un,s as Hn,n as Fn,_ as at,o as qn,q as Bn,t as Wn,v as Vn,x as Gn,y as Yn,z as Xn,A as Kn,B as Jn}from"./app-CvEUHSZB.js";import{u as ot}from"./forums-B1L0hElq.js";import{T as Qn}from"./ThreadList-Btt6sf0F.js";import{_ as Zn,f as _t}from"./emojiData-Dr9ILPKe.js";import{i as er,a as tr}from"./inputNumberFormat-DaYmlx6U.js";import{d as ge}from"./dayjs.min-CUVi99TO.js";import"./showDialog-D6khvXZG.js";import"./browseLogger-DN4xlfaA.js";const nr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},rr=b("path",{d:"M12 12h2v12h-2z",fill:"currentColor"},null,-1),ir=b("path",{d:"M18 12h2v12h-2z",fill:"currentColor"},null,-1),ar=b("path",{d:"M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20z",fill:"currentColor"},null,-1),or=b("path",{d:"M12 2h8v2h-8z",fill:"currentColor"},null,-1),sr=[rr,ir,ar,or],lr=X({name:"TrashCan",render:function(e,t){return S(),B("svg",nr,sr)}});function Vt(n){let e=null;return()=>(e==null&&(e=n()),e)}function ur(n,e){return n.filter(t=>t!==e)}function dr(n,e){const t=new Set,i=l=>t.add(l);n.forEach(i),e.forEach(i);const a=[];return t.forEach(l=>a.push(l)),a}class cr{enter(e){const t=this.entered.length,i=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=dr(this.entered.filter(i),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=ur(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class fr{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(i=>{const a=this.config.exposeProperties[i];a!=null&&(t[i]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Gt="__NATIVE_FILE__",Yt="__NATIVE_URL__",Xt="__NATIVE_TEXT__",Kt="__NATIVE_HTML__",St=Object.freeze(Object.defineProperty({__proto__:null,FILE:Gt,HTML:Kt,TEXT:Xt,URL:Yt},Symbol.toStringTag,{value:"Module"}));function Ue(n,e,t){const i=e.reduce((a,l)=>a||n.getData(l),"");return i!=null?i:t}const Ke={[Gt]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[Kt]:{exposeProperties:{html:(n,e)=>Ue(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[Yt]:{exposeProperties:{urls:(n,e)=>Ue(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[Xt]:{exposeProperties:{text:(n,e)=>Ue(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function gr(n,e){const t=Ke[n];if(!t)throw new Error(`native type ${n} has no configuration`);const i=new fr(t);return i.loadDataTransfer(e),i}function He(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(Ke).filter(t=>{const i=Ke[t];return i!=null&&i.matchesTypes?i.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const hr=Vt(()=>/firefox/i.test(navigator.userAgent)),Jt=Vt(()=>!!window.safari);class wt{interpolate(e){const{xs:t,ys:i,c1s:a,c2s:l,c3s:d}=this;let u=t.length-1;if(e===t[u])return i[u];let c=0,f=d.length-1,p;for(;c<=f;){p=Math.floor(.5*(c+f));const m=t[p];if(m<e)c=p+1;else if(m>e)f=p-1;else return i[p]}u=Math.max(0,f);const h=e-t[u],v=h*h;return i[u]+a[u]*h+l[u]*v+d[u]*h*v}constructor(e,t){const{length:i}=e,a=[];for(let m=0;m<i;m++)a.push(m);a.sort((m,C)=>e[m]<e[C]?-1:1);const l=[],d=[];let u,c;for(let m=0;m<i-1;m++)u=e[m+1]-e[m],c=t[m+1]-t[m],l.push(u),d.push(c/u);const f=[d[0]];for(let m=0;m<l.length-1;m++){const C=d[m],w=d[m+1];if(C*w<=0)f.push(0);else{u=l[m];const y=l[m+1],E=u+y;f.push(3*E/((E+y)/C+(E+u)/w))}}f.push(d[d.length-1]);const p=[],h=[];let v;for(let m=0;m<f.length-1;m++){v=d[m];const C=f[m],w=1/l[m],y=C+f[m+1]-v-v;p.push((v-C-y)*w),h.push(y*w*w)}this.xs=e,this.ys=t,this.c1s=f,this.c2s=p,this.c3s=h}}const pr=1;function Qt(n){const e=n.nodeType===pr?n:n.parentElement;if(!e)return null;const{top:t,left:i}=e.getBoundingClientRect();return{x:i,y:t}}function _e(n){return{x:n.clientX,y:n.clientY}}function mr(n){var e;return n.nodeName==="IMG"&&(hr()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function vr(n,e,t,i){let a=n?e.width:t,l=n?e.height:i;return Jt()&&n&&(l/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:l}}function br(n,e,t,i,a){const l=mr(e),u=Qt(l?n:e),c={x:t.x-u.x,y:t.y-u.y},{offsetWidth:f,offsetHeight:p}=n,{anchorX:h,anchorY:v}=i,{dragPreviewWidth:m,dragPreviewHeight:C}=vr(l,e,f,p),w=()=>{let T=new wt([0,.5,1],[c.y,c.y/p*C,c.y+C-p]).interpolate(v);return Jt()&&l&&(T+=(window.devicePixelRatio-1)*C),T},y=()=>new wt([0,.5,1],[c.x,c.x/f*m,c.x+m-f]).interpolate(h),{offsetX:E,offsetY:D}=a,M=E===0||E,O=D===0||D;return{x:M?E:y(),y:O?D:w()}}let yr=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function _r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){_r(n,a,t[a])})}return n}class Sr{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,i){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,i);const a=d=>this.handleDragStart(d,e),l=d=>this.handleSelectStart(d);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",l),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",l),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const i=d=>this.handleDragEnter(d,e),a=d=>this.handleDragOver(d,e),l=d=>this.handleDrop(d,e);return t.addEventListener("dragenter",i),t.addEventListener("dragover",a),t.addEventListener("drop",l),()=>{t.removeEventListener("dragenter",i),t.removeEventListener("dragover",a),t.removeEventListener("drop",l)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Dt({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return Dt({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(St).some(t=>St[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=gr(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var i;return(i=this.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,i){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const l=this.sourceNodes.get(a);return l&&Qt(l)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame!="undefined"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:l}=this;this.dragStartSourceIds=null;const d=_e(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(l||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:d});const{dataTransfer:u}=a,c=He(u);if(this.monitor.isDragging()){if(u&&typeof u.setDragImage=="function"){const p=this.monitor.getSourceId(),h=this.sourceNodes.get(p),v=this.sourcePreviewNodes.get(p)||h;if(v){const{anchorX:m,anchorY:C,offsetX:w,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),M=br(h,v,d,{anchorX:m,anchorY:C},{offsetX:w,offsetY:y});u.setDragImage(v,M.x,M.y)}}try{u==null||u.setData("application/json",{})}catch(p){}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:f}=this.getCurrentSourcePreviewNodeOptions();f?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(u&&!u.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var l;(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:u}=a,c=He(u);c&&this.beginDragNativeItem(c,u)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:l}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,l.length>0&&this.actions.hover(l,{clientOffset:_e(a)}),l.some(u=>this.monitor.canDropOnTarget(u))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var l;(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:l}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=_e(a),this.scheduleHover(l),(l||[]).some(u=>this.monitor.canDropOnTarget(u))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var l;a.preventDefault(),(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(a.dataTransfer)}else He(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:l}=this;this.dropTargetIds=[],this.actions.hover(l,{clientOffset:_e(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const l=a.target;typeof l.dragDrop=="function"&&(l.tagName==="INPUT"||l.tagName==="SELECT"||l.tagName==="TEXTAREA"||l.isContentEditable||(a.preventDefault(),l.dragDrop()))},this.options=new yr(t,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new cr(this.isNodeInDocument)}}const wr=function(e,t,i){return new Sr(e,t,i)};function P(n,e,...t){if(Dr()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let i;if(e===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;i=new Error(e.replace(/%s/g,function(){return t[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}function Dr(){return typeof process!="undefined"&&!0}var fe;(function(n){n.mouse="mouse",n.touch="touch",n.keyboard="keyboard"})(fe||(fe={}));class Tr{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,i,a;return(a=(i=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&i!==void 0?i:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,t,i,a;return(a=(i=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&i!==void 0?i:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function Cr(n,e,t,i){return Math.sqrt(Math.pow(Math.abs(t-n),2)+Math.pow(Math.abs(i-e),2))}function Or(n,e,t,i,a){if(!a)return!1;const l=Math.atan2(i-e,t-n)*180/Math.PI+180;for(let d=0;d<a.length;++d){const u=a[d];if(u&&(u.start==null||l>=u.start)&&(u.end==null||l<=u.end))return!0}return!1}const xr={Left:1,Right:2,Center:4},Er={Left:0,Center:1,Right:2};function Fe(n){return n.button===void 0||n.button===Er.Left}function Ir(n){return n.buttons===void 0||(n.buttons&xr.Left)===0}function Zt(n){return!!n.targetTouches}const Mr=1;function Nr(n){const e=n.nodeType===Mr?n:n.parentElement;if(!e)return;const{top:t,left:i}=e.getBoundingClientRect();return{x:i,y:t}}function Pr(n,e){if(n.targetTouches.length===1)return Oe(n.targetTouches[0]);if(e&&n.touches.length===1&&n.touches[0].target===e.target)return Oe(n.touches[0])}function Oe(n,e){return Zt(n)?Pr(n,e):{x:n.clientX,y:n.clientY}}const me={[fe.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[fe.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[fe.keyboard]:{keydown:"keydown"}};class ve{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(P(!ve.isSetUp,"Cannot have two Touch backends at the same time."),ve.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(ve.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,i,a=!1){const l=a;this.listenerTypes.forEach(function(d){const u=me[d][t];u&&e.addEventListener(u,i,l)})}removeEventListener(e,t,i,a=!1){const l=a;this.listenerTypes.forEach(function(d){const u=me[d][t];u&&e.removeEventListener(u,i,l)})}connectDragSource(e,t){const i=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",i),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",i)}}connectDragPreview(e,t,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const i=this.options.rootElement;if(!this.document||!i)return()=>{};const a=l=>{if(!this.document||!i||!this.monitor.isDragging())return;let d;switch(l.type){case me.mouse.move:d={x:l.clientX,y:l.clientY};break;case me.touch.move:var u,c;d={x:((u=l.touches[0])===null||u===void 0?void 0:u.clientX)||0,y:((c=l.touches[0])===null||c===void 0?void 0:c.clientY)||0};break}const f=d!=null?this.document.elementFromPoint(d.x,d.y):void 0,p=f&&t.contains(f);if(f===t||p)return this.handleMove(l,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,i){this.getSourceClientOffset=a=>{const l=this.sourceNodes.get(a);return l&&Nr(l)},this.handleTopMoveStartCapture=a=>{Fe(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!Fe(a))return;const l=Oe(a);l&&(Zt(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=l),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!Fe(a))return;const l=a.type===me.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),l),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,l)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(l)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:l,dragOverTargetIds:d}=this,u=this.options.enableHoverOutsideTarget,c=Oe(a,this.lastTargetTouchFallback);if(!c)return;if(this._isScrolling||!this.monitor.isDragging()&&Or(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,c.x,c.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&l&&Cr(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,c.x,c.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(l,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const f=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(f),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const p=(d||[]).map(C=>this.targetNodes.get(C)).filter(C=>!!C),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(c.x,c.y,p):this.document.elementsFromPoint(c.x,c.y),v=[];for(const C in h){if(!h.hasOwnProperty(C))continue;let w=h[C];for(w!=null&&v.push(w);w;)w=w.parentElement,w&&v.indexOf(w)===-1&&v.push(w)}const m=v.filter(C=>p.indexOf(C)>-1).map(C=>this._getDropTargetId(C)).filter(C=>!!C).filter((C,w,y)=>y.indexOf(C)===w);if(u)for(const C in this.targetNodes){const w=this.targetNodes.get(C);if(f&&w&&w.contains(f)&&m.indexOf(C)===-1){m.unshift(C);break}}m.reverse(),this.actions.hover(m,{clientOffset:c})},this._getDropTargetId=a=>{const l=this.targetNodes.keys();let d=l.next();for(;d.done===!1;){const u=d.value;if(a===this.targetNodes.get(u))return u;d=l.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Ir(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Tr(i,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(fe.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(fe.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(fe.keyboard)}}const kr=function(e,t={},i={}){return new ve(e,t,i)};function Tt(n,e,t){return Array.isArray(n)?(n.length=Math.max(n.length,e),n.splice(e,1,t),t):(n[e]=t,t)}var en=Symbol.for("DndContextType");function Rr(n){Sn(en,n)}function $r(){return wn(en)}function Z(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Ct=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),qe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ot={INIT:"@@redux/INIT"+qe(),REPLACE:"@@redux/REPLACE"+qe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+qe()}};function Lr(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function tn(n,e,t){var i;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Z(0));if(typeof e=="function"&&typeof t=="undefined"&&(t=e,e=void 0),typeof t!="undefined"){if(typeof t!="function")throw new Error(Z(1));return t(tn)(n,e)}if(typeof n!="function")throw new Error(Z(2));var a=n,l=e,d=[],u=d,c=!1;function f(){u===d&&(u=d.slice())}function p(){if(c)throw new Error(Z(3));return l}function h(w){if(typeof w!="function")throw new Error(Z(4));if(c)throw new Error(Z(5));var y=!0;return f(),u.push(w),function(){if(y){if(c)throw new Error(Z(6));y=!1,f();var D=u.indexOf(w);u.splice(D,1),d=null}}}function v(w){if(!Lr(w))throw new Error(Z(7));if(typeof w.type=="undefined")throw new Error(Z(8));if(c)throw new Error(Z(9));try{c=!0,l=a(l,w)}finally{c=!1}for(var y=d=u,E=0;E<y.length;E++){var D=y[E];D()}return w}function m(w){if(typeof w!="function")throw new Error(Z(10));a=w,v({type:Ot.REPLACE})}function C(){var w,y=h;return w={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(Z(11));function M(){D.next&&D.next(p())}M();var O=y(M);return{unsubscribe:O}}},w[Ct]=function(){return this},w}return v({type:Ot.INIT}),i={dispatch:v,subscribe:h,getState:p,replaceReducer:m},i[Ct]=C,i}function zr(n,e,t){return e.split(".").reduce((i,a)=>i&&i[a]?i[a]:t||null,n)}function Ar(n,e){return n.filter(t=>t!==e)}function nn(n){return typeof n=="object"}function jr(n,e){const t=new Map,i=l=>{t.set(l,t.has(l)?t.get(l)+1:1)};n.forEach(i),e.forEach(i);const a=[];return t.forEach((l,d)=>{l===1&&a.push(d)}),a}function Ur(n,e){return n.filter(t=>e.indexOf(t)>-1)}const st="dnd-core/INIT_COORDS",Me="dnd-core/BEGIN_DRAG",lt="dnd-core/PUBLISH_DRAG_SOURCE",Ne="dnd-core/HOVER",Pe="dnd-core/DROP",ke="dnd-core/END_DRAG";function xt(n,e){return{type:st,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const Hr={type:st,payload:{clientOffset:null,sourceClientOffset:null}};function Fr(n){return function(t=[],i={publishSource:!0}){const{publishSource:a=!0,clientOffset:l,getSourceClientOffset:d}=i,u=n.getMonitor(),c=n.getRegistry();n.dispatch(xt(l)),qr(t,u,c);const f=Vr(t,u);if(f==null){n.dispatch(Hr);return}let p=null;if(l){if(!d)throw new Error("getSourceClientOffset must be defined");Br(d),p=d(f)}n.dispatch(xt(l,p));const v=c.getSource(f).beginDrag(u,f);if(v==null)return;Wr(v),c.pinSource(f);const m=c.getSourceType(f);return{type:Me,payload:{itemType:m,item:v,sourceId:f,clientOffset:l||null,sourceClientOffset:p||null,isSourcePublic:!!a}}}}function qr(n,e,t){P(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(i){P(t.getSource(i),"Expected sourceIds to be registered.")})}function Br(n){P(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Wr(n){P(nn(n),"Item must be an object.")}function Vr(n,e){let t=null;for(let i=n.length-1;i>=0;i--)if(e.canDragSource(n[i])){t=n[i];break}return t}function Gr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Gr(n,a,t[a])})}return n}function Xr(n){return function(t={}){const i=n.getMonitor(),a=n.getRegistry();Kr(i),Zr(i).forEach((d,u)=>{const c=Jr(d,u,a,i),f={type:Pe,payload:{dropResult:Yr({},t,c)}};n.dispatch(f)})}}function Kr(n){P(n.isDragging(),"Cannot call drop while not dragging."),P(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function Jr(n,e,t,i){const a=t.getTarget(n);let l=a?a.drop(i,n):void 0;return Qr(l),typeof l=="undefined"&&(l=e===0?{}:i.getDropResult()),l}function Qr(n){P(typeof n=="undefined"||nn(n),"Drop result must either be an object or undefined.")}function Zr(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function ei(n){return function(){const t=n.getMonitor(),i=n.getRegistry();ti(t);const a=t.getSourceId();return a!=null&&(i.getSource(a,!0).endDrag(t,a),i.unpinSource()),{type:ke}}}function ti(n){P(n.isDragging(),"Cannot call endDrag while not dragging.")}function Je(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function ni(n){return function(t,{clientOffset:i}={}){ri(t);const a=t.slice(0),l=n.getMonitor(),d=n.getRegistry(),u=l.getItemType();return ai(a,d,u),ii(a,l,d),oi(a,l,d),{type:Ne,payload:{targetIds:a,clientOffset:i||null}}}}function ri(n){P(Array.isArray(n),"Expected targetIds to be an array.")}function ii(n,e,t){P(e.isDragging(),"Cannot call hover while not dragging."),P(!e.didDrop(),"Cannot call hover after drop.");for(let i=0;i<n.length;i++){const a=n[i];P(n.lastIndexOf(a)===i,"Expected targetIds to be unique in the passed array.");const l=t.getTarget(a);P(l,"Expected targetIds to be registered.")}}function ai(n,e,t){for(let i=n.length-1;i>=0;i--){const a=n[i],l=e.getTargetType(a);Je(l,t)||n.splice(i,1)}}function oi(n,e,t){n.forEach(function(i){t.getTarget(i).hover(e,i)})}function si(n){return function(){if(n.getMonitor().isDragging())return{type:lt}}}function li(n){return{beginDrag:Fr(n),publishDragSource:si(n),hover:ni(n),drop:Xr(n),endDrag:ei(n)}}class ui{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function i(l){return(...d)=>{const u=l.apply(e,d);typeof u!="undefined"&&t(u)}}const a=li(this);return Object.keys(a).reduce((l,d)=>{const u=a[d];return l[d]=i(u),l},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const i=this.store.getState().refCount>0;this.backend&&(i&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!i&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function di(n,e){return{x:n.x+e.x,y:n.y+e.y}}function rn(n,e){return{x:n.x-e.x,y:n.y-e.y}}function ci(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:i}=n;return!e||!t||!i?null:rn(di(e,i),t)}function fi(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:rn(e,t)}const be=[],ut=[];be.__IS_NONE__=!0;ut.__IS_ALL__=!0;function gi(n,e){return n===be?!1:n===ut||typeof e=="undefined"?!0:Ur(e,n).length>0}class hi{subscribeToStateChange(e,t={}){const{handlerIds:i}=t;P(typeof e=="function","listener must be a function."),P(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const l=()=>{const d=this.store.getState(),u=d.stateId;try{u===a||u===a+1&&!gi(d.dirtyHandlerIds,i)||e()}finally{a=u}};return this.store.subscribe(l)}subscribeToOffsetChange(e){P(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const i=()=>{const a=this.store.getState().dragOffset;a!==t&&(t=a,e())};return this.store.subscribe(i)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return P(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(P(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();return Je(i,a)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(P(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const i=this.registry.getSourceType(e),a=this.getItemType();return i!==a?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:i}=t;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),l=this.getItemType();if(l&&!Je(a,l))return!1;const d=this.getTargetIds();if(!d.length)return!1;const u=d.indexOf(e);return i?u===d.length-1:u>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return ci(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return fi(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const Et=typeof global!="undefined"?global:self,an=Et.MutationObserver||Et.WebKitMutationObserver;function on(n){return function(){const t=setTimeout(a,0),i=setInterval(a,50);function a(){clearTimeout(t),clearInterval(i),n()}}}function pi(n){let e=1;const t=new an(n),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const mi=typeof an=="function"?pi:on;class vi{enqueueTask(e){const{queue:t,requestFlush:i}=this;t.length||(i(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let i=0,a=e.length-this.index;i<a;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=mi(this.flush),this.requestErrorThrow=on(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class bi{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class yi{create(e){const t=this.freeTasks,i=t.length?t.pop():new bi(this.onError,a=>t[t.length]=a);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const sn=new vi,_i=new yi(sn.registerPendingError);function Si(n){sn.enqueueTask(_i.create(n))}const dt="dnd-core/ADD_SOURCE",ct="dnd-core/ADD_TARGET",ft="dnd-core/REMOVE_SOURCE",Re="dnd-core/REMOVE_TARGET";function wi(n){return{type:dt,payload:{sourceId:n}}}function Di(n){return{type:ct,payload:{targetId:n}}}function Ti(n){return{type:ft,payload:{sourceId:n}}}function Ci(n){return{type:Re,payload:{targetId:n}}}function Oi(n){P(typeof n.canDrag=="function","Expected canDrag to be a function."),P(typeof n.beginDrag=="function","Expected beginDrag to be a function."),P(typeof n.endDrag=="function","Expected endDrag to be a function.")}function xi(n){P(typeof n.canDrop=="function","Expected canDrop to be a function."),P(typeof n.hover=="function","Expected hover to be a function."),P(typeof n.drop=="function","Expected beginDrag to be a function.")}function Qe(n,e){if(e&&Array.isArray(n)){n.forEach(t=>Qe(t,!1));return}P(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var te;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(te||(te={}));let Ei=0;function Ii(){return Ei++}function Mi(n){const e=Ii().toString();switch(n){case te.SOURCE:return`S${e}`;case te.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function It(n){switch(n[0]){case"S":return te.SOURCE;case"T":return te.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Mt(n,e){const t=n.entries();let i=!1;do{const{done:a,value:[,l]}=t.next();if(l===e)return!0;i=!!a}while(!i);return!1}class Ni{addSource(e,t){Qe(e),Oi(t);const i=this.addHandler(te.SOURCE,e,t);return this.store.dispatch(wi(i)),i}addTarget(e,t){Qe(e,!0),xi(t);const i=this.addHandler(te.TARGET,e,t);return this.store.dispatch(Di(i)),i}containsHandler(e){return Mt(this.dragSources,e)||Mt(this.dropTargets,e)}getSource(e,t=!1){return P(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return P(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return P(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return P(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return It(e)===te.SOURCE}isTargetId(e){return It(e)===te.TARGET}removeSource(e){P(this.getSource(e),"Expected an existing source."),this.store.dispatch(Ti(e)),Si(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){P(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Ci(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);P(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){P(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,i){const a=Mi(e);return this.types.set(a,t),e===te.SOURCE?this.dragSources.set(a,i):e===te.TARGET&&this.dropTargets.set(a,i),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Pi=(n,e)=>n===e;function ki(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function Ri(n,e,t=Pi){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!t(n[i],e[i]))return!1;return!0}function $i(n=be,e){switch(e.type){case Ne:break;case dt:case ct:case Re:case ft:return be;case Me:case lt:case ke:case Pe:default:return ut}const{targetIds:t=[],prevTargetIds:i=[]}=e.payload,a=jr(t,i);if(!(a.length>0||!Ri(t,i)))return be;const d=i[i.length-1],u=t[t.length-1];return d!==u&&(d&&a.push(d),u&&a.push(u)),a}function Li(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Li(n,a,t[a])})}return n}const Nt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Ai(n=Nt,e){const{payload:t}=e;switch(e.type){case st:case Me:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case Ne:return ki(n.clientOffset,t.clientOffset)?n:zi({},n,{clientOffset:t.clientOffset});case ke:case Pe:return Nt;default:return n}}function ji(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function he(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){ji(n,a,t[a])})}return n}const Ui={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Hi(n=Ui,e){const{payload:t}=e;switch(e.type){case Me:return he({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case lt:return he({},n,{isSourcePublic:!0});case Ne:return he({},n,{targetIds:t.targetIds});case Re:return n.targetIds.indexOf(t.targetId)===-1?n:he({},n,{targetIds:Ar(n.targetIds,t.targetId)});case Pe:return he({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case ke:return he({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function Fi(n=0,e){switch(e.type){case dt:case ct:return n+1;case ft:case Re:return n-1;default:return n}}function qi(n=0){return n+1}function Bi(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Bi(n,a,t[a])})}return n}function Vi(n={},e){return{dirtyHandlerIds:$i(n.dirtyHandlerIds,{type:e.type,payload:Wi({},e.payload,{prevTargetIds:zr(n,"dragOperation.targetIds",[])})}),dragOffset:Ai(n.dragOffset,e),refCount:Fi(n.refCount,e),dragOperation:Hi(n.dragOperation,e),stateId:qi(n.stateId)}}function Gi(n,e=void 0,t={},i=!1){const a=Yi(i),l=new hi(a,new Ni(a)),d=new ui(a,l),u=n(d,e,t);return d.receiveBackend(u),d}function Yi(n){const e=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return tn(Vi,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Pt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Xi(n){if(Array.isArray(n))return n}function Ki(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],a=!0,l=!1,d,u;try{for(t=t.call(n);!(a=(d=t.next()).done)&&(i.push(d.value),!(e&&i.length===e));a=!0);}catch(c){l=!0,u=c}finally{try{!a&&t.return!=null&&t.return()}finally{if(l)throw u}}return i}}function Ji(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qi(n,e){return Xi(n)||Ki(n,e)||Zi(n,e)||Ji()}function Zi(n,e){if(n){if(typeof n=="string")return Pt(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pt(n,e)}}var kt=0,De=Symbol.for("__VUE_DND_CONTEXT_INSTANCE__");function ea(n){return"manager"in n&&n.manager}function ta(n){if(ea(n)){var e=n.manager;return[e,!1]}var t=na(n.backend,n.context,n.options,n.debugMode),i=!n.context;return[t,i]}function na(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln(),t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=e;return a[De]||(a[De]=Gi(n,e,t,i)),a[De]}function ln(){return typeof globalThis!="undefined"?globalThis:typeof global!="undefined"?global:window}const ra=X({name:"DndProvider",props:{manager:{type:Object},backend:{type:Function},context:{type:Object},options:{type:Object},debugMode:{type:Boolean}},setup:function(e,t){var i=t.slots,a=Qi(ta(e),2),l=a[0],d=a[1];d&&++kt,Dn(function(){if(d){var c=ln();--kt===0&&(c[De]=null)}}),Rr(l);var u;return function(){var c;return(u=(c=i.default)===null||c===void 0?void 0:c.call(i))!==null&&u!==void 0?u:null}}});function ia(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Be=!1,We=!1,aa=function(){function n(t){ia(this,n),this.sourceId=null,this.internalMonitor=t.getMonitor()}var e=n.prototype;return e.receiveHandlerId=function(i){this.sourceId=i},e.getHandlerId=function(){return this.sourceId},e.canDrag=function(){P(!Be,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Be=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Be=!1}},e.isDragging=function(){if(!this.sourceId)return!1;P(!We,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return We=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{We=!1}},e.subscribeToStateChange=function(i,a){return this.internalMonitor.subscribeToStateChange(i,a)},e.isDraggingSource=function(i){return this.internalMonitor.isDraggingSource(i)},e.isOverTarget=function(i,a){return this.internalMonitor.isOverTarget(i,a)},e.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.getSourceId=function(){return this.internalMonitor.getSourceId()},e.subscribeToOffsetChange=function(i){return this.internalMonitor.subscribeToOffsetChange(i)},e.canDragSource=function(i){return this.internalMonitor.canDragSource(i)},e.canDropOnTarget=function(i){return this.internalMonitor.canDropOnTarget(i)},e.getItemType=function(){return this.internalMonitor.getItemType()},e.getItem=function(){return this.internalMonitor.getItem()},e.getDropResult=function(){return this.internalMonitor.getDropResult()},e.didDrop=function(){return this.internalMonitor.didDrop()},e.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},n}();function oa(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Ve=!1,sa=function(){function n(t){oa(this,n),this.targetId=null,this.internalMonitor=t.getMonitor()}var e=n.prototype;return e.receiveHandlerId=function(i){this.targetId=i},e.getHandlerId=function(){return this.targetId},e.subscribeToStateChange=function(i,a){return this.internalMonitor.subscribeToStateChange(i,a)},e.canDrop=function(){if(!this.targetId)return!1;P(!Ve,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ve=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ve=!1}},e.isOver=function(i){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,i):!1},e.getItemType=function(){return this.internalMonitor.getItemType()},e.getItem=function(){return this.internalMonitor.getItem()},e.getDropResult=function(){return this.internalMonitor.getDropResult()},e.didDrop=function(){return this.internalMonitor.didDrop()},e.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},n}(),la=function(n){"@swc/helpers - typeof";return n&&typeof Symbol!="undefined"&&n.constructor===Symbol?"symbol":typeof n};function ua(n){return n?n.__v_isVNode===!0:!1}function da(n){return n?n.__v_skip:!1}function ca(n){return ua(n)&&la(n.type)!=="symbol"}function fa(){throw new Error("Only native element nodes can now be passed to Vue DnD connectors.You can either wrap Component into a <div>, or turn it into a drag source or a drop target itself.")}function ga(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(da(e)&&fa(),!ca(e)){var i=e;return n(i,t),i}}}function un(n){var e={};return Object.keys(n).forEach(function(t){var i=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{var a=ga(i);e[t]=function(){return a}}}),e}function Ze(n,e,t,i){let a=t?t.call(i,n,e):void 0;if(a!==void 0)return!!a;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const l=Object.keys(n),d=Object.keys(e);if(l.length!==d.length)return!1;const u=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<l.length;c++){const f=l[c];if(!u(f))return!1;const p=n[f],h=e[f];if(a=t?t.call(i,p,h,f):void 0,a===!1||a===void 0&&p!==h)return!1}return!0}function ha(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function pa(n,e,t){return e&&Rt(n.prototype,e),t&&Rt(n,t),n}var ma=function(){function n(t){var i=this;ha(this,n),this.hooks=un({dragSource:function(a,l){i.clearDragSource(),i.dragSourceOptions=l||null,i.dragSourceNode=a,i.reconnectDragSource()},dragPreview:function(a,l){i.clearDragPreview(),i.dragPreviewOptions=l||null,i.dragPreviewNode=a,i.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceOptionsInternal=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var e=n.prototype;return e.receiveHandlerId=function(i){this.handlerId!==i&&(this.handlerId=i,this.reconnect())},e.reconnect=function(){var i=this.reconnectDragSource();this.reconnectDragPreview(i)},e.reconnectDragSource=function(){var i=this.dragSource,a=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return a&&this.disconnectDragSource(),this.handlerId?i?(a&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=i,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,i,this.dragSourceOptions)),a):(this.lastConnectedDragSource=i,a):a},e.reconnectDragPreview=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.dragPreview,l=i||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(l&&this.disconnectDragPreview(),!!this.handlerId){if(!a){this.lastConnectedDragPreview=a;return}l&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=a,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,a,this.dragPreviewOptions))}},e.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.didDragSourceOptionsChange=function(){return!Ze(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.didDragPreviewOptionsChange=function(){return!Ze(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)},e.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null)},e.clearDragSource=function(){this.dragSourceNode=null},e.clearDragPreview=function(){this.dragPreviewNode=null},pa(n,[{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(i){this.dragSourceOptionsInternal=i}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(i){this.dragPreviewOptionsInternal=i}},{key:"dragSource",get:function(){return this.dragSourceNode}},{key:"dragPreview",get:function(){return this.dragPreviewNode}}]),n}();function va(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ba(n,e,t){return e&&$t(n.prototype,e),t&&$t(n,t),n}var ya=function(){function n(t){var i=this;va(this,n),this.hooks=un({dropTarget:function(a,l){i.clearDropTarget(),i.dropTargetOptions=l,Tn(a)?i.dropTargetRef=a:i.dropTargetNode=a,i.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var e=n.prototype;return e.reconnect=function(){var i=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();i&&this.disconnectDropTarget();var a=this.dropTarget;if(this.handlerId){if(!a){this.lastConnectedDropTarget=a;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=a,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,a,this.dropTargetOptions))}},e.receiveHandlerId=function(i){i!==this.handlerId&&(this.handlerId=i,this.reconnect())},e.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.didOptionsChange=function(){return!Ze(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},e.clearDropTarget=function(){this.dropTargetRef=null,this.dropTargetNode=null},ba(n,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(i){this.dropTargetOptionsInternal=i}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.value}}]),n}();function _a(n,e,t){var i=r(t).getRegistry(),a=i.addTarget(r(n),r(e));return[a,function(){return i.removeTarget(a)}]}function Sa(n,e,t){var i=t.getRegistry(),a=i.addSource(n,e);return[a,function(){return i.removeSource(a)}]}function wa(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Da=function(){function n(t,i,a){wa(this,n),this.spec=t,this.monitor=i,this.connector=a}var e=n.prototype;return e.beginDrag=function(){var i=this.spec,a=this.monitor,l=null;return typeof i.item=="object"?l=i.item:typeof i.item=="function"?l=i.item(a):l={},l!=null?l:null},e.canDrag=function(){var i=this.spec,a=this.monitor;return typeof i.canDrag=="boolean"?i.canDrag:typeof i.canDrag=="function"?i.canDrag(a):!0},e.isDragging=function(i,a){var l=this.spec,d=this.monitor,u=l.isDragging;return u?u(d):a===i.getSourceId()},e.endDrag=function(){var i=this.spec,a=this.monitor,l=this.connector,d=i.end;d&&d(a.getItem(),a),l.reconnect()},n}();function Ta(n,e,t){var i=z(function(){return new Da(r(n),r(e),r(t))});return oe(function(){i.value.spec=r(n)}),i}function pe(){var n=$r();return P(n!=null,"Expected drag drop context"),n}function Ca(n){return z(function(){var e=r(n).type;return P(e!=null,"spec.type must be defined"),e})}function Lt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Oa(n){if(Array.isArray(n))return n}function xa(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],a=!0,l=!1,d,u;try{for(t=t.call(n);!(a=(d=t.next()).done)&&(i.push(d.value),!(e&&i.length===e));a=!0);}catch(c){l=!0,u=c}finally{try{!a&&t.return!=null&&t.return()}finally{if(l)throw u}}return i}}function Ea(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ia(n,e){return Oa(n)||xa(n,e)||Ma(n,e)||Ea()}function Ma(n,e){if(n){if(typeof n=="string")return Lt(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lt(n,e)}}function Na(n,e,t){var i=pe(),a=Ta(n,e,t),l=Ca(n);oe(function(u){if(r(l)!=null){var c=Ia(Sa(r(l),r(a),r(i)),2),f=c[0],p=c[1];r(e).receiveHandlerId(f),r(t).receiveHandlerId(f),u(p)}})}function dn(n){return z(function(){return typeof n=="function"?n():n})}function Pa(){var n=pe();return z(function(){return new aa(r(n))})}function ka(n,e){var t=pe(),i=z(function(){return new ma(r(t).getBackend())});return oe(function(a){i.value.dragSourceOptions=r(n)||null,r(i).reconnect(),a(function(){i.value.disconnectDragSource()})}),oe(function(a){i.value.dragPreviewOptions=r(e)||null,r(i).reconnect(),a(function(){i.value.disconnectDragPreview()})}),i}var Ra=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,a,l;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(a=i;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),i=l.length,i!==Object.keys(t).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[a]))return!1;for(a=i;a--!==0;){var d=l[a];if(!n(e[d],t[d]))return!1}return!0}return e!==e&&t!==t};const cn=Cn(Ra);function $a(n,e,t){var i=k(r(e)(r(n))),a=function(){var l=r(e)(r(n));cn(i.value,l)||(i.value=l,t&&t())};return oe(a),[i,a]}function zt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function La(n){if(Array.isArray(n))return n}function za(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],a=!0,l=!1,d,u;try{for(t=t.call(n);!(a=(d=t.next()).done)&&(i.push(d.value),!(e&&i.length===e));a=!0);}catch(c){l=!0,u=c}finally{try{!a&&t.return!=null&&t.return()}finally{if(l)throw u}}return i}}function Aa(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ja(n,e){return La(n)||za(n,e)||Ua(n,e)||Aa()}function Ua(n,e){if(n){if(typeof n=="string")return zt(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zt(n,e)}}function Ha(n,e,t){var i=ja($a(n,e,t),2),a=i[0],l=i[1];return oe(function(u){var c=r(n).getHandlerId();c!=null&&u(r(n).subscribeToStateChange(l,{handlerIds:[c]}))}),a}function fn(n,e,t){var i=function(){return{}};return Ha(e,n||i,function(){return r(t).reconnect()})}function gt(n,e){var t=On({el:null,options:r(e)});oe(function(){n(t)},{flush:"post"});var i=function(a,l){Tt(t,"el",a);var d=r(e)||l;return cn(t.options,d)||Tt(t,"options",d),r(a)};return i}function Fa(n,e){return gt(function(t){r(n).hooks.dragSource()(t.el,t.options)},z(function(){return r(e).options}))}function qa(n,e){return gt(function(t){r(n).hooks.dragPreview()(t.el,t.options)},z(function(){return r(e).previewOptions}))}function Ba(n){var e=dn(n),t=Pa(),i=ka(z(function(){return r(e).options}),z(function(){return r(e).previewOptions}));return Na(e,t,i),[fn(z(function(){return r(e).collect||function(){return{}}}),t,i),Fa(i,e),qa(i,e)]}function Wa(n){return z(function(){var e=r(n).accept;return P(e!=null,"accept must be defined"),Array.isArray(e)?e:[e]})}function Va(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Ga=function(){function n(t,i){Va(this,n),this.spec=t,this.monitor=i}var e=n.prototype;return e.canDrop=function(){var i=this.spec,a=this.monitor;return i.canDrop?i.canDrop(a.getItem(),a):!0},e.hover=function(){var i=this.spec,a=this.monitor;i.hover&&i.hover(a.getItem(),a)},e.drop=function(){var i=this.spec,a=this.monitor;if(i.drop)return i.drop(a.getItem(),a)},n}();function Ya(n,e){var t=z(function(){return new Ga(r(n),r(e))});return oe(function(){t.value.spec=r(n)}),t}function At(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Xa(n){if(Array.isArray(n))return n}function Ka(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],a=!0,l=!1,d,u;try{for(t=t.call(n);!(a=(d=t.next()).done)&&(i.push(d.value),!(e&&i.length===e));a=!0);}catch(c){l=!0,u=c}finally{try{!a&&t.return!=null&&t.return()}finally{if(l)throw u}}return i}}function Ja(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qa(n,e){return Xa(n)||Ka(n,e)||Za(n,e)||Ja()}function Za(n,e){if(n){if(typeof n=="string")return At(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return At(n,e)}}function eo(n,e,t){var i=pe(),a=Ya(n,e),l=Wa(n);oe(function(u){var c=Qa(_a(l,a,i),2),f=c[0],p=c[1];r(e).receiveHandlerId(f),r(t).receiveHandlerId(f),u(p)})}function to(){var n=pe();return z(function(){return new sa(r(n))})}function no(n){var e=pe(),t=z(function(){return new ya(r(e).getBackend())});return oe(function(i){t.value.dropTargetOptions=r(n)||null,t.value.reconnect(),i(function(){return t.value.disconnectDropTarget()})}),t}function ro(n,e){return gt(function(t){r(n).hooks.dropTarget()(t.el,t.options)},z(function(){return r(e).options}))}function gn(n){var e=dn(n),t=to(),i=no(z(function(){return r(e).options}));return eo(e,t,i),[fn(z(function(){return r(e).collect||function(){return{}}}),t,i),ro(i,e)]}const io=X({__name:"TabCommon",setup(n){const e=re(),t=e.userCustom,i=[{value:"top",label:"放在顶部"},{value:"center",label:"放在中间"},{value:"bottom",label:"放在底部"}],a=[{value:"mjj",label:"mjj"},{value:"imgbb",label:"imgbb"},{value:"freeimage",label:"freeimage"}],l={id:0,created_at:"2021-04-28 00:44:23",is_deleted:0,thread_id:0,battle_id:null,hongbao_id:null,floor:0,random_head:1,created_by_admin:0,content:"<span class='quote-content'>这是引用内容 <br>@№0 = = 2021-04-28 00:44:23</span><br>这是预览模式，可以确认上面设定的式样是否满意。<br>这是第二行。<br>这是第三行。",nickname:"= =",is_your_post:!0,hongbao_data:null},d=[{id:0,sub_id:0,forum_id:1,vote_question_id:null,gamble_question_id:null,crowd_id:null,hongbao_id:null,nickname:"= =",title:"这是预览模式，可以确认上面设定的式样是否满意。",sub_title:"[预览]",random_heads_group:1,posts_num:100,title_color:null,anti_jingfen:!1,nissin_date:null,has_nissined:!1,can_battle:!1,is_delay:!1,locked_by_coin:0,is_private:!1,created_at:null,updated_at:null}];return(u,c)=>(S(),$(r(x),{vertical:"",size:"small"},{default:o(()=>[s(r(V),{title:"一般设定",size:"small"},{"header-extra":o(()=>[s(r(L),{onClick:r(e).userCustomReset},{default:o(()=>[g("恢复默认")]),_:1},8,["onClick"])]),default:o(()=>[s(r(xe),{ref:"formRef",model:r(t),"label-placement":"left","label-width":"auto",size:r(e).isMobile?"small":"medium",style:{"max-height":"655px","overflow-y":"auto"}},{default:o(()=>[s(r(_),{depth:3},{default:o(()=>[g("这些设定保存在本设备，不跟随饼干")]),_:1}),s(r(Te),{cols:"1 600:2","x-gap":12},{default:o(()=>[s(r(de),{style:{"max-width":"280px"}},{default:o(()=>[s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem"}},{default:o(()=>[g("功能选项 ")]),_:1})]),_:1}),s(r(U),{label:"图床选择",path:"loudspeakerPosition"},{default:o(()=>[s(r(Ye),{value:r(t).imgHost,"onUpdate:value":c[0]||(c[0]=f=>r(t).imgHost=f),options:a,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),s(r(U),{label:"自动涮锅时遇红包停止",path:"hongbaoThenStop"},{default:o(()=>[s(r(ee),{value:r(t).hongbaoThenStop,"onUpdate:value":c[1]||(c[1]=f=>r(t).hongbaoThenStop=f)},null,8,["value"])]),_:1}),s(r(U),{label:"自动涮锅时页面不动",path:"holdPageWhenListening"},{default:o(()=>[s(r(ee),{value:r(t).holdPageWhenListening,"onUpdate:value":c[2]||(c[2]=f=>r(t).holdPageWhenListening=f)},null,8,["value"])]),_:1}),s(r(U),{label:"减少弹出提示",path:"lessToast"},{default:o(()=>[s(r(ee),{value:r(t).lessToast,"onUpdate:value":c[3]||(c[3]=f=>r(t).lessToast=f)},null,8,["value"])]),_:1})]),_:1}),s(r(de),{style:{"max-width":"280px"}},{default:o(()=>[s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem"}},{default:o(()=>[g("基本外观 ")]),_:1})]),_:1}),s(r(U),{label:"传统式回复框",path:"postLegacyMode"},{default:o(()=>[s(r(ee),{value:r(t).postLegacyMode,"onUpdate:value":c[4]||(c[4]=f=>r(t).postLegacyMode=f)},null,8,["value"])]),_:1}),s(r(U),{label:"大喇叭和标题单色",path:"monochromeMode"},{default:o(()=>[s(r(ee),{value:r(t).monochromeMode,"onUpdate:value":c[5]||(c[5]=f=>r(t).monochromeMode=f)},null,8,["value"])]),_:1}),s(r(U),{label:"侧边栏放左边",path:"sidebarLeft"},{default:o(()=>[s(r(ee),{value:r(t).sidebarLeft,"onUpdate:value":c[6]||(c[6]=f=>r(t).sidebarLeft=f)},null,8,["value"])]),_:1}),s(r(U),{label:"大喇叭位置",path:"loudspeakerPosition"},{default:o(()=>[s(r(Ye),{value:r(t).loudspeakerPosition,"onUpdate:value":c[7]||(c[7]=f=>r(t).loudspeakerPosition=f),options:i,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),s(r(U),{label:"最大引用层数",path:"quoteMax"},{default:o(()=>[s(r(K),{value:r(t).quoteMax,"onUpdate:value":c[8]||(c[8]=f=>r(t).quoteMax=f),max:6,min:1,step:1},{suffix:o(()=>[g(" 层 ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"回复行数限高",path:"foldMaxLine"},{default:o(()=>[s(r(K),{value:r(t).foldMaxLine,"onUpdate:value":c[9]||(c[9]=f=>r(t).foldMaxLine=f),max:99,min:6,step:1},{suffix:o(()=>[g(" 行 ")]),_:1},8,["value"])]),_:1})]),_:1}),s(r(de),{style:{"max-width":"280px"}},{default:o(()=>[s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem"}},{default:o(()=>[g("字体大小 ")]),_:1})]),_:1}),s(r(U),{label:"回复内容",path:"fontSizePost"},{default:o(()=>[s(r(K),{value:r(t).fontSizePost,"onUpdate:value":c[10]||(c[10]=f=>r(t).fontSizePost=f),max:24,min:10,step:.5},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"引用内容",path:"fontSizeQuote"},{default:o(()=>[s(r(K),{value:r(t).fontSizeQuote,"onUpdate:value":c[11]||(c[11]=f=>r(t).fontSizeQuote=f),max:24,min:10,step:.5},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"回复脚注",path:"fontSizeFooter"},{default:o(()=>[s(r(K),{value:r(t).fontSizeFooter,"onUpdate:value":c[12]||(c[12]=f=>r(t).fontSizeFooter=f),max:22,min:8,step:.5},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"主题列表",path:"fontSizeThreadList"},{default:o(()=>[s(r(K),{value:r(t).fontSizeThreadList,"onUpdate:value":c[13]||(c[13]=f=>r(t).fontSizeThreadList=f),max:24,min:10,step:.5},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"主题列表脚注",path:"fontSizeThreadListFooter"},{default:o(()=>[s(r(K),{value:r(t).fontSizeThreadListFooter,"onUpdate:value":c[14]||(c[14]=f=>r(t).fontSizeThreadListFooter=f),max:22,min:8,step:.5},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"输入框",path:"fontSizeInput"},{default:o(()=>[s(r(K),{value:r(t).fontSizeInput,"onUpdate:value":c[15]||(c[15]=f=>r(t).fontSizeInput=f),max:24,min:10,step:.5},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1})]),_:1}),s(r(de),{style:{"max-width":"280px"}},{default:o(()=>[s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem"}},{default:o(()=>[g("间距相关 ")]),_:1})]),_:1}),s(r(U),{label:"回复内容行距",path:"lineHeightPost"},{default:o(()=>[s(r(K),{value:r(t).lineHeightPost,"onUpdate:value":c[16]||(c[16]=f=>r(t).lineHeightPost=f),max:40,min:16,step:2},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"回复内容上下间距",path:"postInnerMargin"},{default:o(()=>[s(r(K),{value:r(t).postInnerMargin,"onUpdate:value":c[17]||(c[17]=f=>r(t).postInnerMargin=f),max:30,min:0,step:1},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"回复卡片四周空白",path:"postCardPadding"},{default:o(()=>[s(r(K),{value:r(t).postCardPadding,"onUpdate:value":c[18]||(c[18]=f=>r(t).postCardPadding=f),max:20,min:4,step:1},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"主题内容上下间距",path:"threadListInnerMargin"},{default:o(()=>[s(r(K),{value:r(t).threadListInnerMargin,"onUpdate:value":c[19]||(c[19]=f=>r(t).threadListInnerMargin=f),max:30,min:0,step:1},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1}),s(r(U),{label:"主题卡片四周空白",path:"threadListCardPadding"},{default:o(()=>[s(r(K),{value:r(t).threadListCardPadding,"onUpdate:value":c[20]||(c[20]=f=>r(t).threadListCardPadding=f),max:20,min:4,step:1},{suffix:o(()=>[g(" px ")]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","size"])]),_:1}),s(r(le),{style:{"margin-top":"2px","margin-bottom":"2px"}}),s(Zn,{"post-data":l,"forum-id":0,"preview-mode":!0}),s(r(le),{style:{"margin-top":"2px","margin-bottom":"2px"}}),s(Qn,{"threads-list-data":d,"show-this":!0})]),_:1}))}}),ao={class:"bank-item"},oo={style:{"margin-left":"auto"}},so={style:{"margin-left":"auto"}},lo=b("div",null,[g(" 存粮没有利息、提前开仓扣12% "),b("br"),g(" （那有什么用啊！） ")],-1),Se=10,uo=X({__name:"TabBank",setup(n){Ee(A=>({"5b6a5f8a":r(i).dividerColor}));const e=ie(),t=re();ot(),et(),tt();const i=Ie(),a=k(!1),l=k(),d=k(1e4),u=k(ge().add(2,"day").format("YYYY-MM-DD 00:00:00")),c=k({pageSize:Se}),f=[{title:"存入时间",key:"created_at",resizable:!0},{title:"存粮",key:"olo",resizable:!0},{title:"标签",key:"description",resizable:!0},{title:"到期时间",key:"expire_date",resizable:!0},{title:"操作",key:"controller",render:C,resizable:!0}],p=k(1),h=z(()=>(p.value-1)*Se);function v(A){return ge().isAfter(A)||ge().add(1,"year").isBefore(ge(A))}const m=z(()=>D.value.map(A=>A.olo).reduce((A,j)=>A+j,0));function C(A,j){return rt(L,{onClick:()=>N(A.id,A.isExpired),size:"tiny",type:A.isExpired?"success":"warning",innerHTML:A.isExpired?"到期开仓":"提前开仓"})}const{loading:w,data:y,send:E}=Q(A=>zn(A),{immediate:!1,initialData:[]});e.binggan!==null&&E({binggan:e.binggan});const D=z(()=>y.value.map(A=>ye(ue({},A),{isExpired:ge().isAfter(A.expire_date)}))),{loading:M,send:O,onSuccess:I}=Q(A=>An(A),{immediate:!1});I(()=>{e.refreshUserData(),E({binggan:e.binggan}),a.value=!1});function T(){if(d.value===null){window.$message.error("请输入要存入的olo");return}const A={title:"存入粮仓",closable:!1,content:"要往粮仓存入olo吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{const j={binggan:e.binggan,olo:d.value,description:l.value,expire_date:u.value};O(j)}};window.$dialog.success(A)}function N(A,j){function H(){const se={binggan:e.binggan,deposit_id:A,confirm_penalty:!j};jn(se).then(()=>{e.refreshUserData(),E({binggan:e.binggan})})}if(j){const se={title:"取出到期的存粮",closable:!1,content:"要取出存粮吗？因为已经到期，不收取手续费。",positiveText:"确定",negativeText:"取消",onPositiveClick:H};window.$dialog.success(se)}else{const se={title:"提前取出存粮",closable:!1,content:"确定要提前取出存粮吗？将会扣除12%的奥利奥喔",positiveText:"确定",negativeText:"取消",onPositiveClick:H};window.$dialog.warning(se)}}return(A,j)=>(S(),$(r(x),{align:"center"},{default:o(()=>[s(r(L),{type:"primary",onClick:j[0]||(j[0]=H=>a.value=!0)},{default:o(()=>[g("我要存粮")]),_:1}),s(r(V),{title:"我的粮仓",size:"small"},Ut({default:o(()=>[r(t).isMobile?G("",!0):(S(),$(r(nt),{key:0,columns:f,data:D.value,pagination:c.value,loading:r(w),bordered:!1},null,8,["data","pagination","loading"])),r(t).isMobile?(S(),B(Y,{key:1},[D.value.length>0?(S(),$(r(x),{key:0,vertical:"",align:"start",size:"small"},{default:o(()=>[(S(!0),B(Y,null,ne(D.value.slice(h.value,h.value+Se),H=>(S(),B("div",ao,[H.description?(S(),$(r(x),{key:0,style:{"margin-bottom":"6px"}},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("存粮标签：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(H.description),1)]),_:2},1024)])]),_:2},1024)):G("",!0),s(r(x),{style:{"margin-bottom":"6px"}},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("存入时间：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(H.created_at),1)]),_:2},1024)]),b("div",oo,[s(r(_),{depth:3},{default:o(()=>[g("存粮：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(H.olo),1)]),_:2},1024)])]),_:2},1024),s(r(x),{style:{"margin-bottom":"6px"}},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("到期时间：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(H.expire_date),1)]),_:2},1024)]),b("div",so,[H.isExpired?G("",!0):(S(),$(r(L),{key:0,size:"tiny",type:"warning",onClick:se=>N(H.id,H.isExpired)},{default:o(()=>[g("提前开仓")]),_:2},1032,["onClick"])),H.isExpired?(S(),$(r(L),{key:1,size:"tiny",type:"success",onClick:se=>N(H.id,H.isExpired)},{default:o(()=>[g("到期开仓")]),_:2},1032,["onClick"])):G("",!0)])]),_:2},1024)]))),256)),s(r(Ht),{page:p.value,"onUpdate:page":j[1]||(j[1]=H=>p.value=H),"item-count":D.value.length,"page-size":Se,size:"small",style:{"margin-left":"auto"}},null,8,["page","item-count"])]),_:1})):(S(),$(r(Ft),{key:1}))],64)):G("",!0)]),_:2},[D.value.length>0?{name:"header-extra",fn:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("粮仓总计：")]),_:1}),b("span",null,q(m.value),1)])]),key:"0"}:void 0]),1024),s(r(ce),{show:a.value,"onUpdate:show":j[7]||(j[7]=H=>a.value=H),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),title:"存粮",closable:"",onClose:j[6]||(j[6]=H=>a.value=!1),size:"small"},{action:o(()=>[s(r(x),{justify:"end"},{default:o(()=>[s(r(L),{type:"primary",loading:r(M),disabled:r(M),onClick:T},{default:o(()=>[g("提交")]),_:1},8,["loading","disabled"]),s(r(L),{onClick:j[5]||(j[5]=H=>a.value=!1)},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[s(r(x),{vertical:""},{default:o(()=>[lo,s(r(Le),null,{default:o(()=>[s(r(je),{style:{width:"5.2rem"}},{default:o(()=>[g("存粮标签")]),_:1}),s(r(ae),{value:l.value,"onUpdate:value":j[2]||(j[2]=H=>l.value=H),placeholder:"可选"},null,8,["value"])]),_:1}),s(r(Le),null,{default:o(()=>[s(r(je),{style:{width:"5.2rem"}},{default:o(()=>[g("olo总额")]),_:1}),s(r(K),{value:d.value,"onUpdate:value":j[3]||(j[3]=H=>d.value=H),max:1e6,min:10,step:1e4,parse:r(er),format:r(tr)},null,8,["value","parse","format"])]),_:1}),s(r(Le),null,{default:o(()=>[s(r(je),{style:{width:"5.2rem"}},{default:o(()=>[g("到期日期")]),_:1}),s(r(qt),{"formatted-value":u.value,"onUpdate:formattedValue":j[4]||(j[4]=H=>u.value=H),"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","is-date-disabled":v},null,8,["formatted-value"])]),_:1}),s(r(_),{depth:3},{default:o(()=>[g("存粮时间最短1天，最长1年")]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["show"])]),_:1}))}});function ht(n){if(!navigator.clipboard){var e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);return}navigator.clipboard.writeText(n)}const co={key:0},fo=b("span",{style:{"margin-left":"6px"}},"暂停使用后，大乱斗时不显示选项",-1),go=["src"],ho=b("h4",null,"骰子语句：",-1),po=b("p",null,"1~10指投出1~10点时候的语句，如此类推。",-1),mo=b("h4",null,"替换词会被自动替换为相应内容：",-1),vo=b("p",null,[g("%rand_num —— 骰子数字（必须有） "),b("br"),g(" %name —— 本角色名字 "),b("br"),g(" %opponent —— 对手名字")],-1),bo=b("span",null,"将代码填入下述框就可以导入角色数据",-1),yo=b("span",null,"可以将下面代码复制下来分享给别人",-1),_o=X({__name:"TabChara",setup(n){const e=ie(),t=re(),i=k(null),a=k(!1),l=k(!1),d=k(!1),u=k(),c=z(()=>JSON.stringify(y.value[f.value])),f=k(0),p=z(()=>y.value.map((I,T)=>({value:T,label:I.name}))),h=[{label:"等待",varName:"wait"},{label:"参战",varName:"against"},{label:"攻击",varName:"attack"},{label:"胜利",varName:"win"},{label:"失败",varName:"lose"}],v=ue(ue({name:{required:!0,message:"请输入角色名称",trigger:"blur"}},h.reduce((I,{label:T,varName:N})=>(I[`heads.${N}`]={required:!0,message:"请输入头像地址",trigger:"blur"},I),{})),Array.from({length:10},(I,T)=>T).reduce((I,T)=>(I[`messages.${T}`]={required:!0,validator:(N,A)=>{const j=/%rand_num/;return A===null?new Error("请输入战斗语音"):j.test(A)?!0:new Error("必须包含%rand_num（上面有使用说明）")},trigger:"blur"},I),{}));function m(){if(u.value===void 0){window.$message.error("请输入角色数据");return}try{y.value[f.value]=JSON.parse(u.value)}catch(I){window.$message.error("输入数据的格式有误，请重新尝试");return}window.$message.success("已导入角色数据"),l.value=!1}function C(){ht(c.value),window.$message.success("已复制到剪贴板")}const{loading:w,data:y,send:E}=Q(I=>Un(I),{immediate:!1,initialData:[]});e.binggan!==null&&E({binggan:e.binggan});const{loading:D,send:M}=Q(I=>Hn(I),{immediate:!1});function O(){var I;(I=i.value)==null||I.validate(T=>{if(T)window.$message.error("请确认信息填写完整");else{const N=ue({binggan:e.binggan,chara_id:f.value},y.value[f.value]);M(N)}})}return(I,T)=>(S(),$(r(x),{vertical:""},{default:o(()=>[s(r(V),{title:"我的角色",size:"small"},Ut({default:o(()=>[!r(w)&&r(y).length>0?(S(),B(Y,{key:0},[s(r(x),{size:"small",justify:"end",align:"center"},{default:o(()=>[s(r(L),{onClick:T[1]||(T[1]=N=>l.value=!0)},{default:o(()=>[g("导入角色")]),_:1}),s(r(L),{onClick:T[2]||(T[2]=N=>d.value=!0)},{default:o(()=>[g("导出角色")]),_:1})]),_:1}),s(r(xe),{ref_key:"formRef",ref:i,model:r(y)[f.value],"label-placement":"left","label-width":"auto",rules:v,size:r(t).isMobile?"small":"medium"},{default:o(()=>[s(r(Te),{cols:"1 1000:2","x-gap":12},{default:o(()=>[s(r(de),{style:{"max-width":"500px"}},{default:o(()=>[s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem"}},{default:o(()=>[g(" 角色名 ")]),_:1})]),_:1}),s(r(U),{label:"角色名",path:"name"},{default:o(()=>[s(r(ae),{value:r(y)[f.value].name,"onUpdate:value":T[3]||(T[3]=N=>r(y)[f.value].name=N),placeholder:"你的角色的名称"},null,8,["value"])]),_:1}),s(r(U),{label:"暂停使用",path:"not_use"},{default:o(()=>[s(r(ee),{value:r(y)[f.value].not_use,"onUpdate:value":T[4]||(T[4]=N=>r(y)[f.value].not_use=N)},null,8,["value"]),fo]),_:1}),s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem"}},{default:o(()=>[g(" 头像组 ")]),_:1})]),_:1}),(S(),B(Y,null,ne(h,(N,A)=>s(r(U),{label:N.label,path:`heads.${N.varName}`},{default:o(()=>[s(r(ae),{value:r(y)[f.value].heads[N.varName],"onUpdate:value":j=>r(y)[f.value].heads[N.varName]=j},null,8,["value","onUpdate:value"]),b("img",{src:r(y)[f.value].heads[N.varName],style:{"max-height":"34px"}},null,8,go)]),_:2},1032,["label","path"])),64))]),_:1}),s(r(de),{style:{"max-width":"500px"}},{default:o(()=>[s(r(le),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[s(r(_),{depth:"3",style:{"font-size":"0.875rem",cursor:"pointer"},onClick:T[5]||(T[5]=N=>a.value=!0)},{default:o(()=>[g(" 战斗语音（使用说明？） ")]),_:1})]),_:1}),(S(),B(Y,null,ne(10,N=>s(r(U),{label:`骰子${N*10-9}~${N*10}`,path:`messages.${N-1}`},{default:o(()=>[s(r(ae),{value:r(y)[f.value].messages[N-1],"onUpdate:value":A=>r(y)[f.value].messages[N-1]=A},null,8,["value","onUpdate:value"])]),_:2},1032,["label","path"])),64))]),_:1})]),_:1})]),_:1},8,["model","size"])],64)):G("",!0)]),_:2},[!r(w)&&r(y).length>0?{name:"header-extra",fn:o(()=>[s(r(_),{depth:3,style:{"flex-shrink":"0"}},{default:o(()=>[g(" 选择要编辑的角色 ")]),_:1}),s(r(Ye),{value:f.value,"onUpdate:value":T[0]||(T[0]=N=>f.value=N),options:p.value,"consistent-menu-width":!1},null,8,["value","options"])]),key:"0"}:void 0,!r(w)&&r(y).length===0?{name:"header-extra",fn:o(()=>[s(r(_),{depth:3},{default:o(()=>[g(" 你尚未拥有角色槽位，"),r(t).isMobile?(S(),B("br",co)):G("",!0),g("请在“饼干升级”处购买 ")]),_:1})]),key:"1"}:void 0]),1024),!r(w)&&r(y).length>0?(S(),B(Y,{key:0},[s(r(x),{size:"small",justify:"end",align:"center"},{default:o(()=>[s(r(_),{depth:3},{default:o(()=>[g(" 各个角色要分别点提交喔 ")]),_:1}),s(r(L),{type:"primary",loading:r(D),disabled:r(D),onClick:O},{default:o(()=>[g("提交当前角色")]),_:1},8,["loading","disabled"])]),_:1}),s(r(ce),{show:a.value,"onUpdate:show":T[7]||(T[7]=N=>a.value=N),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),closable:"",onClose:T[6]||(T[6]=N=>a.value=!1),size:"small",title:"战斗语音使用说明"},{default:o(()=>[ho,po,mo,vo]),_:1},8,["style"])]),_:1},8,["show"]),s(r(ce),{show:l.value,"onUpdate:show":T[11]||(T[11]=N=>l.value=N),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),closable:"",onClose:T[10]||(T[10]=N=>l.value=!1),size:"small",title:"导入角色数据"},{action:o(()=>[s(r(x),{justify:"end"},{default:o(()=>[s(r(L),{onClick:m,type:"primary"},{default:o(()=>[g("导入")]),_:1}),s(r(L),{onClick:T[9]||(T[9]=N=>l.value=!1)},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[s(r(x),{vertical:""},{default:o(()=>[bo,s(r(Ce),{value:u.value,"onUpdate:value":T[8]||(T[8]=N=>u.value=N),type:"textarea",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]),s(r(ce),{show:d.value,"onUpdate:show":T[14]||(T[14]=N=>d.value=N),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),closable:"",onClose:T[13]||(T[13]=N=>d.value=!1),size:"small",title:"导出角色数据"},{action:o(()=>[s(r(x),{justify:"end"},{default:o(()=>[s(r(L),{onClick:C},{default:o(()=>[g("复制")]),_:1}),s(r(L),{onClick:T[12]||(T[12]=N=>d.value=!1)},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[s(r(x),{vertical:""},{default:o(()=>[yo,s(r(Ce),{value:c.value,type:"textarea",readonly:"",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1})]),_:1},8,["style"])]),_:1},8,["show"])],64)):G("",!0)]),_:1}))}}),So=b("span",null,"可自由输入名称的定制饼干",-1),wo=b("span",null,"10万 olo",-1),Do=X({__name:"TabCustom",setup(n){const e=ie(),t=re(),i=k(null),a=k({bingganApply:null,password:null,passwordRepeat:null}),l={bingganApply:{required:!0,validator:(p,h)=>{const v=/^[a-zA-Z0-9_]+$/;if(h===null)return new Error("请输入要定制的饼干");if(v.test(h)){if(h.length<7)return new Error("最少需要7个字符");if(h.length>16)return new Error("最多16个字符")}else return new Error("只能是数字、英文、下划线");return!0},trigger:"blur"},password:{required:!0,validator:(p,h)=>{const v=/^[a-zA-Z0-9_]+$/;if(h===null)return new Error("请输入密码");if(v.test(h)){if(h.length<7)return new Error("最少需要7个字符");if(h.length>20)return new Error("最多20个字符")}else return new Error("只能是数字、英文、下划线");return!0},trigger:"blur"},passwordRepeat:{required:!0,validator:(p,h)=>h===a.value.password,message:"密码不一致",trigger:"blur"}},{loading:d,send:u,onSuccess:c}=Q(p=>Fn(p),{immediate:!1});c(()=>{e.refreshUserData(),a.value.password=null,a.value.passwordRepeat=null});function f(){var p;(p=i.value)==null||p.validate(h=>{if(h)window.$message.error("请确认信息填写完整");else{const v={title:"申请定制饼干",closable:!1,content:`申请的定制饼干：${a.value.bingganApply}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{const m={binggan:e.binggan,binggan_apply:a.value.bingganApply,password:a.value.password};u(m)}};window.$dialog.success(v)}})}return(p,h)=>(S(),$(r(V),{title:"定制饼干",size:"small"},{default:o(()=>[s(r(x),{vertical:""},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("说明：")]),_:1}),So]),b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("价格：")]),_:1}),wo]),s(r(xe),{ref_key:"formRef",ref:i,model:a.value,"label-placement":"left","label-width":"auto",style:{"max-width":"400px"},rules:l,size:r(t).isMobile?"small":"medium"},{default:o(()=>[s(r(U),{label:"定制饼干",path:"bingganApply"},{default:o(()=>[s(r(ae),{value:a.value.bingganApply,"onUpdate:value":h[0]||(h[0]=v=>a.value.bingganApply=v),placeholder:"7~16个字符(字母、数字、下划线)",maxlength:16,minlength:7},null,8,["value"])]),_:1}),s(r(U),{label:"密码",path:"password"},{default:o(()=>[s(r(ae),{value:a.value.password,"onUpdate:value":h[1]||(h[1]=v=>a.value.password=v),placeholder:"7~20个字符(字母、数字、下划线)",type:"password",maxlength:20,minlength:7,"show-password-on":"click"},null,8,["value"])]),_:1}),s(r(U),{label:"重复密码",path:"passwordRepeat"},{default:o(()=>[s(r(ae),{value:a.value.passwordRepeat,"onUpdate:value":h[2]||(h[2]=v=>a.value.passwordRepeat=v),placeholder:"再次输入密码",type:"password",maxlength:20,minlength:7,"show-password-on":"click",onKeyup:Bt(f,["enter"])},null,8,["value"])]),_:1})]),_:1},8,["model","size"]),s(r(x),{size:"small",align:"center"},{default:o(()=>[s(r(L),{type:"primary",loading:r(d),disabled:r(d),onClick:f},{default:o(()=>[g("提交")]),_:1},8,["loading","disabled"]),s(r(_),{depth:3},{default:o(()=>[g("请务必保存好饼干和密码喔")]),_:1})]),_:1})]),_:1})]),_:1}))}}),To=["data-handler-id"],Co=["src"],Oo=X({__name:"Emoji",props:{emojiSrc:{},index:{}},emits:["deleteEmoji","moveCard"],setup(n,{emit:e}){const t=n,i=e,a=k(),[l,d]=gn({accept:"emojiImg",collect(m){return{handlerId:m.getHandlerId()}},hover(m,C){var M;if(!a.value)return;const w=m.index,y=t.index;if(w===y)return;const E=(M=a.value)==null?void 0:M.getBoundingClientRect();(E.bottom-E.top)/2,C.getClientOffset().y-E.top,i("moveCard",w,y),m.index=y}}),[u,c]=Ba({type:"emojiImg",item:()=>({index:t.index}),collect:m=>({isDragging:m.isDragging()}),end:(m,C)=>{const w=C.getDropResult();m&&(w==null?void 0:w.name)==="Dustbin"&&i("deleteEmoji",m.index)}}),{handlerId:f}=Xe(l),{isDragging:p}=Xe(u),h=z(()=>r(p)?0:1),v=m=>{a.value=c(d(m))};return(m,C)=>(S(),B("div",{ref:v,class:"emoji-box draggable",style:J({opacity:h.value}),"data-handler-id":r(f)},[b("img",{src:m.emojiSrc,class:"emoji-in-box"},null,8,Co)],12,To))}}),xo=at(Oo,[["__scopeId","data-v-c3f2b658"]]),Eo=X({__name:"ExportEmojiModal",setup(n,{expose:e}){const t=re(),i=k(""),a=k(""),l=k(!1);function d(c,f){l.value=!0,i.value=c,a.value=f}e({show:d});function u(){ht(i.value),window.$message.success("已复制到剪贴板")}return(c,f)=>(S(),$(r(ce),{show:l.value,"onUpdate:show":f[2]||(f[2]=p=>l.value=p),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),title:a.value,closable:"",onClose:f[1]||(f[1]=p=>l.value=!1),size:"small"},{action:o(()=>[s(r(x),{justify:"end"},{default:o(()=>[s(r(L),{onClick:u},{default:o(()=>[g("复制")]),_:1}),s(r(L),{onClick:f[0]||(f[0]=p=>l.value=!1)},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[s(r(x),{vertical:""},{default:o(()=>[s(r(_),null,{default:o(()=>[g("可以用来复制给别人")]),_:1}),s(r(Ce),{value:i.value,type:"textarea",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1})]),_:1},8,["style","title"])]),_:1},8,["show"]))}}),Io=n=>(In("data-v-7a5725ef"),n=n(),Mn(),n),Mo=Io(()=>b("span",null,"启用点击删除功能",-1)),No={class:"emoji-box"},Po=["src"],ko=X({__name:"TabEmojis",setup(n){Ee(R=>({"4e867efa":r(t).textColor1}));const e=ie(),t=Ie(),i=k(null),a=_t.map(R=>R.id),l=k(a.filter(R=>!e.userData.emoji_excluded.includes(R))),d=z(()=>a.filter(R=>!l.value.includes(R))),u=k([]);function c(R){Array.isArray(R)?u.value=R.map((F,W)=>({emojiSrc:F,id:W})):u.value=[]}e.userLoginStatus===!0&&c(e.userData.my_emoji),it(()=>e.userDataLoading,R=>{R===!1&&c(e.userData.my_emoji)});const f=(R,F)=>{const W=u.value[R];u.value.splice(R,1),u.value.splice(F,0,W)},[p,h]=gn(()=>({accept:"emojiImg",drop:()=>({name:"Dustbin"}),collect:R=>({isOver:R.isOver(),canDrop:R.canDrop()})})),{canDrop:v,isOver:m}=Xe(p),C=z(()=>r(v)&&r(m)),w=z(()=>r(C)?t.value.tagColor:t.value.cardColor);function y(R){u.value.splice(R,1)}const E=k(!1);function D(R){E.value===!0&&u.value.splice(R,1)}const M=k(!1),O=k(""),I=z(()=>{var R;return(R=O.value)==null?void 0:R.split(/[\n,，]+/).filter(F=>F!="")});function T(){M.value=!1;const R=I.value.map((F,W)=>({emojiSrc:F,id:W+u.value.length}));u.value=u.value.concat(R),O.value=""}function N(){let R=u.value.map(F=>F.emojiSrc);R=R.filter((F,W)=>R.indexOf(F)===W),u.value=R.map((F,W)=>({emojiSrc:F,id:W}))}function A(){M.value===!0&&T();const R={binggan:e.binggan,my_emoji:u.value.map(F=>F.emojiSrc),emoji_excluded:d.value};H(R)}const{loading:j,send:H,onSuccess:se}=Q(R=>qn(R),{immediate:!1,initialData:[]});se(()=>e.refreshUserData());function hn(){var R;(R=i.value)==null||R.show(u.value.map(F=>F.emojiSrc).join(`,
`),"我的表情包")}return(R,F)=>(S(),$(r(x),{vertical:""},{default:o(()=>[s(r(V),{title:"官方表情包",size:"small"},{"header-extra":o(()=>[s(r(_),{depth:3,style:{"font-size":"0.875rem"}},{default:o(()=>[g("可以关闭不想要的表情包")]),_:1})]),default:o(()=>[s(r(xn),{value:l.value,"onUpdate:value":F[0]||(F[0]=W=>l.value=W)},{default:o(()=>[s(r(x),{size:"small"},{default:o(()=>[(S(!0),B(Y,null,ne(r(_t),W=>(S(),$(r(En),{value:W.id,label:W.name},null,8,["value","label"]))),256))]),_:1})]),_:1},8,["value"])]),_:1}),s(r(V),{title:"我的表情包",size:"small"},{"header-extra":o(()=>[s(r(x),{size:"small",align:"center",wrap:!0},{default:o(()=>[s(r(_),{depth:3,style:{"font-size":"0.875rem"}},{default:o(()=>[g("可拖拽排序")]),_:1}),s(r(L),{onClick:N},{default:o(()=>[g("去重")]),_:1}),M.value?G("",!0):(S(),$(r(L),{key:0,type:"primary",onClick:F[1]||(F[1]=W=>M.value=!0)},{default:o(()=>[g("追加")]),_:1}))]),_:1})]),default:o(()=>[s(r(x),{size:"small",style:{"margin-bottom":"6px"}},{default:o(()=>[s(r(ee),{value:E.value,"onUpdate:value":F[2]||(F[2]=W=>E.value=W)},null,8,["value"]),Mo]),_:1}),s(r(x),{size:"small",style:{"touch-action":"none"}},{default:o(()=>[(S(!0),B(Y,null,ne(u.value,(W,$e)=>(S(),$(xo,{key:W.id,emojiSrc:W.emojiSrc,index:$e,onClick:pn=>D($e),onMoveCard:f,onDeleteEmoji:y},null,8,["emojiSrc","index","onClick"]))),128))]),_:1}),b("div",{ref:r(h),class:"emoji-trash",style:J({backgroundColor:w.value})},[s(r(_),{depth:3},{default:o(()=>[g("拖到这里删除")]),_:1}),s(r(Wt),{size:28},{default:o(()=>[s(r(lr))]),_:1})],4)]),_:1}),M.value?(S(),$(r(V),{key:0,title:"待追加的表情包",size:"small",class:"dash-line"},{"header-extra":o(()=>[s(r(x),{size:"small"},{default:o(()=>[s(r(L),{type:"primary",onClick:T},{default:o(()=>[g("追加")]),_:1}),s(r(L),{type:"default",onClick:F[3]||(F[3]=W=>{M.value=!1,O.value=""})},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[s(r(x),{size:"small"},{default:o(()=>[(S(!0),B(Y,null,ne(I.value,(W,$e,pn)=>(S(),B("div",No,[b("img",{src:W,class:"emoji-in-box"},null,8,Po)]))),256))]),_:1}),s(r(Ce),{type:"textarea",value:O.value,"onUpdate:value":F[4]||(F[4]=W=>O.value=W),placeholder:"在这里贴网址追加表情包。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):G("",!0),s(r(x),{align:"center",justify:"end"},{default:o(()=>[s(r(_),{depth:3,style:{"font-size":"0.875rem"}},{default:o(()=>[g("上面所有变更都要提交后才生效喔")]),_:1}),s(r(L),{onClick:hn},{default:o(()=>[g("导出")]),_:1}),s(r(L),{onClick:A,type:"primary",loading:r(j),disabled:r(j)},{default:o(()=>[g("提交")]),_:1},8,["loading","disabled"])]),_:1}),s(Eo,{ref_key:"ExportEmojiModalCom",ref:i},null,512)]),_:1}))}}),Ro=at(ko,[["__scopeId","data-v-7a5725ef"]]),$o={class:"income-item"},Lo={style:{"margin-left":"auto"}},zo={key:0,style:{"margin-top":"6px"}},we=30,Ao=X({__name:"TabIncome",setup(n){Ee(O=>({bac3eccc:r(t).dividerColor})),ie();const e=re();ot(),et(),tt();const t=Ie(),i=k(ge().format("YYYY-MM-DD"));it(i,()=>E("day")),Nn(()=>E("day"));const a=k({pageSize:we}),l=[{title:"时间",key:"created_at",resizable:!0},{title:"收支",key:"olo",resizable:!0},{title:"内容",key:"content",resizable:!0},{title:"主题",key:"thread",render:M,ellipsis:!0,resizable:!0}],d=z(()=>m.value?[{label:"加载中...",key:"loading"}]:[{label:"当月统计："+C.value.sum_month,key:"monthSum"},{label:"全年统计："+C.value.sum_year,key:"yearSum"}]);function u(O){return ge().isBefore(O)}const c=k(1),f=z(()=>(c.value-1)*we),{loading:p,data:h,send:v}=Q(O=>Bn(O),{immediate:!1,initialData:[]}),{loading:m,data:C,send:w}=Q(O=>Wn(O),{immediate:!1,initialData:{sum_year:0,sum_month:0}}),y=z(()=>h.value.map(O=>O.olo).reduce((O,I)=>O+I,0));function E(O){if(i.value===null)window.$message.error("需要选择日期");else{const I={income_date:i.value};O==="day"&&v(I),O==="sum"&&w(I)}}function D(O){return{name:"thread",params:{threadId:O.thread_id,page:O.floor===null?1:Math.ceil((O.floor+1)/200)},hash:O.floor===null?void 0:"#f_"+O.floor}}function M(O,I){return O.thread_id!==null?rt(vt,{to:D(O),target:"_blank",innerHTML:O.thread_title}):""}return(O,I)=>(S(),$(r(x),{size:"small"},{default:o(()=>[s(r(qt),{"formatted-value":i.value,"onUpdate:formattedValue":I[0]||(I[0]=T=>i.value=T),"value-format":"yyyy-MM-dd",type:"date",size:r(e).isMobile?"small":"medium","is-date-disabled":u},null,8,["formatted-value","size"]),s(r(L),{type:"primary",onClick:I[1]||(I[1]=T=>E("day"))},{default:o(()=>[g(" 查询 ")]),_:1}),s(r(V),{title:"收支记录",size:"small"},{"header-extra":o(()=>[s(r(x),{size:"small",align:"center"},{default:o(()=>[g(" 当日小计："+q(y.value)+" ",1),s(r(Pn),{trigger:"click",placement:"bottom-end",options:d.value},{default:o(()=>[s(r(L),{size:"small",onClick:I[2]||(I[2]=T=>E("sum"))},{default:o(()=>[g("月年总计")]),_:1})]),_:1},8,["options"])]),_:1})]),default:o(()=>[r(e).isMobile?G("",!0):(S(),$(r(nt),{key:0,columns:l,data:r(h),pagination:a.value,bordered:!1,loading:r(p)},null,8,["data","pagination","loading"])),r(e).isMobile?(S(),B(Y,{key:1},[r(h).length>0?(S(),$(r(x),{key:0,vertical:"",align:"start",size:"small"},{default:o(()=>[(S(!0),B(Y,null,ne(r(h).slice(f.value,f.value+we),T=>(S(),B("div",$o,[s(r(x),null,{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("时间：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(T.created_at),1)]),_:2},1024)]),b("div",Lo,[s(r(_),{depth:3},{default:o(()=>[g("收支：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(T.olo),1)]),_:2},1024)])]),_:2},1024),s(r(x),{style:{"margin-top":"6px"}},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("内容：")]),_:1}),s(r(_),null,{default:o(()=>[g(q(T.content),1)]),_:2},1024)])]),_:2},1024),T.thread_id!==null?(S(),B("div",zo,[s(r(_),{depth:3},{default:o(()=>[g("主题：")]),_:1}),s(r(vt),{to:D(T)},{default:o(()=>[g(q(T.thread_title),1)]),_:2},1032,["to"])])):G("",!0)]))),256)),s(r(Ht),{page:c.value,"onUpdate:page":I[3]||(I[3]=T=>c.value=T),"item-count":r(h).length,"page-size":we,size:"small",style:{"margin-left":"auto"}},null,8,["page","item-count"])]),_:1})):(S(),$(r(Ft),{key:1}))],64)):G("",!0)]),_:1})]),_:1}))}}),jo=at(Ao,[["__scopeId","data-v-456e121a"]]),Uo={key:0},Ho=b("img",{src:"https://ll4484.bvimg.com/21501/26529351bdd69ac9.png",style:{"max-width":"100%"}},null,-1),Fo={key:0,style:{"margin-left":"auto"}},qo={key:1,style:{"margin-left":"auto"}},Bo=X({__name:"TabLevelup",setup(n){const e=ie(),t=re(),i=k(!1),a=k(!1),l={title_pingbici:{name:"标题屏蔽词",min:1e3,max:4e3,intervel:200,olo:4e3},content_pingbici:{name:"内容屏蔽词",min:1e3,max:4e3,intervel:200,olo:4e3},fjf_pingbici:{name:"FJF黑名单",min:1e3,max:4e3,intervel:200,olo:4e3},my_emoji:{name:"我的表情包",min:5e3,max:3e4,intervel:1e3,olo:2e4},my_battle_chara:{name:"大乱斗角色",min:0,max:3,intervel:1,olo:5e4}},d=[{title:"项目",key:"name",resizable:!0},{title:"目前容量",key:"value",resizable:!0},{title:"操作",key:"controller",render:c,resizable:!0}],u=z(()=>[{name:"标题屏蔽词",value:h.value.title_pingbici,mode:"title_pingbici"},{name:"内容屏蔽词",value:h.value.content_pingbici,mode:"content_pingbici"},{name:"FJF黑名单",value:h.value.fjf_pingbici,mode:"fjf_pingbici"},{name:"我的表情包",value:h.value.my_emoji,mode:"my_emoji"},{name:"大乱斗角色",value:h.value.my_battle_chara,mode:"my_battle_chara"}]);function c(M){return rt(L,{onClick:()=>C(M.mode),size:"tiny",type:"success",innerHTML:"升级"})}const f={title_pingbici:0,content_pingbici:0,fjf_pingbici:0,my_emoji:0,my_battle_chara:0},{loading:p,data:h,send:v}=Q(M=>Vn(M),{immediate:!1,initialData:f});e.binggan!==null&&v({binggan:e.binggan});const m=k("title_pingbici");function C(M){m.value=M,a.value=!0}const{loading:w,send:y,onSuccess:E}=Q(M=>Gn(M),{immediate:!1});E(()=>{e.refreshUserData(),v({binggan:e.binggan}),a.value=!1});function D(M){const O={binggan:e.binggan,mode:M};y(O)}return(M,O)=>(S(),$(r(x),{vertical:""},{default:o(()=>[s(r(V),{title:"升级饼干",size:"small"},{"header-extra":o(()=>[s(r(_),{depth:3},{default:o(()=>[g(" 说明：可支付olo升级饼干，"),r(t).isMobile?(S(),B("br",Uo)):G("",!0),g("增加屏蔽词、表情包等的容量。 ")]),_:1})]),default:o(()=>[s(r(nt),{columns:d,data:u.value,bordered:!1,loading:r(p)},null,8,["data","loading"])]),_:1}),s(r(x),{size:"small"},{default:o(()=>[s(r(L),{onClick:O[0]||(O[0]=I=>i.value=!0)},{default:o(()=>[g("查看价格表")]),_:1})]),_:1}),s(r(ce),{show:i.value,"onUpdate:show":O[3]||(O[3]=I=>i.value=I),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),title:"升级饼干价目表",closable:"",onClose:O[2]||(O[2]=I=>i.value=!1),size:"small"},{action:o(()=>[s(r(x),{justify:"end"},{default:o(()=>[s(r(L),{onClick:O[1]||(O[1]=I=>i.value=!1)},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[Ho]),_:1},8,["style"])]),_:1},8,["show"]),s(r(ce),{show:a.value,"onUpdate:show":O[7]||(O[7]=I=>a.value=I),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),title:"升级饼干",closable:"",onClose:O[6]||(O[6]=I=>a.value=!1),size:"small"},{action:o(()=>[s(r(x),{justify:"end"},{default:o(()=>[s(r(L),{type:"primary",disabled:r(h)[m.value]>=l[m.value].max||r(w),loading:r(w),onClick:O[4]||(O[4]=I=>D(m.value))},{default:o(()=>[g("升级！")]),_:1},8,["disabled","loading"]),s(r(L),{onClick:O[5]||(O[5]=I=>a.value=!1)},{default:o(()=>[g("关闭")]),_:1})]),_:1})]),default:o(()=>[s(r(x),{vertical:"",size:"small"},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("项目：")]),_:1}),b("span",null,q(l[m.value].name),1)]),b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("升级容量：")]),_:1}),b("span",null," +"+q(l[m.value].intervel)+" "+q(m.value==="my_battle_chara"?"角色槽":"字符"),1)]),b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("最大容量：")]),_:1}),b("span",null,q(l[m.value].max)+" "+q(m.value==="my_battle_chara"?"角色槽":"字符"),1)]),b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("本次消费：")]),_:1}),s(r(_),{type:"warning"},{default:o(()=>[g(q(l[m.value].olo)+" 个olo",1)]),_:1})]),r(h)[m.value]>=l[m.value].max?(S(),B("span",Fo,"嗷，这个项目已经塞满了！无法继续升级。")):(S(),B("span",qo,"确定要升级这个项目吗？"))]),_:1})]),_:1},8,["style"])]),_:1},8,["show"])]),_:1}))}}),Ge={1:{name:"好的开始是成功的一半",describe:"拥有10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/375ab2ed5cb4f270.png"},2:{name:"千仓万箱",describe:"拥有50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/3b0f00901650e2d3.png"},3:{name:"财富自由",describe:"拥有100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/84bb8e3e7a23d961.png"},4:{name:"锅中首富",describe:"拥有500w个olo",threshold:5e6,img:"https://ll4484.bvimg.com/21501/b956a208b91668de.png"},11:{name:"一鸣惊人",describe:"通过大乱斗获得5w个olo",threshold:5e4,img:"https://ll4484.bvimg.com/21501/705cf2e9657bf6eb.png"},12:{name:"常胜将军",describe:"通过大乱斗获得10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/70b64dfe538c99be.png"},13:{name:"赌仙在世",describe:"通过大乱斗获得50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/3223a53ff54427ce.png"},14:{name:"今夜做梦也会笑",describe:"通过大乱斗获得100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/a267ec58f522ffa4.png"},15:{name:"赌场收割者",describe:"通过大乱斗获得1000w个olo",threshold:1e7,img:"https://ll4484.bvimg.com/21501/c2369d193018e2fa.png"},21:{name:"出师不利",describe:"由于大乱斗失去5w个olo",threshold:5e4,img:"https://ll4484.bvimg.com/21501/88038aa134b857c0.png"},22:{name:"一败涂地",describe:"由于大乱斗失去10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/ea652c1ac709f5dc.png"},23:{name:"家徒四壁",describe:"由于大乱斗失去50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/adebdd29d6b470f8.png"},24:{name:"倾家荡产",describe:"由于大乱斗失去100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/ebe85fb551a3b54b.png"},25:{name:"空中飞人",describe:"由于大乱斗失去1000w个olo",threshold:1e7,img:"https://ll4484.bvimg.com/21501/6398df1a7d438def.png"},31:{name:"天降横财",describe:"通过红包获得5w个olo",threshold:5e4,img:"https://ll4484.bvimg.com/21501/84f4d51a61cd895b.png"},32:{name:"时来运转",describe:"通过红包获得10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/d704b066bcc891c0.png"},33:{name:"鸿运当头",describe:"通过红包获得50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/61d18a6ef787e44d.png"},34:{name:"天选之子",describe:"通过红包获得100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/f8c6e0d75605020e.png"},35:{name:"金玉满堂",describe:"通过红包获得500w个olo",threshold:5e6,img:"https://ll4484.bvimg.com/21501/ecabdf6edae8a51f.png"},41:{name:"元元之民",describe:"派发红包合计5w个olo",threshold:5e4,img:"https://ll4484.bvimg.com/21501/09dbeaa195fd3f2e.png"},42:{name:"乐善好施",describe:"派发红包合计10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/f251a828ff8a0039.png"},43:{name:"行善积德",describe:"派发红包合计50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/a6bb9b6effae4742.png"},44:{name:"有钱就是任性",describe:"派发红包合计100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/6e7337a16755edd9.png"},45:{name:"普度众生",describe:"派发红包合计500w个olo",threshold:5e6,img:"https://ll4484.bvimg.com/21501/5888776d418b3fc0.png"},51:{name:"无人在意",describe:"发起大乱斗没人接",threshold:1,img:"https://ll4484.bvimg.com/21501/c0d9581932a5229c.png"},61:{name:"手滑了一下",describe:"删了一个楼",threshold:1,img:"https://ll4484.bvimg.com/21501/958f135fcc89d259.png"},81:{name:"轻轻松松",describe:"发表了1000个回帖",threshold:1e3,img:"https://ll4484.bvimg.com/21501/a8a155f469514f9d.png"},82:{name:"小菜一碟",describe:"发表了5000个回帖",threshold:5e3,img:"https://ll4484.bvimg.com/21501/1a061cc01cb8df3e.png"},83:{name:"火锅劳模",describe:"发表了1w个回帖",threshold:1e4,img:"https://ll4484.bvimg.com/21501/a6c71f86c8b6d950.png"},84:{name:"决战紫禁之巅",describe:"发表了5w个回帖",threshold:5e4,img:"https://ll4484.bvimg.com/21501/6c27f20829a6a54e.png"},85:{name:"火锅有你了不起",describe:"发表了10w个回帖",threshold:1e5,img:"https://ll4484.bvimg.com/21501/c934f7ae33e499e1.png"},111:{name:"双赢才是最好的",describe:"大乱斗平局",threshold:1,img:"https://ll4484.bvimg.com/21501/6c068e9fdc4eba5e.png"},141:{name:"我要变强",describe:"饼干升到5级",threshold:5,img:"https://ll4484.bvimg.com/21501/202be0d0f7582f01.png"},142:{name:"潮到出水",describe:"饼干升到10级",threshold:10,img:"https://ll4484.bvimg.com/21501/ac8d5eaeed887042.png"},143:{name:"表情包大户",describe:"饼干升到20级",threshold:20,img:"https://ll4484.bvimg.com/21501/8a89113c9d7c2e18.png"},144:{name:"神仙饼干",describe:"饼干升到40级",threshold:40,img:"https://ll4484.bvimg.com/21501/45ab9e9e5f91faca.png"},161:{name:"得来全不费功夫",describe:"通过打赏获得10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/1c9c834f7e7faed7.png"},162:{name:"得道多助",describe:"通过打赏获得50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/cbfb811b56abdbfc.png"},163:{name:"全凭本事",describe:"通过打赏获得100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/08c938045362eeb4.png"},164:{name:"嘀——全款已到账",describe:"通过打赏获得200w个olo",threshold:2e6,img:"https://ll4484.bvimg.com/21501/df7378fb10f091df.png"},171:{name:"种瓜得瓜",describe:"打赏出去10w个olo",threshold:1e5,img:"https://ll4484.bvimg.com/21501/3f72b95dbfa0ab47.png"},172:{name:"手有余香",describe:"打赏出去50w个olo",threshold:5e5,img:"https://ll4484.bvimg.com/21501/4987d2435831f69e.png"},173:{name:"春蚕蜡炬",describe:"打赏出去100w个olo",threshold:1e6,img:"https://ll4484.bvimg.com/21501/ba1e8f4a483375f6.png"},174:{name:"羽化飞升",describe:"打赏出去200w个olo",threshold:2e6,img:"https://ll4484.bvimg.com/21501/68869a72740db0a7.png"},221:{name:"喜鹊落枝头",describe:"连续赢得3次大乱斗",threshold:3,img:"https://ll4484.bvimg.com/21501/1f6a10dcc90a143a.png"},222:{name:"春风得意马蹄疾",describe:"连续赢得5次大乱斗",threshold:5,img:"https://ll4484.bvimg.com/21501/411d03f5b9cc4848.png"},223:{name:"福无双至今日至",describe:"连续赢得8次大乱斗",threshold:8,img:"https://ll4484.bvimg.com/21501/abb0cc49188fbcac.png"},224:{name:"紫气东来保你发财",describe:"连续赢得10次大乱斗",threshold:10,img:"https://ll4484.bvimg.com/21501/5a06207d2febecbb.png"},231:{name:"脚踩瓜皮",describe:"连续输掉3次大乱斗",threshold:3,img:"https://ll4484.bvimg.com/21501/71272c7043ebd5b3.png"},232:{name:"凉水塞牙",describe:"连续输掉5次大乱斗",threshold:5,img:"https://ll4484.bvimg.com/21501/f4524544c123e5c2.png"},233:{name:"点背不能怨社会",describe:"连续输掉8次大乱斗",threshold:8,img:"https://ll4484.bvimg.com/21501/e211e9f09ec5110b.png"},234:{name:"人生不如意十有八九",describe:"连续输掉10次大乱斗",threshold:10,img:"https://ll4484.bvimg.com/21501/d4bc1004891bcb05.png"},241:{name:"日进斗金",describe:"粮仓存粮5w",threshold:5e4,img:"https://ll4484.bvimg.com/21501/a888805775018acf.png"},242:{name:"堆金积玉",describe:"粮仓存粮10w",threshold:1e5,img:"https://ll4484.bvimg.com/21501/ffbe0e90a7d07c6e.png"},243:{name:"富甲一方",describe:"粮仓存粮30w",threshold:3e5,img:"https://ll4484.bvimg.com/21501/7bd42cda05bde0f7.png"},244:{name:"腰缠万贯",describe:"粮仓存粮50w",threshold:5e5,img:"https://ll4484.bvimg.com/21501/8a1122a79bb30c93.png"},245:{name:"富有四海",describe:"粮仓存粮100w",threshold:1e6,img:"https://ll4484.bvimg.com/21501/291440ca42ea6c7f.png"},271:{name:"锣鼓喧天",describe:"发布1个大喇叭",threshold:1,img:"https://ll4484.bvimg.com/21501/e73d4fc66ccc3d2a.png"},272:{name:"鞭炮齐鸣",describe:"发布10个大喇叭",threshold:10,img:"https://ll4484.bvimg.com/21501/e84408bfbe1074e7.png"},273:{name:"红旗招展",describe:"发布50个大喇叭",threshold:50,img:"https://ll4484.bvimg.com/21501/574224143f1996fb.png"},274:{name:"人山人海",describe:"发布100个大喇叭",threshold:100,img:"https://ll4484.bvimg.com/21501/d444762d5804dcb6.png"}},jt={52:{name:"透明人",describe:"发起大乱斗100次没人接",threshold:100,img:"https://ll4484.bvimg.com/21501/0ef683a643112912.png"},62:{name:"你是五嬷吗",describe:"进行了100次删楼",threshold:100,img:"https://ll4484.bvimg.com/21501/7b7fe8abfacebdb6.png"},71:{name:"归零！",describe:"olo归零",threshold:0,img:"https://ll4484.bvimg.com/21501/4beb1314eabc90b7.png"},91:{name:"万中有一",describe:"抢到第10000楼",threshold:0,img:"https://ll4484.bvimg.com/21501/491d9a587a869ff3.png"},101:{name:"元元的爱",describe:"大乱斗掷出101点",threshold:0,img:"https://ll4484.bvimg.com/21501/ecd752e772088e90.png"},112:{name:"火锅之神也被你薅秃了",describe:"大乱斗平局100次",threshold:100,img:"https://ll4484.bvimg.com/21501/cbefc5c42f03c5aa.png"},121:{name:"小火锅的负责人是个骗子",describe:"红包抢到0个olo",threshold:0,img:"https://ll4484.bvimg.com/21501/4d4a7070baf1dc2c.png"},131:{name:"个人财产+1",describe:"申请1个定制饼干",threshold:0,img:"https://ll4484.bvimg.com/21501/05bd642f080af452.png"},151:{name:"小火锅二周年",describe:"我们要一直在一起 — 至少十年吧！",threshold:0,img:"https://ll4484.bvimg.com/21501/a587cbee37c720c4.png"},152:{name:"国庆节快乐",describe:"伟大的祖国节日快乐",threshold:0,img:"https://ll4484.bvimg.com/21501/87ff48253c971c14.png"},153:{name:"龙年快乐",describe:"2024年小火锅龙年祝福",threshold:0,img:"https://ll4484.bvimg.com/21501/6126f591197b14fc.png"},154:{name:"小火锅三周年快乐~！",describe:"3.0也同时上线喔",threshold:0,img:"https://ll4484.bvimg.com/21501/b08141fb4d5daa6e.png"},155:{name:"小火锅3.0",describe:"诶？我来测试咒岛3.0？真的假的？！",threshold:0,img:"https://ll4484.bvimg.com/21501/929f251b010486b0.png"},181:{name:"皇家御用画宗",describe:"大触快教教我画画",threshold:0,img:"https://ll4484.bvimg.com/21501/44e37a110cf56cc1.png"},182:{name:"小火锅守护者",describe:"我来组成小火锅锅底！",threshold:0,img:"https://ll4484.bvimg.com/21501/f332ae15bee8da0e.png"},183:{name:"小火锅终末旅行",describe:"既有开始，必有终结",threshold:0,img:"https://ll4484.bvimg.com/21501/72ba15246f410175.png"},201:{name:"ac娘",describe:"\\\\ ac娘，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/51987958973582bd.png"},202:{name:"鹦鹉鸡",describe:"\\\\ 鹦鹉鸡，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/1f0aad269a130090.png"},203:{name:"咪子鱼",describe:"\\\\ 咪子鱼，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/ea12294bf6a058dc.png"},204:{name:"小黑猫",describe:"\\\\ 小黑猫，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/6100f1fdf762d593.png"},205:{name:"麻将脸",describe:"\\\\ 麻将脸，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/9e11c77cd9f72258.png"},206:{name:"小恐龙",describe:"\\\\ 小恐龙，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/ca31e1ddd934a0bd.png"},207:{name:"TD猫",describe:"\\\\ TD猫，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/67c4009db05e3004.png"},208:{name:"小豆泥",describe:"\\\\ 小豆泥，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/5d2b16a1735b04b3.png"},209:{name:"小企鹅",describe:"\\\\ 小企鹅，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/62a714428c2a5730.png"},210:{name:"小黄脸",describe:"\\\\ 小黄脸，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/b46413dadf7795a1.png"},211:{name:"FUFU",describe:"\\\\ FUFU，出道！//",threshold:500,img:"https://ll4484.bvimg.com/21501/2ac7d7693e95d779.png"},212:{name:"小火锅第一届表情包萌",describe:"全军出击！",threshold:100,img:"https://ll4484.bvimg.com/21501/248ceb037a8afdd7.png"},213:{name:"燃起来了！",describe:"擦出爱的火花",threshold:1e3,img:"https://ll4484.bvimg.com/21501/b3bab29c7ac2d4b8.png"},214:{name:"为冠军的小豆泥献上喝彩",describe:"尊贵的小豆泥陛下火遍全球天下第一帝锅",threshold:0,img:"https://ll4484.bvimg.com/21501/3e713357146f714e.png"},251:{name:"今朝有米今朝吃",describe:"明日无米啃枯枝（提前开仓累计30w）",threshold:3e5,img:"https://ll4484.bvimg.com/21501/ef265b195f6e46d2.png"},261:{name:"小火锅第一届出道萌",describe:"出道萌投票100票",threshold:100,img:"https://ll4484.bvimg.com/21501/7678c19451233589.png"},262:{name:"成为大家的爱豆",describe:"出道萌投票1000票",threshold:1e3,img:"https://ll4484.bvimg.com/21501/a6c2452bb00c3328.png"},263:{name:"药药切克闹",describe:"民推之光药水哥",threshold:null,img:"https://ll4484.bvimg.com/21501/f65f77d44b43c785.png"},270:{name:"吼那么大声干嘛啦",describe:"撤回一个大喇叭",threshold:null,img:"https://ll4484.bvimg.com/21501/8c79edeefd07bea7.png"}},Wo=["src"],Vo=["src"],Go=["src"],Yo=["src"],Xo=["src"],Ko=X({__name:"TabMedal",setup(n){Ee(y=>({"42c9848f":r(d)}));const e=ie(),t=re(),i=k(!1),a=k(),l=k(!1),d=t.isMobile?"0.70rem":"0.875rem",u=z(()=>{if(!h.value)return[];const y=[];for(const E in Ge){const D=h.value.includes(Number(E));(l.value||D)&&y.push(ye(ue({},Ge[E]),{id:Number(E),hasMedal:D,img:D?Ge[E].img:"https://ll4484.bvimg.com/21501/0361c44f8eb757db.png"}))}return y}),c=z(()=>{if(!h.value)return[];const y=[];for(const E in jt){const D=h.value.includes(Number(E));D&&y.push(ye(ue({},jt[E]),{id:Number(E),hasMedal:D}))}return y});function f(y){a.value=y,i.value=!0;const E={binggan:e.binggan,medal_id:y.id};w(E)}const{loading:p,data:h,send:v}=Q(y=>Yn(y),{immediate:!1,initialData:[]});e.binggan!==null&&v({binggan:e.binggan});const{loading:m,data:C,send:w}=Q(y=>Xn(y),{immediate:!1});return(y,E)=>(S(),$(r(x),{vertical:""},{default:o(()=>[s(r(bt),{show:r(p)},{default:o(()=>[s(r(V),{title:"成就徽章",size:"small"},{"header-extra":o(()=>[s(r(ee),{value:l.value,"onUpdate:value":E[0]||(E[0]=D=>l.value=D)},null,8,["value"]),s(r(_),{style:{"margin-left":"6px"}},{default:o(()=>[g("显示未获得的成就 ")]),_:1})]),default:o(()=>[!r(t).isMobile&&c.value.length>0?(S(),$(r(x),{key:0,size:[4,0]},{default:o(()=>[(S(!0),B(Y,null,ne(c.value,D=>(S(),$(r(x),{vertical:"",align:"center",class:"medal-box",onClick:M=>f(D)},{default:o(()=>[b("img",{src:D.img,class:"medal-img"},null,8,Wo),s(r(_),{class:"medal-text"},{default:o(()=>[g(q(D.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:1})):G("",!0),r(t).isMobile&&c.value.length>0?(S(),$(r(Te),{key:1,"x-gap":"4",cols:5},{default:o(()=>[(S(!0),B(Y,null,ne(c.value,D=>(S(),$(r(de),{align:"center",class:"medal-box",onClick:M=>f(D)},{default:o(()=>[b("img",{src:D.img,class:"medal-img"},null,8,Vo),s(r(_),{class:"medal-text"},{default:o(()=>[g(q(D.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:1})):G("",!0),r(t).isMobile?G("",!0):(S(),$(r(x),{key:2,size:[4,0]},{default:o(()=>[(S(!0),B(Y,null,ne(u.value,D=>(S(),$(r(x),{vertical:"",align:"center",class:"medal-box",onClick:M=>f(D)},{default:o(()=>[b("img",{src:D.img,class:"medal-img"},null,8,Go),s(r(_),{class:"medal-text"},{default:o(()=>[g(q(D.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:1})),r(t).isMobile?(S(),$(r(Te),{key:3,"x-gap":"4",cols:5},{default:o(()=>[(S(!0),B(Y,null,ne(u.value,D=>(S(),$(r(de),{align:"center",class:"medal-box",onClick:M=>f(D)},{default:o(()=>[b("img",{src:D.img,class:"medal-img"},null,8,Yo),s(r(_),{class:"medal-text"},{default:o(()=>[g(q(D.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:1})):G("",!0)]),_:1})]),_:1},8,["show"]),s(r(ce),{show:i.value,"onUpdate:show":E[2]||(E[2]=D=>i.value=D),"display-directive":"if"},{default:o(()=>[s(r(V),{style:J({maxWidth:r(t).modalMaxWidth}),closable:"",onClose:E[1]||(E[1]=D=>i.value=!1),size:"small"},{default:o(()=>[s(r(x),{vertical:"",align:"center",class:"medal-box-modal"},{default:o(()=>{var D;return[b("img",{src:(D=a.value)==null?void 0:D.img,class:"medal-img"},null,8,Xo),s(r(_),{style:{"font-size":"1rem"}},{default:o(()=>{var M;return[g(q((M=a.value)==null?void 0:M.name),1)]}),_:1}),s(r(_),{style:{"font-size":"1rem"}},{default:o(()=>{var M;return[g(q((M=a.value)==null?void 0:M.describe),1)]}),_:1}),s(r(bt),{show:r(m)},{default:o(()=>[r(C)!==void 0||!r(m)?(S(),B(Y,{key:0},[r(C).medal_created_at!==null?(S(),$(r(_),{key:0,style:{"font-size":"1rem"}},{default:o(()=>[g(q(r(C).medal_created_at),1)]),_:1})):G("",!0),r(C).medal_created_at===null&&r(C).progress!==null?(S(),$(r(_),{key:1,style:{"font-size":"1rem"}},{default:o(()=>[g(q(r(C).progress)+" / "+q(r(C).threshold),1)]),_:1})):G("",!0)],64)):G("",!0)]),_:1},8,["show"])]}),_:1})]),_:1},8,["style"])]),_:1},8,["show"])]),_:1}))}}),Jo=b("span",null,"新饼干无密码。建议尽快设定密码，以免饼干遗失。",-1),Qo=X({__name:"TabPassword",setup(n){const e=ie(),t=re(),i=k(null),a=k({passwordOld:null,passwordNew:null,passwordRepeat:null}),l={passwordOld:{required:!1},passwordNew:{required:!0,validator:(p,h)=>{const v=/^[a-zA-Z0-9_]+$/;if(h===null)return new Error("请输入密码");if(v.test(h)){if(h.length<7)return new Error("最少需要7个字符");if(h.length>20)return new Error("最多20个字符")}else return new Error("只能是数字、英文、下划线");return!0},trigger:"blur"},passwordRepeat:{required:!0,validator:(p,h)=>h===a.value.passwordNew,message:"密码不一致",trigger:"blur"}},{loading:d,send:u,onSuccess:c}=Q(p=>Kn(p),{immediate:!1});c(()=>{a.value.passwordOld=null,a.value.passwordNew=null,a.value.passwordRepeat=null});function f(){var p;(p=i.value)==null||p.validate(h=>{if(h)window.$message.error("请确认信息填写完整");else{const v={binggan:e.binggan,old_password:a.value.passwordOld,new_password:a.value.passwordNew};u(v)}})}return(p,h)=>(S(),$(r(V),{title:"密码设定",size:"small"},{default:o(()=>[s(r(x),{vertical:""},{default:o(()=>[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("说明：")]),_:1}),Jo]),s(r(xe),{ref_key:"formRef",ref:i,model:a.value,"label-placement":"left","label-width":"auto",style:{"max-width":"400px"},rules:l,size:r(t).isMobile?"small":"medium"},{default:o(()=>[s(r(U),{label:"旧密码",path:"passwordOld"},{default:o(()=>[s(r(ae),{value:a.value.passwordOld,"onUpdate:value":h[0]||(h[0]=v=>a.value.passwordOld=v),placeholder:"(选填)如果未设定密码可以留空",type:"password",maxlength:20,minlength:7,"show-password-on":"click"},null,8,["value"])]),_:1}),s(r(U),{label:"密码",path:"passwordNew"},{default:o(()=>[s(r(ae),{value:a.value.passwordNew,"onUpdate:value":h[1]||(h[1]=v=>a.value.passwordNew=v),placeholder:"7~20个字符(字母、数字、下划线)",type:"password",maxlength:20,minlength:7,"show-password-on":"click"},null,8,["value"])]),_:1}),s(r(U),{label:"重复密码",path:"passwordRepeat"},{default:o(()=>[s(r(ae),{value:a.value.passwordRepeat,"onUpdate:value":h[2]||(h[2]=v=>a.value.passwordRepeat=v),placeholder:"再次输入密码",type:"password",maxlength:20,minlength:7,"show-password-on":"click",onKeyup:Bt(f,["enter"])},null,8,["value"])]),_:1})]),_:1},8,["model","size"]),s(r(x),{size:"small",align:"center"},{default:o(()=>[s(r(L),{type:"primary",loading:r(d),disabled:r(d),onClick:f},{default:o(()=>[g("提交")]),_:1},8,["loading","disabled"]),s(r(_),{depth:3},{default:o(()=>[g("请务必保存好新密码喔")]),_:1})]),_:1})]),_:1})]),_:1}))}}),Zo=b("span",null,"这个保存在本地，不用点提交",-1),es=b("span",null,"这个保存在本地，不用点提交",-1),ts=b("span",null,"关闭屏蔽词功能，可以提升一点性能",-1),ns=X({__name:"TabPingbici",setup(n){const e=ie(),t=re();k(null);const i=k({content_pingbici:[],title_pingbici:[],fjf_pingbici:[]}),a=k(e.userData.binggan.use_pingbici);e.userLoginStatus===!0&&(i.value=e.userData.pingbici,a.value=e.userData.binggan.use_pingbici),it(()=>e.userDataLoading,p=>{p===!1&&(i.value=e.userData.pingbici,a.value=e.userData.binggan.use_pingbici)});function l(p){i.value[p]=i.value[p].filter((h,v)=>i.value[p].indexOf(h)===v)}function d(){const p=ue({binggan:e.binggan,use_pingbici:a.value},i.value);c(p)}const{loading:u,send:c,onSuccess:f}=Q(p=>Jn(p),{immediate:!1,initialData:[]});return f(()=>e.refreshUserData()),(p,h)=>(S(),$(r(x),{vertical:""},{default:o(()=>[s(r(V),{title:"标题屏蔽词",size:"small"},{"header-extra":o(()=>[s(r(L),{onClick:h[1]||(h[1]=v=>l("title_pingbici"))},{default:o(()=>[g("去重")]),_:1})]),default:o(()=>[s(r(ze),{value:i.value.title_pingbici,"onUpdate:value":h[0]||(h[0]=v=>i.value.title_pingbici=v)},null,8,["value"])]),_:1}),s(r(V),{title:"内容屏蔽词",size:"small"},{"header-extra":o(()=>[s(r(L),{onClick:h[3]||(h[3]=v=>l("content_pingbici"))},{default:o(()=>[g("去重")]),_:1})]),default:o(()=>[s(r(ze),{value:i.value.content_pingbici,"onUpdate:value":h[2]||(h[2]=v=>i.value.content_pingbici=v)},null,8,["value"])]),_:1}),s(r(V),{title:"FJF小尾巴和固马屏蔽词",size:"small"},{"header-extra":o(()=>[s(r(L),{onClick:h[5]||(h[5]=v=>l("fjf_pingbici"))},{default:o(()=>[g("去重")]),_:1})]),default:o(()=>[s(r(ze),{value:i.value.fjf_pingbici,"onUpdate:value":h[4]||(h[4]=v=>i.value.fjf_pingbici=v)},null,8,["value"]),s(r(_),{depth:3,style:{"font-size":"0.875rem"}},{default:o(()=>[g("注意：同一个饼干在不同FJF主题中，小尾巴会改变")]),_:1})]),_:1}),s(r(x),{align:"center",justify:"start"},{default:o(()=>[s(r(Ae),{trigger:"hover"},{trigger:o(()=>[b("div",null,[s(r(ee),{value:r(t).userCustom.hidePingbiciFloor,"onUpdate:value":h[6]||(h[6]=v=>r(t).userCustom.hidePingbiciFloor=v)},null,8,["value"]),s(r(_),{style:{"margin-left":"6px"}},{default:o(()=>[g("完全隐藏楼层 ")]),_:1})])]),default:o(()=>[Zo]),_:1}),s(r(Ae),{trigger:"hover"},{trigger:o(()=>[b("div",null,[s(r(ee),{value:r(t).userCustom.pingbiciIngnoreCase,"onUpdate:value":h[7]||(h[7]=v=>r(t).userCustom.pingbiciIngnoreCase=v)},null,8,["value"]),s(r(_),{style:{"margin-left":"6px"}},{default:o(()=>[g("忽略大小写 ")]),_:1})])]),default:o(()=>[es]),_:1})]),_:1}),s(r(x),{align:"center",justify:"end"},{default:o(()=>[s(r(Ae),{trigger:"hover"},{trigger:o(()=>[b("div",null,[s(r(ee),{value:a.value,"onUpdate:value":h[8]||(h[8]=v=>a.value=v)},null,8,["value"]),s(r(_),{style:{"margin-left":"6px"}},{default:o(()=>[g("启用 ")]),_:1})])]),default:o(()=>[ts]),_:1}),s(r(L),{type:"primary",onClick:d,loading:r(u),disabled:r(u)},{default:o(()=>[g("提交")]),_:1},8,["loading","disabled"])]),_:1})]),_:1}))}}),rs=b("img",{src:"https://ll4484.bvimg.com/21501/6fe7ac5fa3fe2159.png",style:{"max-height":"40px"}},null,-1),is={style:{display:"flex","align-items":"center",gap:"4px"}},as=b("img",{src:"https://ll4484.bvimg.com/21501/15c509267f071c08.png",style:{"max-height":"40px"}},null,-1),os=b("img",{src:"https://ll4484.bvimg.com/21501/f411b2d1d632cf32.png",style:{"max-height":"40px"}},null,-1),ss=b("img",{src:"https://ll4484.bvimg.com/21501/b4ad6a18cc56d41a.png",style:{"max-height":"40px"}},null,-1),ls=X({__name:"UserCard",setup(n){const e=ie(),t=re(),i=k(!0);function a(){ht(e.binggan),window.$message.success("已将饼干复制到粘贴板，请保存好喔！")}return e.refreshUserData(),(l,d)=>(S(),$(r(V),{hoverable:"",size:"small"},{default:o(()=>[s(r(x),{justify:"space-around",vertical:r(t).isMobile,size:r(t).isMobile?"small":"medium"},{default:o(()=>[s(r(x),{vertical:!r(t).isMobile,align:"start"},{default:o(()=>[rs,b("div",null,[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("我的饼干")]),_:1})]),b("div",is,[s(r(_),{depth:2,style:J({fontSize:r(t).isMobile?"0.875rem":"1rem",cursor:i.value?"pointer":"auto"}),onClick:d[0]||(d[0]=u=>i.value=!1)},{default:o(()=>[g(q(i.value?"*点击显示*":r(e).binggan),1)]),_:1},8,["style"]),s(r(Wt),{size:r(t).isMobile?18:20},{default:o(()=>[s(r(kn),{style:{cursor:"pointer"},onClick:a})]),_:1},8,["size"])])])]),_:1},8,["vertical"]),s(r(x),{vertical:!r(t).isMobile,align:"start"},{default:o(()=>[as,b("div",null,[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("饼干等级")]),_:1})]),b("div",null,[s(r(_),{depth:2,style:J({fontSize:r(t).isMobile?"0.875rem":"1rem"})},{default:o(()=>{var u;return[g(q((u=r(e).userData)==null?void 0:u.binggan.user_lv),1)]}),_:1},8,["style"])])])]),_:1},8,["vertical"]),s(r(x),{vertical:!r(t).isMobile,align:"start"},{default:o(()=>[os,b("div",null,[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("奥利奥")]),_:1})]),b("div",null,[s(r(_),{depth:2,style:J({fontSize:r(t).isMobile?"0.875rem":"1rem"})},{default:o(()=>{var u;return[s(r(yt),{from:0,to:(u=r(e).userData)==null?void 0:u.binggan.coin,"show-separator":"",duration:2e3},null,8,["to"])]}),_:1},8,["style"])])])]),_:1},8,["vertical"]),s(r(x),{vertical:!r(t).isMobile,align:"start"},{default:o(()=>[ss,b("div",null,[b("div",null,[s(r(_),{depth:3},{default:o(()=>[g("粮仓奥利奥")]),_:1})]),b("div",null,[s(r(_),{depth:2,style:J({fontSize:r(t).isMobile?"0.875rem":"1rem"})},{default:o(()=>{var u;return[s(r(yt),{from:0,to:(u=r(e).userData)==null?void 0:u.binggan.coin_in_bank,"show-separator":"",duration:2e3},null,8,["to"])]}),_:1},8,["style"])])])]),_:1},8,["vertical"])]),_:1},8,["vertical","size"])]),_:1}))}}),us=b("div",{style:{height:"50px"}},null,-1),Ss=X({__name:"UserCenter",setup(n){ie();const e=re();ot(),et(),tt(),Ie();const t=k();document.title="个人中心";const i=[{name:"medals",tab:"我的成就",component:Ko},{name:"common",tab:"一般设定",component:io},{name:"pingbici",tab:"屏蔽词",component:ns},{name:"emojis",tab:"表情包",component:Ro},{name:"chara",tab:"我的角色",component:_o},{name:"bank",tab:"我的粮仓",component:uo},{name:"income",tab:"收支记录",component:jo},{name:"levelup",tab:"升级饼干",component:Bo},{name:"customBinggan",tab:"定制饼干",component:Do},{name:"password",tab:"密码设定",component:Qo}];return(a,l)=>(S(),$(r(x),{vertical:"",style:{"margin-top":"8px"}},{default:o(()=>[s(r(ra),{backend:r(e).isMobile?r(kr):r(wr)},{default:o(()=>[s(r(ls)),s(r(Rn),{type:"line","bar-width":r(e).isMobile?0:void 0,animated:"",size:r(e).isMobile?"small":"large",value:t.value,"onUpdate:value":l[0]||(l[0]=d=>t.value=d)},{default:o(()=>[(S(),B(Y,null,ne(i,d=>s(r($n),{name:d.name,tab:d.tab,key:d.name},{default:o(()=>[(S(),$(Ln(d.component)))]),_:2},1032,["name","tab"])),64))]),_:1},8,["bar-width","size","value"])]),_:1},8,["backend"]),us]),_:1}))}});export{Ss as default};
