import{w as B,O as ne,n as e,T as se,$ as S,W as pe,b as J,ao as K,h as R,A as d,M as U,p as t,K as W,H as a,t as b,z as l,F as A,I as P,Q as G,E as C,q as He,y as F,v as s,a_ as me,az as te,X as re,_ as oe,e as H,ac as be,ad as ye,b0 as he,aH as xe,bi as le,bj as ke,S as j,at as Y,bl as X,x as T,aZ as Z,ay as O,aw as ce,ax as ee,ak as Pe,b4 as Re,b3 as Be,a9 as Ee}from"./vendor-CYaCwXn6.js";import{a as E,u as q,b as N,_ as ue,c as ae}from"./app-CeuidNzD.js";import{s as qe,g as Ve,h as je,i as ze,j as Ye,k as Ge,l as Le,m as De}from"./admin-cE4C4GaV.js";import{u as ie}from"./forums-B5h5wVGG.js";import{i as Qe,a as Je}from"./inputNumberFormat-DaYmlx6U.js";const Ke={class:"banner-box-sm"},We=["src"],Xe=["src","onClick"],Ze=B({__name:"TabBanners",setup(V){ne(p=>({"6a1c8eac":e(I).textColor1}));const y=E();q();const h=ie(),I=se(),g=S(0);pe(()=>{r.value.length>0&&(g.value=r.value[0].value)});const r=J(()=>y.binggan===null||y.userData.binggan.admin_forums===void 0?[]:h.forumsData.reduce((p,n)=>(y.checkAdminForums(n.id)&&p.push({value:n.id,label:n.name,forumId:n.id}),p),[])),o=S([]);K(g,p=>{var n,w;p===void 0?o.value=[]:o.value=[...(w=(n=h.forumData(p))==null?void 0:n.banners)!=null?w:[]]});const v=S(!1),u=S(),i=J(()=>{var p,n;return(n=(p=u.value)==null?void 0:p.split(/[\n,，]+/).filter(w=>w!=""))!=null?n:[]});function m(){v.value=!1,o.value=o.value.concat(i.value),u.value=void 0,f()}function x(p){var n;(n=o.value)==null||n.splice(p,1)}const{loading:$,send:M,onSuccess:z}=R(p=>qe(p),{immediate:!1});z(()=>{h.getForumsData()});function f(){const p={binggan:y.binggan,forum_id:g.value,banners:o.value};M(p)}return(p,n)=>(d(),U(e(b),{vertical:""},{default:t(()=>[v.value?(d(),U(e(W),{key:0,title:"待追加的版头",size:"small",class:"dash-line"},{"header-extra":t(()=>[a(e(b),{size:"small"},{default:t(()=>[a(e(N),{type:"primary",onClick:m},{default:t(()=>[l("追加")]),_:1}),a(e(N),{type:"default",onClick:n[0]||(n[0]=w=>{v.value=!1,u.value=void 0})},{default:t(()=>[l("关闭")]),_:1})]),_:1})]),default:t(()=>[a(e(b),{size:"small"},{default:t(()=>[(d(!0),A(P,null,G(i.value,(w,L,D)=>(d(),A("div",Ke,[C("img",{src:w,style:{width:"100%"}},null,8,We)]))),256))]),_:1}),a(e(He),{type:"textarea",value:u.value,"onUpdate:value":n[1]||(n[1]=w=>u.value=w),placeholder:"在这里贴网址追加版头。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):F("",!0),a(e(W),{title:"版头设定",size:"small"},{"header-extra":t(()=>[a(e(b),{size:"small",align:"center",wrap:!0},{default:t(()=>[a(e(s),{depth:3},{default:t(()=>[l("选择小岛")]),_:1}),a(e(me),{value:g.value,"onUpdate:value":n[2]||(n[2]=w=>g.value=w),options:r.value,"consistent-menu-width":!1,style:{width:"100px"}},null,8,["value","options"]),v.value?F("",!0):(d(),U(e(N),{key:0,type:"primary",onClick:n[3]||(n[3]=w=>v.value=!0)},{default:t(()=>[l("追加")]),_:1}))]),_:1})]),default:t(()=>[a(e(s),{depth:3},{default:t(()=>[l("点击图片移除")]),_:1}),a(e(b),{wrap:!0,size:[4,4]},{default:t(()=>[(d(!0),A(P,null,G(o.value,(w,L)=>{var D;return d(),A("div",{key:L+((D=g.value)!=null?D:0)*1e3,class:"banner-box"},[C("img",{src:w,class:"banner-img",onClick:fe=>x(L)},null,8,Xe)])}),128))]),_:1})]),_:1}),a(e(b),{align:"center",justify:"end"},{default:t(()=>[a(e(s),{depth:3,style:{"font-size":"0.875rem"}},{default:t(()=>[l("各个小岛的变更要分别提交喔")]),_:1}),a(e(N),{type:"primary",loading:e($),disable:e($),onClick:f},{default:t(()=>[l("提交")]),_:1},8,["loading","disable"])]),_:1})]),_:1}))}}),ea=ue(Ze,[["__scopeId","data-v-35893c7d"]]),aa=B({__name:"TabGlobal",setup(V){ne(u=>({"21c7f12a":e(h).textColor1}));const y=E();q(),ie();const h=se(),I=S(!1),g=S(!1),r=S(!1),o=S(!1);y.admin.isSuperAdmin===!0&&Ve().then(u=>{I.value=u.new_binggan,g.value=u.new_loudspeaker,r.value=u.new_binggan_force,o.value=!0});function v(u,i){const m={binggan:y.binggan,key:u,value:JSON.stringify(i)};je(m).then()}return(u,i)=>(d(),U(e(b),{vertical:"",size:[6,12]},{default:t(()=>[a(e(b),{size:"small"},{default:t(()=>[a(e(s),{style:{width:"6.2rem"}},{default:t(()=>[l("领取饼干开关")]),_:1}),a(e(te),{value:I.value,"onUpdate:value":i[0]||(i[0]=m=>I.value=m),disabled:!o.value,onUpdateValue:i[1]||(i[1]=m=>v("new_binggan",m))},null,8,["value","disabled"]),re(a(e(s),{depth:3},{default:t(()=>[l("读取中")]),_:1},512),[[oe,!o.value]])]),_:1}),a(e(b),{size:"small"},{default:t(()=>[a(e(s),{style:{width:"6.2rem"}},{default:t(()=>[l("大喇叭开关")]),_:1}),a(e(te),{value:g.value,"onUpdate:value":i[2]||(i[2]=m=>g.value=m),disabled:!o.value,onUpdateValue:i[3]||(i[3]=m=>v("new_loudspeaker",m))},null,8,["value","disabled"]),re(a(e(s),{depth:3},{default:t(()=>[l("读取中")]),_:1},512),[[oe,!o.value]])]),_:1}),a(e(b),{size:"small"},{default:t(()=>[a(e(s),{style:{width:"6.2rem"}},{default:t(()=>[l("强制打开饼干（慎用）")]),_:1}),a(e(te),{value:r.value,"onUpdate:value":i[4]||(i[4]=m=>r.value=m),disabled:!o.value,onUpdateValue:i[5]||(i[5]=m=>v("new_binggan_force",m))},null,8,["value","disabled"]),re(a(e(s),{depth:3},{default:t(()=>[l("读取中")]),_:1},512),[[oe,!o.value]])]),_:1})]),_:1}))}}),ta=ue(aa,[["__scopeId","data-v-3d2b5c4f"]]),la={class:"actives-item"},na={style:{"margin-left":"auto"}},sa={key:0,style:{"margin-top":"6px"}},ua={style:{"margin-top":"6px"}},ia={style:{"margin-top":"6px"}},da=B({__name:"TabActives",setup(V){ne(f=>({a0198f68:e(I).dividerColor})),H.extend(be),H.extend(ye);const y=E(),h=q(),I=se(),g=S(H().tz("Asia/Shanghai").format("YYYY-MM-DD"));K(g,()=>x());const r=S(1);K(r,()=>x()),pe(()=>x());function o(f){return H().add(1,"day").isBefore(f)}const v=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0},{title:"主题",key:"thread_title",render:M,resizable:!0},{title:"回复",key:"post_content",render:z,resizable:!0}],{loading:u,data:i,send:m}=R(f=>ze(f),{immediate:!1,initialData:{data:[],last_page:1}});function x(){const f={binggan:y.binggan,date:g.value,page:r.value};m(f)}function $(f){return{name:"thread",params:{threadId:f.thread_id,page:f.floor===null?1:Math.ceil((f.floor+1)/200)},hash:f.floor===null?void 0:"#f_"+f.floor}}function M(f,p){return f.thread_id!==null?j(X,{to:$(f),target:"_blank"},()=>j(Y,{style:"max-width: 120px"},()=>f.thread_title)):j(Y,{style:"max-width: 120px"},()=>f.thread_title)}function z(f,p){return f.thread_id!==null?j(X,{to:$(f),target:"_blank"},()=>j(Y,{style:"max-width: 120px"},()=>f.post_content)):j(Y,{style:"max-width: 120px"},()=>f.post_content)}return(f,p)=>(d(),U(e(b),{size:"small"},{default:t(()=>[a(e(he),{"formatted-value":g.value,"onUpdate:formattedValue":p[0]||(p[0]=n=>g.value=n),"value-format":"yyyy-MM-dd",type:"date",size:e(h).isMobile?"small":"medium","is-date-disabled":o},null,8,["formatted-value","size"]),a(e(N),{type:"primary",onClick:p[1]||(p[1]=n=>x())},{default:t(()=>[l(" 查询 ")]),_:1}),a(e(W),{title:"管理员操作记录",size:"small"},{default:t(()=>[e(h).isMobile?F("",!0):(d(),U(e(b),{key:0},{default:t(()=>[a(e(xe),{columns:v,data:e(i).data,bordered:!1,loading:e(u),style:{height:"100%"}},null,8,["data","loading"]),a(e(le),{page:r.value,"onUpdate:page":p[2]||(p[2]=n=>r.value=n),"page-count":e(i).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(h).isMobile?(d(),A(P,{key:1},[e(i).data.length>0?(d(),U(e(b),{key:0,vertical:"",align:"start",size:"small"},{default:t(()=>[e(u)?F("",!0):(d(!0),A(P,{key:0},G(e(i).data,n=>(d(),A("div",la,[a(e(b),null,{default:t(()=>[C("div",null,[a(e(s),{depth:3},{default:t(()=>[l("时间：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(n.created_at),1)]),_:2},1024)]),C("div",na,[a(e(s),{depth:3},{default:t(()=>[l("管理员：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(n.name),1)]),_:2},1024)])]),_:2},1024),n.olo?(d(),A("div",sa,[a(e(s),{depth:3},{default:t(()=>[l("罚款：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(n.olo),1)]),_:2},1024)])):F("",!0),C("div",ua,[a(e(s),{depth:3},{default:t(()=>[l("操作：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(n.active),1)]),_:2},1024)]),C("div",ia,[a(e(s),{depth:3},{default:t(()=>[l("原因：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(n.content),1)]),_:2},1024)]),n.thread_title!==null?(d(),U(e(b),{key:1,style:{"margin-top":"6px"},wrap:!1},{default:t(()=>[a(e(s),{depth:3},{default:t(()=>[l("主题：")]),_:1}),a(e(X),{to:$(n),style:{"max-width":"80%"}},{default:t(()=>[a(e(Y),null,{default:t(()=>[l(T(n.thread_title),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):F("",!0),n.post_content!==null?(d(),U(e(b),{key:2,style:{"margin-top":"6px"},wrap:!1},{default:t(()=>[a(e(s),{depth:3},{default:t(()=>[l("主题：")]),_:1}),a(e(X),{to:$(n),style:{"max-width":"80%"}},{default:t(()=>[a(e(Y),null,{default:t(()=>[l(T(n.post_content),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):F("",!0)]))),256)),a(e(le),{page:r.value,"onUpdate:page":p[3]||(p[3]=n=>r.value=n),"page-count":e(i).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(d(),U(e(ke),{key:1}))],64)):F("",!0)]),_:1})]),_:1}))}}),ra=ue(da,[["__scopeId","data-v-a35e3f42"]]),oa={class:"actives-item"},ma={style:{"margin-left":"auto"}},pa={key:0,style:{"margin-top":"6px"}},fa={key:1,style:{"margin-top":"6px"}},ga={style:{"margin-top":"6px"}},va={style:{"margin-top":"6px"}},_a=B({__name:"TabActivesSuper",setup(V){ne($=>({"2c7ab229":e(I).dividerColor})),H.extend(be),H.extend(ye);const y=E(),h=q(),I=se(),g=S(H().tz("Asia/Shanghai").format("YYYY-MM-DD"));K(g,()=>x());const r=S(1);K(r,()=>x()),pe(()=>x());function o($){return H().add(1,"day").isBefore($)}const v=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"目标饼干",key:"binggan_target",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0}],{loading:u,data:i,send:m}=R($=>ze($),{immediate:!1,initialData:{data:[],last_page:1}});function x(){const $={binggan:y.binggan,date:g.value,page:r.value,show_super:!0};m($)}return($,M)=>(d(),U(e(b),{size:"small"},{default:t(()=>[a(e(he),{"formatted-value":g.value,"onUpdate:formattedValue":M[0]||(M[0]=z=>g.value=z),"value-format":"yyyy-MM-dd",type:"date",size:e(h).isMobile?"small":"medium","is-date-disabled":o},null,8,["formatted-value","size"]),a(e(N),{type:"primary",onClick:M[1]||(M[1]=z=>x())},{default:t(()=>[l(" 查询 ")]),_:1}),a(e(W),{title:"管理员操作记录",size:"small"},{default:t(()=>[e(h).isMobile?F("",!0):(d(),U(e(b),{key:0},{default:t(()=>[a(e(xe),{columns:v,data:e(i).data,bordered:!1,loading:e(u),style:{height:"100%"}},null,8,["data","loading"]),a(e(le),{page:r.value,"onUpdate:page":M[2]||(M[2]=z=>r.value=z),"page-count":e(i).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(h).isMobile?(d(),A(P,{key:1},[e(i).data.length>0?(d(),U(e(b),{key:0,vertical:"",align:"start",size:"small"},{default:t(()=>[e(u)?F("",!0):(d(!0),A(P,{key:0},G(e(i).data,z=>(d(),A("div",oa,[a(e(b),null,{default:t(()=>[C("div",null,[a(e(s),{depth:3},{default:t(()=>[l("时间：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(z.created_at),1)]),_:2},1024)]),C("div",ma,[a(e(s),{depth:3},{default:t(()=>[l("管理员：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(z.name),1)]),_:2},1024)])]),_:2},1024),z.olo?(d(),A("div",pa,[a(e(s),{depth:3},{default:t(()=>[l("目标饼干：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(z.binggan_target),1)]),_:2},1024)])):F("",!0),z.olo?(d(),A("div",fa,[a(e(s),{depth:3},{default:t(()=>[l("罚款：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(z.olo),1)]),_:2},1024)])):F("",!0),C("div",ga,[a(e(s),{depth:3},{default:t(()=>[l("操作：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(z.active),1)]),_:2},1024)]),C("div",va,[a(e(s),{depth:3},{default:t(()=>[l("原因：")]),_:1}),a(e(s),null,{default:t(()=>[l(T(z.content),1)]),_:2},1024)])]))),256)),a(e(le),{page:r.value,"onUpdate:page":M[3]||(M[3]=z=>r.value=z),"page-count":e(i).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(d(),U(e(ke),{key:1}))],64)):F("",!0)]),_:1})]),_:1}))}}),ca=ue(_a,[["__scopeId","data-v-296b2d9d"]]),ba=B({__name:"TabSuperAdmin",setup(V){const y=E(),h=q(),I=ie(),g=S(null),r=S(null),o=S(null),v=S(null),u=S({binggan:"",olo:void 0,message:""}),i=S({uuid:""}),m=S({thread_id:null,forum_id:1,nissin_clear:!0}),x=S({binggan:"",medalId:181}),$=J(()=>I.forumsData.map(k=>({value:k.id,label:k.name}))),M=[{value:181,label:"皇家御用画宗"},{value:182,label:"小火锅守护者"}],z={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},message:{required:!1},olo:{required:!0,message:"请选择要奖罚的olo",type:"number",trigger:"blur"}},f={uuid:{required:!0,message:"请填写目标UUID",trigger:"blur"}},p={thread_id:{required:!0,message:"请填写主题ID",type:"number",trigger:"blur"},forum_id:{required:!0,message:"请选择目标小岛",type:"number",trigger:"blur"},nissin_clear:{required:!0}},n={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},medalId:{required:!0,message:"请选择要发放的成就",type:"number",trigger:"blur"}},{loading:w,send:L,onSuccess:D,onError:fe}=R(k=>Ye(k),{immediate:!1});D(()=>{u.value.binggan=""}),fe(()=>{u.value.binggan=""});function Se(){var k;(k=o.value)==null||k.validate(_=>{if(_){window.$message.error("请确认信息填写完整");return}else{const c={binggan:y.binggan,binggan_target:u.value.binggan,olo_num:u.value.olo,olo_message:u.value.message},Q=u.value.olo>0?"奖励":"罚款",de={title:"奖罚olo",closable:!1,content:`对象饼干：${u.value.binggan} ${Q}${u.value.olo}个olo`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{L(c)}};window.$dialog.warning(de)}})}const{loading:ge,send:Ue,onSuccess:$e,onError:za}=R(k=>Ge(k),{immediate:!1});$e(()=>{i.value.uuid=""});function we(){var k;(k=g.value)==null||k.validate(_=>{if(_){window.$message.error("请确认信息填写完整");return}else{const c={binggan:y.binggan,uuid:i.value.uuid};Ue(c)}})}const{loading:ve,send:Ie,onSuccess:Me,onError:Sa}=R(k=>Le(k),{immediate:!1});Me(()=>{m.value.thread_id=null});function Te(){var k;(k=r.value)==null||k.validate(_=>{if(_){window.$message.error("请确认信息填写完整");return}else{const c={binggan:y.binggan,thread_id:m.value.thread_id,forum_id:m.value.forum_id,nissin_clear:m.value.nissin_clear};Ie(c)}})}const{loading:_e,send:Ae,onSuccess:Ce,onError:Fe}=R(k=>De(k),{immediate:!1});Ce(()=>{x.value.binggan=""}),Fe(()=>{x.value.binggan=""});function Ne(){var k;(k=v.value)==null||k.validate(_=>{if(_){window.$message.error("请确认信息填写完整");return}else{const c={binggan:y.binggan,binggan_target:x.value.binggan,medal_id:x.value.medalId},Q=M.find(Oe=>Oe.value===x.value.medalId),de={title:"发放成就",closable:!1,content:`对象饼干：${x.value.binggan}  发放成就：${Q==null?void 0:Q.label}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Ae(c)}};window.$dialog.warning(de)}})}return(k,_)=>(d(),U(e(b),{style:{"max-width":"450px"}},{default:t(()=>[a(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:t(()=>[a(e(s),{style:{"font-size":"0.875rem"}},{default:t(()=>[l("奖罚olo ")]),_:1})]),_:1}),a(e(ee),{ref_key:"oloFormRef",ref:o,model:u.value,"label-placement":"left","label-width":"auto",rules:z,size:e(h).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:t(()=>[a(e(O),{label:"目标饼干",path:"binggan"},{default:t(()=>[a(e(ae),{value:u.value.binggan,"onUpdate:value":_[0]||(_[0]=c=>u.value.binggan=c)},null,8,["value"])]),_:1}),a(e(O),{label:"奖罚olo",path:"olo"},{default:t(()=>[a(e(ce),{value:u.value.olo,"onUpdate:value":_[1]||(_[1]=c=>u.value.olo=c),max:1e6,min:-1e6,step:1e3,parse:e(Qe),format:e(Je),placeholder:"正数是奖励，负数是罚款"},null,8,["value","parse","format"])]),_:1}),a(e(O),{label:"附带留言",path:"message"},{default:t(()=>[a(e(ae),{value:u.value.message,"onUpdate:value":_[2]||(_[2]=c=>u.value.message=c),placeholder:"将显示在收支记录"},null,8,["value"])]),_:1}),a(e(N),{type:"primary",loading:e(w),disabled:e(w),onClick:Se},{default:t(()=>[l("提交")]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),a(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:t(()=>[a(e(s),{style:{"font-size":"0.875rem"}},{default:t(()=>[l("解锁UUID ")]),_:1})]),_:1}),a(e(ee),{ref_key:"uuidFormRef",ref:g,model:i.value,"label-placement":"left","label-width":"auto",rules:f,size:e(h).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:t(()=>[a(e(O),{label:"解锁UUID",path:"uuid"},{default:t(()=>[a(e(ae),{value:i.value.uuid,"onUpdate:value":_[3]||(_[3]=c=>i.value.uuid=c)},null,8,["value"])]),_:1}),a(e(N),{type:"primary",loading:e(ge),disabled:e(ge),onClick:we},{default:t(()=>[l("提交")]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),a(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:t(()=>[a(e(s),{style:{"font-size":"0.875rem"}},{default:t(()=>[l("主题转区 ")]),_:1})]),_:1}),a(e(ee),{ref_key:"transferFormRef",ref:r,model:m.value,"label-placement":"left","label-width":"auto",rules:p,size:e(h).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:t(()=>[a(e(O),{label:"主题ID",path:"thread_id"},{default:t(()=>[a(e(ce),{"show-button":!1,value:m.value.thread_id,"onUpdate:value":_[4]||(_[4]=c=>m.value.thread_id=c),max:1e6,min:1},null,8,["value"])]),_:1}),a(e(O),{label:"目标小岛",path:"forum_id"},{default:t(()=>[a(e(me),{value:m.value.forum_id,"onUpdate:value":_[5]||(_[5]=c=>m.value.forum_id=c),options:$.value,"consistent-menu-width":!1,style:{width:"300px"}},null,8,["value","options"])]),_:1}),a(e(O),{label:"解锁日清",path:"nissin_clear"},{default:t(()=>[a(e(te),{value:m.value.nissin_clear,"onUpdate:value":_[6]||(_[6]=c=>m.value.nissin_clear=c)},null,8,["value"])]),_:1}),a(e(N),{type:"primary",loading:e(ve),disabled:e(ve),onClick:Te},{default:t(()=>[l("提交")]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),a(e(Z),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:t(()=>[a(e(s),{style:{"font-size":"0.875rem"}},{default:t(()=>[l("发放成就 ")]),_:1})]),_:1}),a(e(ee),{ref_key:"formRef",ref:v,model:x.value,"label-placement":"left","label-width":"auto",rules:n,size:e(h).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:t(()=>[a(e(O),{label:"目标饼干",path:"binggan"},{default:t(()=>[a(e(ae),{value:x.value.binggan,"onUpdate:value":_[7]||(_[7]=c=>x.value.binggan=c)},null,8,["value"])]),_:1}),a(e(O),{label:"发放成就",path:"medalId"},{default:t(()=>[a(e(me),{value:x.value.medalId,"onUpdate:value":_[8]||(_[8]=c=>x.value.medalId=c),options:M,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),a(e(N),{type:"primary",loading:e(_e),disabled:e(_e),onClick:Ne},{default:t(()=>[l("提交")]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"])]),_:1}))}}),ya=C("img",{src:"/ui/my-binggan.png",style:{"max-width":"50px","max-height":"50px"}},null,-1),ha=C("span",null,"管理员中心",-1),xa=B({__name:"AdminCard",setup(V){const y=E(),h=q(),I=ie(),g=J(()=>y.binggan===null||y.userData.binggan.admin_forums===void 0?[]:I.forumsData.reduce((r,o)=>(y.checkAdminForums(o.id)&&r.push({value:o.id,label:o.name,forumId:o.id}),r),[]));return(r,o)=>(d(),U(e(W),{hoverable:"",size:"small"},{default:t(()=>[a(e(b),{vertical:e(h).isMobile},{default:t(()=>[a(e(b),{size:"small",align:"center"},{default:t(()=>[ya,ha]),_:1}),C("div",null,[a(e(s),{depth:3},{default:t(()=>[l("我管理的板块")]),_:1}),a(e(b),null,{default:t(()=>[(d(!0),A(P,null,G(g.value,v=>(d(),U(e(Pe),null,{default:t(()=>[l(T(v.forumId)+". "+T(v.label),1)]),_:2},1024))),256))]),_:1})])]),_:1},8,["vertical"])]),_:1}))}}),ka=C("div",{style:{height:"50px"}},null,-1),Ta=B({__name:"AdminCenter",setup(V){const y=E(),h=q(),I=S();document.title="管理员中心";const g=J(()=>{const r=[{name:"banners",tab:"版头设定",component:ea}];return y.admin.isNormalAdmin&&r.unshift({name:"actives",tab:"管理状况",component:ra}),y.admin.isSuperAdmin?r.concat([{name:"global",tab:"全局设置",component:ta},{name:"super_actives",tab:"超管状况",component:ca},{name:"super_admin",tab:"超管操作",component:ba}]):r});return(r,o)=>(d(),U(e(b),{vertical:"",style:{"margin-top":"8px"}},{default:t(()=>[a(e(xa)),a(e(Re),{type:"line","bar-width":e(h).isMobile?0:void 0,animated:"",size:e(h).isMobile?"small":"large",value:I.value,"onUpdate:value":o[0]||(o[0]=v=>I.value=v)},{default:t(()=>[(d(!0),A(P,null,G(g.value,v=>(d(),U(e(Be),{name:v.name,tab:v.tab,key:v.name},{default:t(()=>[(d(),U(Ee(v.component)))]),_:2},1032,["name","tab"]))),128))]),_:1},8,["bar-width","size","value"]),ka]),_:1}))}});export{Ta as default};
