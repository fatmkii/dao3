import{w as N,A as D,F as k,j as w,c6 as ye,a as i,d as h,a5 as S,$ as b,c7 as De,c8 as G,m as B,_ as ae,b as ue,o as se,M as P,f as c,H as f,i as z,k as _,n as O,z as y,h as R,aG as Ce,l as Ie,aO as Se,g as _e,u as be,q as Te,B as Oe,C as F,Q as V,aT as we,G as X,N as je,c9 as xe}from"./app-Cg7Vcqiz.js";import{u as Me}from"./forums-BBaMkDBE.js";import{i as A,u as Pe}from"./UserCenter-BKTNfmgc.js";import{g as ke}from"./_commonjsHelpers-BosuxZz1.js";import{e as Z}from"./emojiData-nGA-8XBz.js";import{c as Ae}from"./copyToClipboard-BvCi2fuT.js";import{N as ce}from"./Input-D_UZB_Pc.js";import"./Tabs-oUwVUEHD.js";import"./Add-DDhmv_c0.js";import"./use-locale-Bid7opkP.js";const He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ee=w("path",{d:"M12 12h2v12h-2z",fill:"currentColor"},null,-1),$e=w("path",{d:"M18 12h2v12h-2z",fill:"currentColor"},null,-1),Re=w("path",{d:"M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20z",fill:"currentColor"},null,-1),ze=w("path",{d:"M12 2h8v2h-8z",fill:"currentColor"},null,-1),Ne=[Ee,$e,Re,ze],Ue=N({name:"TrashCan",render:function(t,e){return D(),k("svg",He,Ne)}});function ee(r,t,e){return Array.isArray(r)?(r.length=Math.max(r.length,t),r.splice(t,1,e),e):(r[t]=e,e)}function Fe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var W=!1,L=!1,Ve=function(){function r(e){Fe(this,r),this.sourceId=null,this.internalMonitor=e.getMonitor()}var t=r.prototype;return t.receiveHandlerId=function(n){this.sourceId=n},t.getHandlerId=function(){return this.sourceId},t.canDrag=function(){A(!W,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return W=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{W=!1}},t.isDragging=function(){if(!this.sourceId)return!1;A(!L,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return L=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{L=!1}},t.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},t.isDraggingSource=function(n){return this.internalMonitor.isDraggingSource(n)},t.isOverTarget=function(n,o){return this.internalMonitor.isOverTarget(n,o)},t.getTargetIds=function(){return this.internalMonitor.getTargetIds()},t.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},t.getSourceId=function(){return this.internalMonitor.getSourceId()},t.subscribeToOffsetChange=function(n){return this.internalMonitor.subscribeToOffsetChange(n)},t.canDragSource=function(n){return this.internalMonitor.canDragSource(n)},t.canDropOnTarget=function(n){return this.internalMonitor.canDropOnTarget(n)},t.getItemType=function(){return this.internalMonitor.getItemType()},t.getItem=function(){return this.internalMonitor.getItem()},t.getDropResult=function(){return this.internalMonitor.getDropResult()},t.didDrop=function(){return this.internalMonitor.didDrop()},t.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},t.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},t.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},t.getClientOffset=function(){return this.internalMonitor.getClientOffset()},t.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}();function We(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var q=!1,Le=function(){function r(e){We(this,r),this.targetId=null,this.internalMonitor=e.getMonitor()}var t=r.prototype;return t.receiveHandlerId=function(n){this.targetId=n},t.getHandlerId=function(){return this.targetId},t.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},t.canDrop=function(){if(!this.targetId)return!1;A(!q,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return q=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{q=!1}},t.isOver=function(n){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,n):!1},t.getItemType=function(){return this.internalMonitor.getItemType()},t.getItem=function(){return this.internalMonitor.getItem()},t.getDropResult=function(){return this.internalMonitor.getDropResult()},t.didDrop=function(){return this.internalMonitor.didDrop()},t.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},t.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},t.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},t.getClientOffset=function(){return this.internalMonitor.getClientOffset()},t.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}(),qe=function(r){"@swc/helpers - typeof";return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r};function Ge(r){return r?r.__v_isVNode===!0:!1}function Ye(r){return r?r.__v_skip:!1}function Be(r){return Ge(r)&&qe(r.type)!=="symbol"}function Qe(){throw new Error("Only native element nodes can now be passed to Vue DnD connectors.You can either wrap Component into a <div>, or turn it into a drag source or a drop target itself.")}function Je(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Ye(t)&&Qe(),!Be(t)){var n=t;return r(n,e),n}}}function le(r){var t={};return Object.keys(r).forEach(function(e){var n=r[e];if(e.endsWith("Ref"))t[e]=r[e];else{var o=Je(n);t[e]=function(){return o}}}),t}function Y(r,t,e,n){let o=e?e.call(n,r,t):void 0;if(o!==void 0)return!!o;if(r===t)return!0;if(typeof r!="object"||!r||typeof t!="object"||!t)return!1;const a=Object.keys(r),l=Object.keys(t);if(a.length!==l.length)return!1;const u=Object.prototype.hasOwnProperty.bind(t);for(let d=0;d<a.length;d++){const v=a[d];if(!u(v))return!1;const C=r[v],j=t[v];if(o=e?e.call(n,C,j,v):void 0,o===!1||o===void 0&&C!==j)return!1}return!0}function Ke(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function te(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Xe(r,t,e){return t&&te(r.prototype,t),e&&te(r,e),r}var Ze=function(){function r(e){var n=this;Ke(this,r),this.hooks=le({dragSource:function(o,a){n.clearDragSource(),n.dragSourceOptions=a||null,n.dragSourceNode=o,n.reconnectDragSource()},dragPreview:function(o,a){n.clearDragPreview(),n.dragPreviewOptions=a||null,n.dragPreviewNode=o,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceOptionsInternal=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}var t=r.prototype;return t.receiveHandlerId=function(n){this.handlerId!==n&&(this.handlerId=n,this.reconnect())},t.reconnect=function(){var n=this.reconnectDragSource();this.reconnectDragPreview(n)},t.reconnectDragSource=function(){var n=this.dragSource,o=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return o&&this.disconnectDragSource(),this.handlerId?n?(o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=n,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,n,this.dragSourceOptions)),o):(this.lastConnectedDragSource=n,o):o},t.reconnectDragPreview=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=this.dragPreview,a=n||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(a&&this.disconnectDragPreview(),!!this.handlerId){if(!o){this.lastConnectedDragPreview=o;return}a&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=o,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,o,this.dragPreviewOptions))}},t.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},t.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},t.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},t.didDragSourceOptionsChange=function(){return!Y(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},t.didDragPreviewOptionsChange=function(){return!Y(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},t.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)},t.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null)},t.clearDragSource=function(){this.dragSourceNode=null},t.clearDragPreview=function(){this.dragPreviewNode=null},Xe(r,[{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(n){this.dragSourceOptionsInternal=n}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(n){this.dragPreviewOptionsInternal=n}},{key:"dragSource",get:function(){return this.dragSourceNode}},{key:"dragPreview",get:function(){return this.dragPreviewNode}}]),r}();function et(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function re(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function tt(r,t,e){return t&&re(r.prototype,t),e&&re(r,e),r}var rt=function(){function r(e){var n=this;et(this,r),this.hooks=le({dropTarget:function(o,a){n.clearDropTarget(),n.dropTargetOptions=a,ye(o)?n.dropTargetRef=o:n.dropTargetNode=o,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}var t=r.prototype;return t.reconnect=function(){var n=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();n&&this.disconnectDropTarget();var o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}},t.receiveHandlerId=function(n){n!==this.handlerId&&(this.handlerId=n,this.reconnect())},t.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},t.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},t.didOptionsChange=function(){return!Y(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},t.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},t.clearDropTarget=function(){this.dropTargetRef=null,this.dropTargetNode=null},tt(r,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(n){this.dropTargetOptionsInternal=n}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.value}}]),r}();function nt(r,t,e){var n=i(e).getRegistry(),o=n.addTarget(i(r),i(t));return[o,function(){return n.removeTarget(o)}]}function ot(r,t,e){var n=e.getRegistry(),o=n.addSource(r,t);return[o,function(){return n.removeSource(o)}]}function it(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var at=function(){function r(e,n,o){it(this,r),this.spec=e,this.monitor=n,this.connector=o}var t=r.prototype;return t.beginDrag=function(){var n=this.spec,o=this.monitor,a=null;return typeof n.item=="object"?a=n.item:typeof n.item=="function"?a=n.item(o):a={},a??null},t.canDrag=function(){var n=this.spec,o=this.monitor;return typeof n.canDrag=="boolean"?n.canDrag:typeof n.canDrag=="function"?n.canDrag(o):!0},t.isDragging=function(n,o){var a=this.spec,l=this.monitor,u=a.isDragging;return u?u(l):o===n.getSourceId()},t.endDrag=function(){var n=this.spec,o=this.monitor,a=this.connector,l=n.end;l&&l(o.getItem(),o),a.reconnect()},r}();function ut(r,t,e){var n=h(function(){return new at(i(r),i(t),i(e))});return S(function(){n.value.spec=i(r)}),n}function H(){var r=Pe();return A(r!=null,"Expected drag drop context"),r}function st(r){return h(function(){var t=i(r).type;return A(t!=null,"spec.type must be defined"),t})}function ne(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function ct(r){if(Array.isArray(r))return r}function lt(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,l,u;try{for(e=e.call(r);!(o=(l=e.next()).done)&&(n.push(l.value),!(t&&n.length===t));o=!0);}catch(d){a=!0,u=d}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw u}}return n}}function dt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ft(r,t){return ct(r)||lt(r,t)||gt(r,t)||dt()}function gt(r,t){if(r){if(typeof r=="string")return ne(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ne(r,t)}}function pt(r,t,e){var n=H(),o=ut(r,t,e),a=st(r);S(function(u){if(i(a)!=null){var d=ft(ot(i(a),i(o),i(n)),2),v=d[0],C=d[1];i(t).receiveHandlerId(v),i(e).receiveHandlerId(v),u(C)}})}function de(r){return h(function(){return typeof r=="function"?r():r})}function ht(){var r=H();return h(function(){return new Ve(i(r))})}function vt(r,t){var e=H(),n=h(function(){return new Ze(i(e).getBackend())});return S(function(o){n.value.dragSourceOptions=i(r)||null,i(n).reconnect(),o(function(){n.value.disconnectDragSource()})}),S(function(o){n.value.dragPreviewOptions=i(t)||null,i(n).reconnect(),o(function(){n.value.disconnectDragPreview()})}),n}var mt=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,o,a;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(o=n;o--!==0;)if(!r(t[o],e[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[o]))return!1;for(o=n;o--!==0;){var l=a[o];if(!r(t[l],e[l]))return!1}return!0}return t!==t&&e!==e};const fe=ke(mt);function yt(r,t,e){var n=b(i(t)(i(r))),o=function(){var a=i(t)(i(r));fe(n.value,a)||(n.value=a,e&&e())};return S(o),[n,o]}function oe(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Dt(r){if(Array.isArray(r))return r}function Ct(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,l,u;try{for(e=e.call(r);!(o=(l=e.next()).done)&&(n.push(l.value),!(t&&n.length===t));o=!0);}catch(d){a=!0,u=d}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw u}}return n}}function It(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function St(r,t){return Dt(r)||Ct(r,t)||_t(r,t)||It()}function _t(r,t){if(r){if(typeof r=="string")return oe(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oe(r,t)}}function bt(r,t,e){var n=St(yt(r,t,e),2),o=n[0],a=n[1];return S(function(u){var d=i(r).getHandlerId();d!=null&&u(i(r).subscribeToStateChange(a,{handlerIds:[d]}))}),o}function ge(r,t,e){var n=function(){return{}};return bt(t,r||n,function(){return i(e).reconnect()})}function Q(r,t){var e=De({el:null,options:i(t)});S(function(){r(e)},{flush:"post"});var n=function(o,a){ee(e,"el",o);var l=i(t)||a;return fe(e.options,l)||ee(e,"options",l),i(o)};return n}function Tt(r,t){return Q(function(e){i(r).hooks.dragSource()(e.el,e.options)},h(function(){return i(t).options}))}function Ot(r,t){return Q(function(e){i(r).hooks.dragPreview()(e.el,e.options)},h(function(){return i(t).previewOptions}))}function wt(r){var t=de(r),e=ht(),n=vt(h(function(){return i(t).options}),h(function(){return i(t).previewOptions}));return pt(t,e,n),[ge(h(function(){return i(t).collect||function(){return{}}}),e,n),Tt(n,t),Ot(n,t)]}function jt(r){return h(function(){var t=i(r).accept;return A(t!=null,"accept must be defined"),Array.isArray(t)?t:[t]})}function xt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Mt=function(){function r(e,n){xt(this,r),this.spec=e,this.monitor=n}var t=r.prototype;return t.canDrop=function(){var n=this.spec,o=this.monitor;return n.canDrop?n.canDrop(o.getItem(),o):!0},t.hover=function(){var n=this.spec,o=this.monitor;n.hover&&n.hover(o.getItem(),o)},t.drop=function(){var n=this.spec,o=this.monitor;if(n.drop)return n.drop(o.getItem(),o)},r}();function Pt(r,t){var e=h(function(){return new Mt(i(r),i(t))});return S(function(){e.value.spec=i(r)}),e}function ie(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function kt(r){if(Array.isArray(r))return r}function At(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,l,u;try{for(e=e.call(r);!(o=(l=e.next()).done)&&(n.push(l.value),!(t&&n.length===t));o=!0);}catch(d){a=!0,u=d}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw u}}return n}}function Ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Et(r,t){return kt(r)||At(r,t)||$t(r,t)||Ht()}function $t(r,t){if(r){if(typeof r=="string")return ie(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ie(r,t)}}function Rt(r,t,e){var n=H(),o=Pt(r,t),a=jt(r);S(function(u){var d=Et(nt(a,o,n),2),v=d[0],C=d[1];i(t).receiveHandlerId(v),i(e).receiveHandlerId(v),u(C)})}function zt(){var r=H();return h(function(){return new Le(i(r))})}function Nt(r){var t=H(),e=h(function(){return new rt(i(t).getBackend())});return S(function(n){e.value.dropTargetOptions=i(r)||null,e.value.reconnect(),n(function(){return e.value.disconnectDropTarget()})}),e}function Ut(r,t){return Q(function(e){i(r).hooks.dropTarget()(e.el,e.options)},h(function(){return i(t).options}))}function pe(r){var t=de(r),e=zt(),n=Nt(h(function(){return i(t).options}));return Rt(t,e,n),[ge(h(function(){return i(t).collect||function(){return{}}}),e,n),Ut(n,t)]}const Ft=["data-handler-id"],Vt=["src"],Wt=N({__name:"Emoji",props:{emojiSrc:{},index:{}},emits:["deleteEmoji","moveCard"],setup(r,{emit:t}){const e=r,n=t,o=b(),[a,l]=pe({accept:"emojiImg",collect(m){return{handlerId:m.getHandlerId()}},hover(m,x){var $;if(!o.value)return;const T=m.index,E=e.index;if(T===E)return;const I=($=o.value)==null?void 0:$.getBoundingClientRect();(I.bottom-I.top)/2,x.getClientOffset().y-I.top,n("moveCard",T,E),m.index=E}}),[u,d]=wt({type:"emojiImg",item:()=>({index:e.index}),collect:m=>({isDragging:m.isDragging()}),end:(m,x)=>{const T=x.getDropResult();m&&(T==null?void 0:T.name)==="Dustbin"&&n("deleteEmoji",m.index)}}),{handlerId:v}=G(a),{isDragging:C}=G(u),j=h(()=>i(C)?0:1),U=m=>{o.value=d(l(m))};return(m,x)=>(D(),k("div",{ref:U,class:"emoji-box draggable",style:B({opacity:j.value}),"data-handler-id":i(v)},[w("img",{src:m.emojiSrc,class:"emoji-in-box"},null,8,Vt)],12,Ft))}}),Lt=ae(Wt,[["__scopeId","data-v-c3f2b658"]]),qt=N({__name:"ExportEmojiModal",setup(r,{expose:t}){ue(),se();const e=h(()=>{const u=window.innerWidth;return u>=532?"500px":u-32+"px"}),n=b(""),o=b(!1);function a(u){o.value=!0,n.value=u}t({show:a});function l(){Ae(n.value),window.$message.success("已复制到剪贴板")}return(u,d)=>(D(),P(i(Ce),{show:o.value,"onUpdate:show":d[2]||(d[2]=v=>o.value=v),"display-directive":"if"},{default:c(()=>[f(i(z),{style:B({maxWidth:e.value}),title:"我的表情包",closable:"",onClose:d[1]||(d[1]=v=>o.value=!1),size:"small"},{action:c(()=>[f(i(_),{justify:"end"},{default:c(()=>[f(i(O),{onClick:l},{default:c(()=>[y("复制")]),_:1}),f(i(O),{onClick:d[0]||(d[0]=v=>o.value=!1)},{default:c(()=>[y("关闭")]),_:1})]),_:1})]),default:c(()=>[f(i(_),{vertical:""},{default:c(()=>[f(i(R),null,{default:c(()=>[y("可以用来复制给别人")]),_:1}),f(i(ce),{value:n.value,type:"textarea",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]))}}),Gt={class:"emoji-box"},Yt=["src"],Bt=N({__name:"TabEmojis",setup(r){Ie(s=>({da2b105e:i(e).textColor1}));const t=se();ue(),Me(),Se(),_e();const e=be(),n=b(null),o=Z.map(s=>s.id),a=b(o.filter(s=>!t.userData.emoji_excluded.includes(s))),l=h(()=>o.filter(s=>!a.value.includes(s))),u=b([]);function d(s){Array.isArray(s)?u.value=s.map((g,p)=>({emojiSrc:g,id:p})):u.value=[]}t.userLoginStatus===!0&&d(t.userData.my_emoji),Te(()=>t.userDataLoading,s=>{s===!0&&d(t.userData.my_emoji)});const v=(s,g)=>{const p=u.value[s];u.value.splice(s,1),u.value.splice(g,0,p)},[C,j]=pe(()=>({accept:"emojiImg",drop:()=>({name:"Dustbin"}),collect:s=>({isOver:s.isOver(),canDrop:s.canDrop()})})),{canDrop:U,isOver:m}=G(C),x=h(()=>i(U)&&i(m)),T=h(()=>i(x)?e.value.tagColor:e.value.cardColor);function E(s){u.value.splice(s,1)}const I=b(!1),M=b(""),$=h(()=>{var s;return(s=M.value)==null?void 0:s.split(/[\n,，]+/).filter(g=>g!="")});function J(){I.value=!1;const s=$.value.map((g,p)=>({emojiSrc:g,id:p+u.value.length}));u.value=u.value.concat(s),M.value=""}function he(){let s=u.value.map(g=>g.emojiSrc);s=s.filter((g,p)=>s.indexOf(g)===p),u.value=s.map((g,p)=>({emojiSrc:g,id:p}))}function ve(){I.value===!0&&J();const s={binggan:t.binggan,my_emoji:u.value.map(g=>g.emojiSrc),emoji_excluded:l.value};xe(s).then()}function me(){var s;(s=n.value)==null||s.show(u.value.map(g=>g.emojiSrc).join(`,
`))}return(s,g)=>(D(),P(i(_),{vertical:""},{default:c(()=>[f(i(z),{title:"官方表情包",size:"small"},{"header-extra":c(()=>[f(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[y("可以关闭不想要的表情包")]),_:1})]),default:c(()=>[f(i(Oe),{value:a.value,"onUpdate:value":g[0]||(g[0]=p=>a.value=p)},{default:c(()=>[f(i(_),{size:"small"},{default:c(()=>[(D(!0),k(F,null,V(i(Z),p=>(D(),P(i(we),{value:p.id,label:p.name},null,8,["value","label"]))),256))]),_:1})]),_:1},8,["value"])]),_:1}),f(i(z),{title:"我的表情包",size:"small"},{"header-extra":c(()=>[f(i(_),{size:"small",align:"center",wrap:!0},{default:c(()=>[f(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[y("可拖拽排序")]),_:1}),f(i(O),{onClick:he},{default:c(()=>[y("去重")]),_:1}),I.value?X("",!0):(D(),P(i(O),{key:0,type:"primary",onClick:g[1]||(g[1]=p=>I.value=!0)},{default:c(()=>[y("追加")]),_:1}))]),_:1})]),default:c(()=>[f(i(_),{size:"small"},{default:c(()=>[(D(!0),k(F,null,V(u.value,(p,K)=>(D(),P(Lt,{key:p.id,emojiSrc:p.emojiSrc,index:K,onMoveCard:v,onDeleteEmoji:E},null,8,["emojiSrc","index"]))),128))]),_:1}),w("div",{ref:i(j),class:"emoji-trash",style:B({backgroundColor:T.value})},[f(i(R),{depth:3},{default:c(()=>[y("拖到这里删除")]),_:1}),f(i(je),{size:28},{default:c(()=>[f(i(Ue))]),_:1})],4)]),_:1}),I.value?(D(),P(i(z),{key:0,title:"待追加的表情包",size:"small",class:"dash-line"},{"header-extra":c(()=>[f(i(_),{size:"small"},{default:c(()=>[f(i(O),{type:"primary",onClick:J},{default:c(()=>[y("追加")]),_:1}),f(i(O),{type:"default",onClick:g[2]||(g[2]=p=>{I.value=!1,M.value=""})},{default:c(()=>[y("关闭")]),_:1})]),_:1})]),default:c(()=>[f(i(_),{size:"small"},{default:c(()=>[(D(!0),k(F,null,V($.value,(p,K,Qt)=>(D(),k("div",Gt,[w("img",{src:p,class:"emoji-in-box"},null,8,Yt)]))),256))]),_:1}),f(i(ce),{type:"textarea",value:M.value,"onUpdate:value":g[3]||(g[3]=p=>M.value=p),placeholder:"在这里贴网址追加表情包。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):X("",!0),f(i(_),{align:"center",justify:"end"},{default:c(()=>[f(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[y("上面所有变更都要提交后才生效喔")]),_:1}),f(i(O),{onClick:me},{default:c(()=>[y("导出")]),_:1}),f(i(O),{onClick:ve,type:"primary"},{default:c(()=>[y("提交")]),_:1})]),_:1}),f(qt,{ref_key:"ExportEmojiModalCom",ref:n},null,512)]),_:1}))}}),ar=ae(Bt,[["__scopeId","data-v-2374d162"]]);export{ar as default};
