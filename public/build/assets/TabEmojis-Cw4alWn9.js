import{w as z,A as C,F as P,j as w,c4 as Se,a as i,d as v,a7 as _,$ as I,c5 as _e,c6 as G,B as Q,_ as ce,b as be,M as k,f as c,H as l,i as N,k as S,v as T,z as D,h as R,ar as Oe,l as Te,n as we,u as je,p as Me,c as xe,c7 as ke,E as Pe,C as V,Q as L,aE as Ee,G as te,N as Ae,R as He,O as $e}from"./app-BfTmtkkR.js";import{e as re}from"./emojiData-nGA-8XBz.js";import{i as E,u as Re}from"./UserCenter-BMTLGAX7.js";import{g as Ne}from"./_commonjsHelpers-CDgoFxsB.js";import{c as ze}from"./copyToClipboard-BvCi2fuT.js";import{N as le}from"./Input-C5i_M3Sx.js";import{N as Ue}from"./Switch-Q-g3II9Y.js";import"./forums-nUb1a26Z.js";import"./Tabs-C7u4nR1b.js";import"./Add-BBepOlgD.js";import"./use-locale-CFDb4tef.js";const Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ve=w("path",{d:"M12 12h2v12h-2z",fill:"currentColor"},null,-1),Le=w("path",{d:"M18 12h2v12h-2z",fill:"currentColor"},null,-1),We=w("path",{d:"M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20z",fill:"currentColor"},null,-1),qe=w("path",{d:"M12 2h8v2h-8z",fill:"currentColor"},null,-1),Ye=[Ve,Le,We,qe],Ge=z({name:"TrashCan",render:function(t,e){return C(),P("svg",Fe,Ye)}});function ne(r,t,e){return Array.isArray(r)?(r.length=Math.max(r.length,t),r.splice(t,1,e),e):(r[t]=e,e)}function Be(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var W=!1,q=!1,Qe=function(){function r(e){Be(this,r),this.sourceId=null,this.internalMonitor=e.getMonitor()}var t=r.prototype;return t.receiveHandlerId=function(n){this.sourceId=n},t.getHandlerId=function(){return this.sourceId},t.canDrag=function(){E(!W,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return W=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{W=!1}},t.isDragging=function(){if(!this.sourceId)return!1;E(!q,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return q=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{q=!1}},t.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},t.isDraggingSource=function(n){return this.internalMonitor.isDraggingSource(n)},t.isOverTarget=function(n,o){return this.internalMonitor.isOverTarget(n,o)},t.getTargetIds=function(){return this.internalMonitor.getTargetIds()},t.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},t.getSourceId=function(){return this.internalMonitor.getSourceId()},t.subscribeToOffsetChange=function(n){return this.internalMonitor.subscribeToOffsetChange(n)},t.canDragSource=function(n){return this.internalMonitor.canDragSource(n)},t.canDropOnTarget=function(n){return this.internalMonitor.canDropOnTarget(n)},t.getItemType=function(){return this.internalMonitor.getItemType()},t.getItem=function(){return this.internalMonitor.getItem()},t.getDropResult=function(){return this.internalMonitor.getDropResult()},t.didDrop=function(){return this.internalMonitor.didDrop()},t.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},t.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},t.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},t.getClientOffset=function(){return this.internalMonitor.getClientOffset()},t.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}();function Je(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Y=!1,Ke=function(){function r(e){Je(this,r),this.targetId=null,this.internalMonitor=e.getMonitor()}var t=r.prototype;return t.receiveHandlerId=function(n){this.targetId=n},t.getHandlerId=function(){return this.targetId},t.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},t.canDrop=function(){if(!this.targetId)return!1;E(!Y,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Y=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Y=!1}},t.isOver=function(n){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,n):!1},t.getItemType=function(){return this.internalMonitor.getItemType()},t.getItem=function(){return this.internalMonitor.getItem()},t.getDropResult=function(){return this.internalMonitor.getDropResult()},t.didDrop=function(){return this.internalMonitor.didDrop()},t.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},t.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},t.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},t.getClientOffset=function(){return this.internalMonitor.getClientOffset()},t.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}(),Xe=function(r){"@swc/helpers - typeof";return r&&typeof Symbol!="undefined"&&r.constructor===Symbol?"symbol":typeof r};function Ze(r){return r?r.__v_isVNode===!0:!1}function et(r){return r?r.__v_skip:!1}function tt(r){return Ze(r)&&Xe(r.type)!=="symbol"}function rt(){throw new Error("Only native element nodes can now be passed to Vue DnD connectors.You can either wrap Component into a <div>, or turn it into a drag source or a drop target itself.")}function nt(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(et(t)&&rt(),!tt(t)){var n=t;return r(n,e),n}}}function de(r){var t={};return Object.keys(r).forEach(function(e){var n=r[e];if(e.endsWith("Ref"))t[e]=r[e];else{var o=nt(n);t[e]=function(){return o}}}),t}function B(r,t,e,n){let o=e?e.call(n,r,t):void 0;if(o!==void 0)return!!o;if(r===t)return!0;if(typeof r!="object"||!r||typeof t!="object"||!t)return!1;const a=Object.keys(r),d=Object.keys(t);if(a.length!==d.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let g=0;g<a.length;g++){const h=a[g];if(!s(h))return!1;const y=r[h],M=t[h];if(o=e?e.call(n,y,M,h):void 0,o===!1||o===void 0&&y!==M)return!1}return!0}function ot(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function it(r,t,e){return t&&oe(r.prototype,t),e&&oe(r,e),r}var at=function(){function r(e){var n=this;ot(this,r),this.hooks=de({dragSource:function(o,a){n.clearDragSource(),n.dragSourceOptions=a||null,n.dragSourceNode=o,n.reconnectDragSource()},dragPreview:function(o,a){n.clearDragPreview(),n.dragPreviewOptions=a||null,n.dragPreviewNode=o,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceOptionsInternal=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}var t=r.prototype;return t.receiveHandlerId=function(n){this.handlerId!==n&&(this.handlerId=n,this.reconnect())},t.reconnect=function(){var n=this.reconnectDragSource();this.reconnectDragPreview(n)},t.reconnectDragSource=function(){var n=this.dragSource,o=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return o&&this.disconnectDragSource(),this.handlerId?n?(o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=n,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,n,this.dragSourceOptions)),o):(this.lastConnectedDragSource=n,o):o},t.reconnectDragPreview=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=this.dragPreview,a=n||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(a&&this.disconnectDragPreview(),!!this.handlerId){if(!o){this.lastConnectedDragPreview=o;return}a&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=o,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,o,this.dragPreviewOptions))}},t.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},t.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},t.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},t.didDragSourceOptionsChange=function(){return!B(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},t.didDragPreviewOptionsChange=function(){return!B(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},t.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)},t.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null)},t.clearDragSource=function(){this.dragSourceNode=null},t.clearDragPreview=function(){this.dragPreviewNode=null},it(r,[{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(n){this.dragSourceOptionsInternal=n}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(n){this.dragPreviewOptionsInternal=n}},{key:"dragSource",get:function(){return this.dragSourceNode}},{key:"dragPreview",get:function(){return this.dragPreviewNode}}]),r}();function st(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function ut(r,t,e){return t&&ie(r.prototype,t),e&&ie(r,e),r}var ct=function(){function r(e){var n=this;st(this,r),this.hooks=de({dropTarget:function(o,a){n.clearDropTarget(),n.dropTargetOptions=a,Se(o)?n.dropTargetRef=o:n.dropTargetNode=o,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}var t=r.prototype;return t.reconnect=function(){var n=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();n&&this.disconnectDropTarget();var o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}},t.receiveHandlerId=function(n){n!==this.handlerId&&(this.handlerId=n,this.reconnect())},t.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},t.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},t.didOptionsChange=function(){return!B(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},t.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},t.clearDropTarget=function(){this.dropTargetRef=null,this.dropTargetNode=null},ut(r,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(n){this.dropTargetOptionsInternal=n}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.value}}]),r}();function lt(r,t,e){var n=i(e).getRegistry(),o=n.addTarget(i(r),i(t));return[o,function(){return n.removeTarget(o)}]}function dt(r,t,e){var n=e.getRegistry(),o=n.addSource(r,t);return[o,function(){return n.removeSource(o)}]}function ft(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var gt=function(){function r(e,n,o){ft(this,r),this.spec=e,this.monitor=n,this.connector=o}var t=r.prototype;return t.beginDrag=function(){var n=this.spec,o=this.monitor,a=null;return typeof n.item=="object"?a=n.item:typeof n.item=="function"?a=n.item(o):a={},a!=null?a:null},t.canDrag=function(){var n=this.spec,o=this.monitor;return typeof n.canDrag=="boolean"?n.canDrag:typeof n.canDrag=="function"?n.canDrag(o):!0},t.isDragging=function(n,o){var a=this.spec,d=this.monitor,s=a.isDragging;return s?s(d):o===n.getSourceId()},t.endDrag=function(){var n=this.spec,o=this.monitor,a=this.connector,d=n.end;d&&d(o.getItem(),o),a.reconnect()},r}();function pt(r,t,e){var n=v(function(){return new gt(i(r),i(t),i(e))});return _(function(){n.value.spec=i(r)}),n}function A(){var r=Re();return E(r!=null,"Expected drag drop context"),r}function ht(r){return v(function(){var t=i(r).type;return E(t!=null,"spec.type must be defined"),t})}function ae(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function vt(r){if(Array.isArray(r))return r}function mt(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,d,s;try{for(e=e.call(r);!(o=(d=e.next()).done)&&(n.push(d.value),!(t&&n.length===t));o=!0);}catch(g){a=!0,s=g}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dt(r,t){return vt(r)||mt(r,t)||Ct(r,t)||yt()}function Ct(r,t){if(r){if(typeof r=="string")return ae(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ae(r,t)}}function It(r,t,e){var n=A(),o=pt(r,t,e),a=ht(r);_(function(s){if(i(a)!=null){var g=Dt(dt(i(a),i(o),i(n)),2),h=g[0],y=g[1];i(t).receiveHandlerId(h),i(e).receiveHandlerId(h),s(y)}})}function fe(r){return v(function(){return typeof r=="function"?r():r})}function St(){var r=A();return v(function(){return new Qe(i(r))})}function _t(r,t){var e=A(),n=v(function(){return new at(i(e).getBackend())});return _(function(o){n.value.dragSourceOptions=i(r)||null,i(n).reconnect(),o(function(){n.value.disconnectDragSource()})}),_(function(o){n.value.dragPreviewOptions=i(t)||null,i(n).reconnect(),o(function(){n.value.disconnectDragPreview()})}),n}var bt=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,o,a;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(o=n;o--!==0;)if(!r(t[o],e[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[o]))return!1;for(o=n;o--!==0;){var d=a[o];if(!r(t[d],e[d]))return!1}return!0}return t!==t&&e!==e};const ge=Ne(bt);function Ot(r,t,e){var n=I(i(t)(i(r))),o=function(){var a=i(t)(i(r));ge(n.value,a)||(n.value=a,e&&e())};return _(o),[n,o]}function se(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Tt(r){if(Array.isArray(r))return r}function wt(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,d,s;try{for(e=e.call(r);!(o=(d=e.next()).done)&&(n.push(d.value),!(t&&n.length===t));o=!0);}catch(g){a=!0,s=g}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function jt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mt(r,t){return Tt(r)||wt(r,t)||xt(r,t)||jt()}function xt(r,t){if(r){if(typeof r=="string")return se(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return se(r,t)}}function kt(r,t,e){var n=Mt(Ot(r,t,e),2),o=n[0],a=n[1];return _(function(s){var g=i(r).getHandlerId();g!=null&&s(i(r).subscribeToStateChange(a,{handlerIds:[g]}))}),o}function pe(r,t,e){var n=function(){return{}};return kt(t,r||n,function(){return i(e).reconnect()})}function J(r,t){var e=_e({el:null,options:i(t)});_(function(){r(e)},{flush:"post"});var n=function(o,a){ne(e,"el",o);var d=i(t)||a;return ge(e.options,d)||ne(e,"options",d),i(o)};return n}function Pt(r,t){return J(function(e){i(r).hooks.dragSource()(e.el,e.options)},v(function(){return i(t).options}))}function Et(r,t){return J(function(e){i(r).hooks.dragPreview()(e.el,e.options)},v(function(){return i(t).previewOptions}))}function At(r){var t=fe(r),e=St(),n=_t(v(function(){return i(t).options}),v(function(){return i(t).previewOptions}));return It(t,e,n),[pe(v(function(){return i(t).collect||function(){return{}}}),e,n),Pt(n,t),Et(n,t)]}function Ht(r){return v(function(){var t=i(r).accept;return E(t!=null,"accept must be defined"),Array.isArray(t)?t:[t]})}function $t(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Rt=function(){function r(e,n){$t(this,r),this.spec=e,this.monitor=n}var t=r.prototype;return t.canDrop=function(){var n=this.spec,o=this.monitor;return n.canDrop?n.canDrop(o.getItem(),o):!0},t.hover=function(){var n=this.spec,o=this.monitor;n.hover&&n.hover(o.getItem(),o)},t.drop=function(){var n=this.spec,o=this.monitor;if(n.drop)return n.drop(o.getItem(),o)},r}();function Nt(r,t){var e=v(function(){return new Rt(i(r),i(t))});return _(function(){e.value.spec=i(r)}),e}function ue(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function zt(r){if(Array.isArray(r))return r}function Ut(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,d,s;try{for(e=e.call(r);!(o=(d=e.next()).done)&&(n.push(d.value),!(t&&n.length===t));o=!0);}catch(g){a=!0,s=g}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function Ft(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vt(r,t){return zt(r)||Ut(r,t)||Lt(r,t)||Ft()}function Lt(r,t){if(r){if(typeof r=="string")return ue(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ue(r,t)}}function Wt(r,t,e){var n=A(),o=Nt(r,t),a=Ht(r);_(function(s){var g=Vt(lt(a,o,n),2),h=g[0],y=g[1];i(t).receiveHandlerId(h),i(e).receiveHandlerId(h),s(y)})}function qt(){var r=A();return v(function(){return new Ke(i(r))})}function Yt(r){var t=A(),e=v(function(){return new ct(i(t).getBackend())});return _(function(n){e.value.dropTargetOptions=i(r)||null,e.value.reconnect(),n(function(){return e.value.disconnectDropTarget()})}),e}function Gt(r,t){return J(function(e){i(r).hooks.dropTarget()(e.el,e.options)},v(function(){return i(t).options}))}function he(r){var t=fe(r),e=qt(),n=Yt(v(function(){return i(t).options}));return Wt(t,e,n),[pe(v(function(){return i(t).collect||function(){return{}}}),e,n),Gt(n,t)]}const Bt=["data-handler-id"],Qt=["src"],Jt=z({__name:"Emoji",props:{emojiSrc:{},index:{}},emits:["deleteEmoji","moveCard"],setup(r,{emit:t}){const e=r,n=t,o=I(),[a,d]=he({accept:"emojiImg",collect(m){return{handlerId:m.getHandlerId()}},hover(m,x){var b;if(!o.value)return;const O=m.index,H=e.index;if(O===H)return;const j=(b=o.value)==null?void 0:b.getBoundingClientRect();(j.bottom-j.top)/2,x.getClientOffset().y-j.top,n("moveCard",O,H),m.index=H}}),[s,g]=At({type:"emojiImg",item:()=>({index:e.index}),collect:m=>({isDragging:m.isDragging()}),end:(m,x)=>{const O=x.getDropResult();m&&(O==null?void 0:O.name)==="Dustbin"&&n("deleteEmoji",m.index)}}),{handlerId:h}=G(a),{isDragging:y}=G(s),M=v(()=>i(y)?0:1),U=m=>{o.value=g(d(m))};return(m,x)=>(C(),P("div",{ref:U,class:"emoji-box draggable",style:Q({opacity:M.value}),"data-handler-id":i(h)},[w("img",{src:m.emojiSrc,class:"emoji-in-box"},null,8,Qt)],12,Bt))}}),Kt=ce(Jt,[["__scopeId","data-v-c3f2b658"]]),Xt=z({__name:"ExportEmojiModal",setup(r,{expose:t}){const e=be(),n=I(""),o=I(""),a=I(!1);function d(g,h){a.value=!0,n.value=g,o.value=h}t({show:d});function s(){ze(n.value),window.$message.success("已复制到剪贴板")}return(g,h)=>(C(),k(i(Oe),{show:a.value,"onUpdate:show":h[2]||(h[2]=y=>a.value=y),"display-directive":"if"},{default:c(()=>[l(i(N),{style:Q({maxWidth:i(e).modalMaxWidth}),title:o.value,closable:"",onClose:h[1]||(h[1]=y=>a.value=!1),size:"small"},{action:c(()=>[l(i(S),{justify:"end"},{default:c(()=>[l(i(T),{onClick:s},{default:c(()=>[D("复制")]),_:1}),l(i(T),{onClick:h[0]||(h[0]=y=>a.value=!1)},{default:c(()=>[D("关闭")]),_:1})]),_:1})]),default:c(()=>[l(i(S),{vertical:""},{default:c(()=>[l(i(R),null,{default:c(()=>[D("可以用来复制给别人")]),_:1}),l(i(le),{value:n.value,type:"textarea",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1})]),_:1},8,["style","title"])]),_:1},8,["show"]))}}),Zt=r=>(He("data-v-7a5725ef"),r=r(),$e(),r),er=Zt(()=>w("span",null,"启用点击删除功能",-1)),tr={class:"emoji-box"},rr=["src"],nr=z({__name:"TabEmojis",setup(r){Te(u=>({"4e867efa":i(e).textColor1}));const t=we(),e=je(),n=I(null),o=re.map(u=>u.id),a=I(o.filter(u=>!t.userData.emoji_excluded.includes(u))),d=v(()=>o.filter(u=>!a.value.includes(u))),s=I([]);function g(u){Array.isArray(u)?s.value=u.map((f,p)=>({emojiSrc:f,id:p})):s.value=[]}t.userLoginStatus===!0&&g(t.userData.my_emoji),Me(()=>t.userDataLoading,u=>{u===!1&&g(t.userData.my_emoji)});const h=(u,f)=>{const p=s.value[u];s.value.splice(u,1),s.value.splice(f,0,p)},[y,M]=he(()=>({accept:"emojiImg",drop:()=>({name:"Dustbin"}),collect:u=>({isOver:u.isOver(),canDrop:u.canDrop()})})),{canDrop:U,isOver:m}=G(y),x=v(()=>i(U)&&i(m)),O=v(()=>i(x)?e.value.tagColor:e.value.cardColor);function H(u){s.value.splice(u,1)}const j=I(!1);function K(u){j.value===!0&&s.value.splice(u,1)}const b=I(!1),$=I(""),X=v(()=>{var u;return(u=$.value)==null?void 0:u.split(/[\n,，]+/).filter(f=>f!="")});function Z(){b.value=!1;const u=X.value.map((f,p)=>({emojiSrc:f,id:p+s.value.length}));s.value=s.value.concat(u),$.value=""}function ve(){let u=s.value.map(f=>f.emojiSrc);u=u.filter((f,p)=>u.indexOf(f)===p),s.value=u.map((f,p)=>({emojiSrc:f,id:p}))}function me(){b.value===!0&&Z();const u={binggan:t.binggan,my_emoji:s.value.map(f=>f.emojiSrc),emoji_excluded:d.value};ye(u)}const{loading:ee,send:ye,onSuccess:De}=xe(u=>ke(u),{immediate:!1,initialData:[]});De(()=>t.refreshUserData());function Ce(){var u;(u=n.value)==null||u.show(s.value.map(f=>f.emojiSrc).join(`,
`),"我的表情包")}return(u,f)=>(C(),k(i(S),{vertical:""},{default:c(()=>[l(i(N),{title:"官方表情包",size:"small"},{"header-extra":c(()=>[l(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[D("可以关闭不想要的表情包")]),_:1})]),default:c(()=>[l(i(Pe),{value:a.value,"onUpdate:value":f[0]||(f[0]=p=>a.value=p)},{default:c(()=>[l(i(S),{size:"small"},{default:c(()=>[(C(!0),P(V,null,L(i(re),p=>(C(),k(i(Ee),{value:p.id,label:p.name},null,8,["value","label"]))),256))]),_:1})]),_:1},8,["value"])]),_:1}),l(i(N),{title:"我的表情包",size:"small"},{"header-extra":c(()=>[l(i(S),{size:"small",align:"center",wrap:!0},{default:c(()=>[l(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[D("可拖拽排序")]),_:1}),l(i(T),{onClick:ve},{default:c(()=>[D("去重")]),_:1}),b.value?te("",!0):(C(),k(i(T),{key:0,type:"primary",onClick:f[1]||(f[1]=p=>b.value=!0)},{default:c(()=>[D("追加")]),_:1}))]),_:1})]),default:c(()=>[l(i(S),{size:"small",style:{"margin-bottom":"6px"}},{default:c(()=>[l(i(Ue),{value:j.value,"onUpdate:value":f[2]||(f[2]=p=>j.value=p)},null,8,["value"]),er]),_:1}),l(i(S),{size:"small",style:{"touch-action":"none"}},{default:c(()=>[(C(!0),P(V,null,L(s.value,(p,F)=>(C(),k(Kt,{key:p.id,emojiSrc:p.emojiSrc,index:F,onClick:Ie=>K(F),onMoveCard:h,onDeleteEmoji:H},null,8,["emojiSrc","index","onClick"]))),128))]),_:1}),w("div",{ref:i(M),class:"emoji-trash",style:Q({backgroundColor:O.value})},[l(i(R),{depth:3},{default:c(()=>[D("拖到这里删除")]),_:1}),l(i(Ae),{size:28},{default:c(()=>[l(i(Ge))]),_:1})],4)]),_:1}),b.value?(C(),k(i(N),{key:0,title:"待追加的表情包",size:"small",class:"dash-line"},{"header-extra":c(()=>[l(i(S),{size:"small"},{default:c(()=>[l(i(T),{type:"primary",onClick:Z},{default:c(()=>[D("追加")]),_:1}),l(i(T),{type:"default",onClick:f[3]||(f[3]=p=>{b.value=!1,$.value=""})},{default:c(()=>[D("关闭")]),_:1})]),_:1})]),default:c(()=>[l(i(S),{size:"small"},{default:c(()=>[(C(!0),P(V,null,L(X.value,(p,F,Ie)=>(C(),P("div",tr,[w("img",{src:p,class:"emoji-in-box"},null,8,rr)]))),256))]),_:1}),l(i(le),{type:"textarea",value:$.value,"onUpdate:value":f[4]||(f[4]=p=>$.value=p),placeholder:"在这里贴网址追加表情包。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):te("",!0),l(i(S),{align:"center",justify:"end"},{default:c(()=>[l(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[D("上面所有变更都要提交后才生效喔")]),_:1}),l(i(T),{onClick:Ce},{default:c(()=>[D("导出")]),_:1}),l(i(T),{onClick:me,type:"primary",loading:i(ee),disabled:i(ee)},{default:c(()=>[D("提交")]),_:1},8,["loading","disabled"])]),_:1}),l(Xt,{ref_key:"ExportEmojiModalCom",ref:n},null,512)]),_:1}))}}),hr=ce(nr,[["__scopeId","data-v-7a5725ef"]]);export{hr as default};
