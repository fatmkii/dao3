var xe=Object.defineProperty,Ce=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var de=(N,y,r)=>y in N?xe(N,y,{enumerable:!0,configurable:!0,writable:!0,value:r}):N[y]=r,G=(N,y)=>{for(var r in y||(y={}))Ne.call(y,r)&&de(N,r,y[r]);if(re)for(var r of re(y))Ie.call(y,r)&&de(N,r,y[r]);return N},V=(N,y)=>Ce(N,Te(y));import{n as R,X as ge,t as m,l as D,am as ie,aB as W,p as I,j as T,q as e,aw as Ue,x as a,E as l,aY as me,K as Y,aZ as K,S as P,L as d,ax as c,a_ as X,ay as q,a2 as ve,av as Q,a3 as fe,aD as _e,P as J,a$ as Pe,b as M,I as B,M as U,b0 as Z,J as H,i as ee,w as le,Q as ae,B as j,N as L,b1 as te,b2 as ue,C as O,aA as pe,T as De,b3 as $e,b4 as E,aq as Me,ar as ce,ak as ze}from"./vendor-B4iN01yc.js";import{n as He,s as Be}from"./showDialog-DSWrMOA5.js";import{a as ke,u as oe,h as he,e as _,c as A}from"./app-Dz2A8dxx.js";import{u as we}from"./forums-BKAB8EXg.js";import{_ as Se}from"./PostInput.vue_vue_type_script_setup_true_lang-BewXTmey.js";import{r as Ge}from"./emojiData-fUirJeL4.js";import{s as be}from"./subtitles-DW7M559j.js";import{i as ne,a as se}from"./inputNumberFormat-BPxWRFt_.js";const Ye=R({__name:"TabCommon",props:{forumId:{}},setup(N,{expose:y}){const r=ke(),w=oe(),C=we();he(),ge();const p=N,i={subtitle:"[闲聊]",nissinTime:1,antiJingfen:!1,randomHeadsGroup:1,canBattle:!0,titleColor:"#212529",lockedByCoin:null,isPrivate:!1,subId:10},o=m(G({},i)),b=D(()=>r.checkAdminForums(p.forumId)?be.filter(t=>!["[私密]"].includes(t)):be.filter(t=>!["[公告]","[私密]"].includes(t))),g=D(()=>b.value.map(t=>({value:t,label:t})));ie(()=>o.value.isPrivate,t=>{t?o.value.subtitle="[私密]":o.value.subtitle="[闲聊]"});const f=D(()=>{var u;switch((u=C.forumData(p.forumId))==null?void 0:u.is_nissin){case 0:return[{value:1,label:"本小岛不日清"}];case 1:return[{value:1,label:"本小岛固定8点日清"}];case 2:return[{value:1,label:"24小时"},{value:2,label:"48小时"},{value:3,label:"72小时"},{value:7,label:"一周"},{value:1095,label:"长期"}];default:return[]}}),v=D(()=>{var u;switch((u=C.forumData(p.forumId))==null?void 0:u.is_nissin){case 0:return!0;case 1:return!0;case 2:return!1;default:return!0}}),s=D(()=>Ge.map(t=>({value:t.id,label:t.name})));ie(()=>C.forumsDataLoading,t=>{if(t===!1){const u=C.forumData(p.forumId);u!==void 0&&(o.value.randomHeadsGroup=u.default_heads)}},{immediate:!0});const k=m(!1),h=["#b65954","#c78878","#9b7e70","#de7562","#fca44b","#f1c727","#f6da79","#fbda97","#9fc778","#78c79f","#8ab185","#98c0d9","#8691db","#7878c7","#566b7c","#9678c7","#9f78c7","#ca95e9","#ecacc6","#a86fa2","#7e3749"],F=D(()=>{var u;let t=0;return k.value&&(t+=500),(u=o.value.lockedByCoin)!=null&&u&&(t+=500),o.value.isPrivate&&(t+=500),t}),z=D(()=>V(G({},o.value),{titleColor:k.value?o.value.titleColor:null,subId:o.value.subtitle==="[公告]"?o.value.subId:0}));return y({tabNormalInput:z}),W(()=>{o.value=G({},i)}),(t,u)=>(T(),I(e(Ue),{ref:"formRef",model:o.value,"label-placement":"left","label-width":"auto",size:e(w).isMobile?"small":"medium"},{default:a(()=>[l(e(Pe),{cols:"1 600:2","x-gap":12},{default:a(()=>[l(e(me),{style:{"max-width":"18rem"}},{default:a(()=>[l(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[l(e(P),{depth:"3",style:{"font-size":"0.875rem"}},{default:a(()=>[...u[10]||(u[10]=[d("常规选项",-1)])]),_:1})]),_:1}),l(e(c),{label:"副标题",path:"subtitle"},{default:a(()=>[l(e(X),{value:o.value.subtitle,"onUpdate:value":u[0]||(u[0]=n=>o.value.subtitle=n),options:g.value,disabled:o.value.isPrivate,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value","options","disabled"])]),_:1}),o.value.subtitle==="[公告]"?(T(),I(e(c),{key:0,label:"全岛公告",path:"subId"},{default:a(()=>[l(e(q),{value:o.value.subId,"onUpdate:value":u[1]||(u[1]=n=>o.value.subId=n),"checked-value":99,"unchecked-value":10},null,8,["value"])]),_:1})):Y("",!0),l(e(c),{label:"日清时间",path:"nissinTime"},{default:a(()=>[l(e(X),{value:o.value.nissinTime,"onUpdate:value":u[2]||(u[2]=n=>o.value.nissinTime=n),options:f.value,disabled:v.value},null,8,["value","options","disabled"])]),_:1}),l(e(c),{label:"随机头像组",path:"randomHeadsGroup"},{default:a(()=>[l(e(X),{value:o.value.randomHeadsGroup,"onUpdate:value":u[3]||(u[3]=n=>o.value.randomHeadsGroup=n),options:s.value},null,8,["value","options"])]),_:1}),l(e(c),{label:"开启反精分",path:"antiJingfen"},{default:a(()=>[l(e(q),{value:o.value.antiJingfen,"onUpdate:value":u[4]||(u[4]=n=>o.value.antiJingfen=n)},null,8,["value"])]),_:1}),l(e(c),{label:"开启大乱斗",path:"canBattle"},{default:a(()=>[l(e(q),{value:o.value.canBattle,"onUpdate:value":u[5]||(u[5]=n=>o.value.canBattle=n)},null,8,["value"])]),_:1})]),_:1}),l(e(me),{style:{"max-width":"18rem"}},{default:a(()=>[l(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[l(e(P),{depth:"3",style:{"font-size":"0.875rem"}},{default:a(()=>[...u[11]||(u[11]=[d("以下选项每个500olo ",-1)])]),_:1})]),_:1}),l(e(c),{label:"看帖权限",path:"lockedByCoin"},{default:a(()=>[l(e(Q),{value:o.value.lockedByCoin,"onUpdate:value":u[6]||(u[6]=n=>o.value.lockedByCoin=n),placeholder:"需要多少olo才能看",max:25e3,parse:e(se),format:e(ne),min:0,step:5e3,clearable:"",style:{"border-radius":"17px"}},null,8,["value","parse","format"])]),_:1}),l(e(c),{label:"私密主题",path:"isPrivate"},{default:a(()=>[l(e(q),{value:o.value.isPrivate,"onUpdate:value":u[7]||(u[7]=n=>o.value.isPrivate=n)},null,8,["value"])]),_:1}),l(e(c),{label:"标题颜色",path:"titleColor"},{default:a(()=>[l(e(q),{value:k.value,"onUpdate:value":u[8]||(u[8]=n=>k.value=n)},null,8,["value"]),ve(l(e(_e),{value:o.value.titleColor,"onUpdate:value":u[9]||(u[9]=n=>o.value.titleColor=n),modes:["hex"],"show-alpha":!1,swatches:h,style:{"margin-left":"12px"}},null,8,["value"]),[[fe,k.value]])]),_:1}),ve(l(e(c),{label:"合计花费"},{default:a(()=>[l(e(P),{depth:"3"},{default:a(()=>[d(J(F.value)+"个olo ",1)]),_:1})]),_:1},512),[[fe,F.value>0]])]),_:1})]),_:1})]),_:1},8,["model","size"]))}}),Ae=R({__name:"TabCrowd",setup(N,{expose:y}){const r=m(),w=m(M.tz().add(7,"day").format("YYYY-MM-DD 00:00:00")),C=m(1e6);function p(o){return M().subtract(1,"day").isAfter(o)||M().add(1,"month").isBefore(M(o))}const i=D(()=>({title:r.value,olo_target:C.value,end_time:w.value}));return y({crowdParams:i}),(o,b)=>(T(),I(e(B),{vertical:"",style:{"max-width":"450px","margin-top":"8px"}},{default:a(()=>[l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...b[3]||(b[3]=[d("众筹项目",-1)])]),_:1}),l(e(A),{value:r.value,"onUpdate:value":b[0]||(b[0]=g=>r.value=g),placeholder:"必填"},null,8,["value"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...b[4]||(b[4]=[d("目标金额",-1)])]),_:1}),l(e(Q),{value:C.value,"onUpdate:value":b[1]||(b[1]=g=>C.value=g),max:1e7,min:1e5,step:1e5,parse:e(se),format:e(ne)},null,8,["value","parse","format"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...b[5]||(b[5]=[d("结束日期",-1)])]),_:1}),l(e(Z),{"formatted-value":w.value,"onUpdate:formattedValue":b[2]||(b[2]=g=>w.value=g),"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","is-date-disabled":p},null,8,["formatted-value"])]),_:1})]),_:1}))}}),Fe=R({__name:"TabGamble",setup(N,{expose:y}){const r=m(),w=m([]),C=m(M.tz().add(7,"day").format("YYYY-MM-DD 00:00:00")),p=m(3);function i(g){g===1&&p.value<20&&(p.value+=1),g===-1&&p.value>1&&(w.value.splice(p.value-1,1),p.value-=1)}function o(g){return M().subtract(1,"day").isAfter(g)||M().add(1,"month").isBefore(M(g))}const b=D(()=>({title:r.value,options:w.value,end_time:C.value}));return y({gambleParams:b}),(g,f)=>(T(),I(e(B),{vertical:"",style:{"max-width":"450px","margin-top":"8px"}},{default:a(()=>[l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...f[4]||(f[4]=[d("菠菜标题",-1)])]),_:1}),l(e(A),{value:r.value,"onUpdate:value":f[0]||(f[0]=v=>r.value=v),placeholder:"必填"},null,8,["value"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...f[5]||(f[5]=[d("结束日期",-1)])]),_:1}),l(e(Z),{"formatted-value":C.value,"onUpdate:formattedValue":f[1]||(f[1]=v=>C.value=v),"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","is-date-disabled":o},null,8,["formatted-value"])]),_:1}),f[7]||(f[7]=H("span",null,"最长菠菜时间是1个月",-1)),l(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}}),(T(!0),ee(ae,null,le(p.value,v=>(T(),I(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[d(J(`选项#${v}`),1)]),_:2},1024),l(e(A),{value:w.value[v-1],"onUpdate:value":s=>w.value[v-1]=s,maxlength:255},null,8,["value","onUpdate:value"])]),_:2},1024))),256)),l(e(B),{size:"small",align:"center"},{default:a(()=>[l(e(P),{depth:3},{default:a(()=>[...f[6]||(f[6]=[d("选项数量",-1)])]),_:1}),l(e(j),{size:"tiny",circle:"",disabled:p.value===20,onClick:f[2]||(f[2]=v=>i(1))},{icon:a(()=>[l(e(L),null,{default:a(()=>[l(e(te))]),_:1})]),_:1},8,["disabled"]),l(e(j),{size:"tiny",circle:"",disabled:p.value===1,onClick:f[3]||(f[3]=v=>{i(-1)})},{icon:a(()=>[l(e(L),null,{default:a(()=>[l(e(ue))]),_:1})]),_:1},8,["disabled"])]),_:1}),f[8]||(f[8]=H("span",null,"菠菜开奖时只能开一个选项（没有多选，因为赔率不会算……）",-1))]),_:1}))}}),ye=10,Oe=R({__name:"TabHongbao",setup(N,{expose:y}){const r=oe(),w=m(2e4),C=m(10),p=m(1),i=m(),o=m([]),b=m(!1),g=m(!1),f=m(null),v=D(()=>r.isDouble11?Math.ceil(w.value*1.02):r.isOctober1st&&C.value>=20?w.value:Math.ceil(w.value*1.07)),s=m(1);function k(z){z===1&&s.value<ye&&(s.value+=1),z===-1&&s.value>1&&(o.value.splice(s.value-1,1),s.value-=1)}const h=[{value:1,label:"随机olo"},{value:2,label:"定额olo"}],F=D(()=>({olo:w.value,num:C.value,type:p.value,keyword:i.value,message:o.value,olo_hide:b.value,loudspeaker:g.value,pic_url:f.value}));return y({hongbaoParams:F}),(z,t)=>(T(),I(e(B),{vertical:"",style:{"max-width":"450px","margin-top":"8px"}},{default:a(()=>[H("div",null,[l(e(P),{depth:3},{default:a(()=>[...t[9]||(t[9]=[d("温馨提示：",-1)])]),_:1}),e(r).isDouble11?(T(),I(e(P),{key:0},{default:a(()=>[...t[10]||(t[10]=[H("del",null,"在红包总额以外，会追加扣除7%手续费。",-1),H("br",null,null,-1),d(" 活动期间限时手续费2%！ ",-1)])]),_:1})):e(r).isOctober1st?(T(),I(e(P),{key:1},{default:a(()=>[t[12]||(t[12]=H("del",null,"在红包总额以外，会追加扣除7%手续费。",-1)),t[13]||(t[13]=H("br",null,null,-1)),t[14]||(t[14]=d(" 10月1日“红包个数”在20个及以上时，手续费",-1)),l(e(P),{type:"error"},{default:a(()=>[...t[11]||(t[11]=[d("0%!!",-1)])]),_:1})]),_:1})):(T(),I(e(P),{key:2},{default:a(()=>[...t[15]||(t[15]=[d(" 在红包总额以外，会追加扣除7%手续费。 ",-1)])]),_:1}))]),H("div",null,[l(e(P),{depth:3},{default:a(()=>[...t[16]||(t[16]=[d("总共扣除：",-1)])]),_:1}),l(e(P),{type:"warning"},{default:a(()=>[d(J(v.value),1)]),_:1}),t[17]||(t[17]=d("个奥利奥 ",-1))]),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...t[18]||(t[18]=[d("olo类型",-1)])]),_:1}),l(e(X),{value:p.value,"onUpdate:value":t[0]||(t[0]=u=>p.value=u),options:h},null,8,["value"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...t[19]||(t[19]=[d("红包个数",-1)])]),_:1}),l(e(Q),{value:C.value,"onUpdate:value":t[1]||(t[1]=u=>C.value=u),max:600,min:10,step:10},null,8,["value"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...t[20]||(t[20]=[d("olo总额",-1)])]),_:1}),l(e(Q),{value:w.value,"onUpdate:value":t[2]||(t[2]=u=>w.value=u),max:2e6,min:2e4,step:1e4,parse:e(se),format:e(ne)},null,8,["value","parse","format"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...t[21]||(t[21]=[d("红包口令",-1)])]),_:1}),l(e(A),{value:i.value,"onUpdate:value":t[3]||(t[3]=u=>i.value=u),placeholder:"必填"},null,8,["value"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...t[22]||(t[22]=[d("红包封面",-1)])]),_:1}),l(e(A),{value:f.value,"onUpdate:value":t[4]||(t[4]=u=>f.value=u),placeholder:"（可选）填写图片的完整网址"},null,8,["value"])]),_:1}),(T(!0),ee(ae,null,le(s.value,u=>(T(),I(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...t[23]||(t[23]=[d("回复留言",-1)])]),_:1}),l(e(A),{value:o.value[u-1],"onUpdate:value":n=>o.value[u-1]=n,placeholder:`#${u}（可选） 多个留言时随机抽取一个`,maxlength:255},null,8,["value","onUpdate:value","placeholder"])]),_:2},1024))),256)),l(e(B),{size:"small",align:"center"},{default:a(()=>[l(e(P),{depth:3},{default:a(()=>[...t[24]||(t[24]=[d("留言数量",-1)])]),_:1}),l(e(j),{size:"tiny",circle:"",disabled:s.value>=ye,onClick:t[5]||(t[5]=u=>k(1))},{icon:a(()=>[l(e(L),null,{default:a(()=>[l(e(te))]),_:1})]),_:1},8,["disabled"]),l(e(j),{size:"tiny",circle:"",disabled:s.value<=1,onClick:t[6]||(t[6]=u=>{k(-1)})},{icon:a(()=>[l(e(L),null,{default:a(()=>[l(e(ue))]),_:1})]),_:1},8,["disabled"])]),_:1}),l(e(B),{size:"small",align:"center",justify:"end"},{default:a(()=>[l(e(O),{checked:g.value,"onUpdate:checked":t[7]||(t[7]=u=>g.value=u),label:"附带发出大喇叭"},null,8,["checked"]),l(e(O),{checked:b.value,"onUpdate:checked":t[8]||(t[8]=u=>b.value=u),label:"隐藏olo总额"},null,8,["checked"])]),_:1})]),_:1}))}}),Ve=R({__name:"TabVote",setup(N,{expose:y}){const r=m(!1),w=m(1),C=m(),p=m([]),i=m(M.tz().add(7,"day").format("YYYY-MM-DD 00:00:00")),o=m(3);function b(v){v===1&&o.value<20&&(o.value+=1),v===-1&&o.value>1&&(p.value.splice(o.value-1,1),o.value-=1)}function g(v){return M().subtract(1,"day").isAfter(v)||M().add(1,"month").isBefore(M(v))}const f=D(()=>({multiple:r.value,max_choices:r?w.value:1,title:C.value,options:p.value,end_time:i.value}));return y({voteParams:f}),(v,s)=>(T(),I(e(B),{vertical:"",style:{"max-width":"450px","margin-top":"8px"}},{default:a(()=>[l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...s[6]||(s[6]=[d("投票标题",-1)])]),_:1}),l(e(A),{value:C.value,"onUpdate:value":s[0]||(s[0]=k=>C.value=k),placeholder:"必填"},null,8,["value"])]),_:1}),l(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...s[7]||(s[7]=[d("结束日期",-1)])]),_:1}),l(e(Z),{"formatted-value":i.value,"onUpdate:formattedValue":s[1]||(s[1]=k=>i.value=k),"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","is-date-disabled":g},null,8,["formatted-value"])]),_:1}),s[10]||(s[10]=H("span",null,"最长投票时间是1个月",-1)),l(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}}),(T(!0),ee(ae,null,le(o.value,k=>(T(),I(e(U),null,{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[d(J(`选项#${k}`),1)]),_:2},1024),l(e(A),{value:p.value[k-1],"onUpdate:value":h=>p.value[k-1]=h,maxlength:255},null,8,["value","onUpdate:value"])]),_:2},1024))),256)),l(e(B),{size:"small",align:"center"},{default:a(()=>[l(e(P),{depth:3},{default:a(()=>[...s[8]||(s[8]=[d("选项数量",-1)])]),_:1}),l(e(j),{size:"tiny",circle:"",disabled:o.value===20,onClick:s[2]||(s[2]=k=>b(1))},{icon:a(()=>[l(e(L),null,{default:a(()=>[l(e(te))]),_:1})]),_:1},8,["disabled"]),l(e(j),{size:"tiny",circle:"",disabled:o.value===1,onClick:s[3]||(s[3]=k=>{b(-1)})},{icon:a(()=>[l(e(L),null,{default:a(()=>[l(e(ue))]),_:1})]),_:1},8,["disabled"])]),_:1}),l(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}}),l(e(O),{checked:r.value,"onUpdate:checked":s[4]||(s[4]=k=>r.value=k),label:"开启多选"},null,8,["checked"]),r.value?(T(),I(e(U),{key:0},{default:a(()=>[l(e(_),{style:{width:"5.2rem"}},{default:a(()=>[...s[9]||(s[9]=[d("最多选择",-1)])]),_:1}),l(e(Q),{value:w.value,"onUpdate:value":s[5]||(s[5]=k=>w.value=k),max:o.value,min:1,step:1},null,8,["value","max"])]),_:1})):Y("",!0)]),_:1}))}}),Xe=R({__name:"NewThread",props:{forumId:{}},setup(N){const y=ke(),r=oe(),w=we(),C=ge(),p=m(),i=m("normal"),o=m(null);pe(()=>{r.showTopbarNav=!1}),W(()=>{r.showTopbarNav=!0});const b=m(!1);pe(()=>{b.value=!0}),W(()=>{b.value=!1}),document.title="新主题";const g=N,f=m(null),v=D(()=>{var u;return(u=f.value)==null?void 0:u.tabNormalInput}),s=m(null),k=m(null),h=m(null),F=m(null);let z=!1;function t(u,n){let S;if(S={binggan:y.binggan,forum_id:g.forumId,title:u.titleInput,content:u.contentInput,nickname:u.nicknameInput,subtitle:v.value.subtitle,thread_type:i.value,post_with_admin:u.postWithAdmin,anti_jingfen:v.value.antiJingfen,is_delay:u.isDelay,is_private:v.value.isPrivate,can_battle:v.value.canBattle,random_heads_group:v.value.randomHeadsGroup,nissin_time:v.value.nissinTime,title_color:v.value.titleColor,locked_by_coin:v.value.lockedByCoin,sub_id:v.value.subId},i.value==="hongbao"){const x=s.value.hongbaoParams;if(x.type===2&&x.olo%x.num!==0){window.$message.error("选择定额红包时，总额要是红包数量的整倍数喔");return}if(!x.keyword){window.$message.error("必须要输入红包口令");return}S.hongbao_params=V(G({},x),{keyword:x.keyword})}if(i.value==="vote"){const x=F.value.voteParams;if(!x.title){window.$message.error("必须要输入投票标题");return}S.vote_params=V(G({},x),{title:x.title})}if(i.value==="gamble"){const x=h.value.gambleParams;if(!x.title){window.$message.error("必须要输入菠菜标题");return}S.gamble_params=V(G({},x),{title:x.title})}if(i.value==="crowd"){const x=k.value.crowdParams;if(!x.title){window.$message.error("必须要输入众筹标题");return}if(!x.olo_target){window.$message.error("必须要输入众筹金额");return}S.crowd_params=V(G({},x),{title:x.title})}z=!0,He(S).then(x=>{n("success"),z=!1,Be({title:"已发送主题，是否跳转？",mode:"success",onPositiveClick:()=>C.push({name:"thread",params:{threadId:x.thread_id}})})})}return W(()=>{var u;i.value="normal",(u=o.value)==null||u.resetInput()}),(u,n)=>{const S=De("router-link");return T(),I(e(B),{vertical:"",style:{"margin-top":"8px"}},{default:a(()=>{var x;return[l(Se,{ref_key:"postInputCom",ref:o,mode:"thread","forum-id":N.forumId,disabled:!1,handling:e(z),"random-heads-group":(x=v.value)==null?void 0:x.randomHeadsGroup,onContentCommit:t},null,8,["forum-id","handling","random-heads-group"]),l(e($e),{type:"line",animated:"",size:e(r).isMobile?"small":"medium",value:p.value,"onUpdate:value":n[4]||(n[4]=$=>p.value=$)},{default:a(()=>[l(e(E),{name:"常规",tab:"常规","display-directive":"show"},{default:a(()=>[l(e(Ye),{"forum-id":g.forumId,ref_key:"TabCommonComponent",ref:f},null,8,["forum-id"])]),_:1}),l(e(E),{name:"红包",tab:"红包","display-directive":"show"},{default:a(()=>[l(e(O),{checked:i.value,"onUpdate:checked":n[0]||(n[0]=$=>i.value=$),"checked-value":"hongbao","unchecked-value":"normal"},{default:a(()=>[...n[5]||(n[5]=[d(" 开启红包 ",-1)])]),_:1},8,["checked"]),i.value==="hongbao"?(T(),I(e(Oe),{key:0,ref_key:"TabHongbaoCom",ref:s},null,512)):Y("",!0)]),_:1}),l(e(E),{name:"投票",tab:"投票","display-directive":"show"},{default:a(()=>[l(e(O),{checked:i.value,"onUpdate:checked":n[1]||(n[1]=$=>i.value=$),"checked-value":"vote","unchecked-value":"normal"},{default:a(()=>[...n[6]||(n[6]=[d(" 开启投票（1000奥利奥） ",-1)])]),_:1},8,["checked"]),i.value==="vote"?(T(),I(e(Ve),{key:0,ref_key:"TabVoteCom",ref:F},null,512)):Y("",!0)]),_:1}),l(e(E),{name:"菠菜",tab:"菠菜","display-directive":"show"},{default:a(()=>[l(e(O),{checked:i.value,"onUpdate:checked":n[2]||(n[2]=$=>i.value=$),"checked-value":"gamble","unchecked-value":"normal",disabled:N.forumId!==12},{default:a(()=>[...n[7]||(n[7]=[d(" 开启菠菜（500奥利奥） 目前只能在海滨乐园岛开菠菜（避免被日清） ",-1)])]),_:1},8,["checked","disabled"]),i.value==="gamble"?(T(),I(e(Fe),{key:0,ref_key:"TabGambleCom",ref:h},null,512)):Y("",!0)]),_:1}),e(y).checkAdminForums(g.forumId)?(T(),I(e(E),{key:0,name:"众筹",tab:"众筹","display-directive":"show"},{default:a(()=>[l(e(O),{checked:i.value,"onUpdate:checked":n[3]||(n[3]=$=>i.value=$),"checked-value":"crowd","unchecked-value":"normal",disabled:N.forumId!==2},{default:a(()=>[...n[8]||(n[8]=[d(" 开启众筹（仅管理员可见） 目前只能在小火锅调味区开众筹（避免被日清） ",-1)])]),_:1},8,["checked","disabled"]),i.value==="crowd"?(T(),I(e(Ae),{key:0,ref_key:"TabCrowdCom",ref:k},null,512)):Y("",!0)]),_:1})):Y("",!0)]),_:1},8,["size","value"]),b.value?(T(),I(Me,{key:0,to:"#topbar-nav"},[l(S,{to:{name:"forum",params:{forumId:g.forumId}},class:"flex-item-center"},{default:a(()=>[l(e(ce),{tooltip:!1},{default:a(()=>{var $;return[d(J(($=e(w).forumData(N.forumId))==null?void 0:$.name),1)]}),_:1}),l(e(ze),{round:"",class:"forum-tag",size:e(r).isMobile?"small":"medium"},{default:a(()=>[d(J(N.forumId),1)]),_:1},8,["size"])]),_:1},8,["to"])])):Y("",!0)]}),_:1})}}});export{Xe as default};
