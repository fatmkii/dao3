import{w as $,o as F,b as H,g as j,u as q,d as w,$ as A,c as C,A as d,M as m,f as e,H as t,a as o,i as K,k as h,h as n,z as s,s as i,j as p,m as E,G as _,F as G,aI as O,n as R,_ as U}from"./app-D_NcfV-1.js";import{o as V,g as B}from"./randomHeads-BYWTPw78.js";import{u as J}from"./forums-CTMV1z6R.js";import{_ as v}from"./FInput.vue_vue_type_script_setup_true_lang-BVGcDoli.js";import"./showDialog-Dk5mzPwV.js";import"./Checkbox-l2O7OzjD.js";import"./index-npC4OXOH.js";import"./_commonjsHelpers-BosuxZz1.js";import"./use-locale-DCgCYyuK.js";import"./Input-HQSPwFoy.js";import"./Tabs-B-Uzicsn.js";import"./Ellipsis-CfMnH8ho.js";import"./Tag-D-nxO65t.js";import"./emojiData-a0Hcov0e.js";import"./_createCompounder-C2dm3Y_Y.js";import"./download-sglA049O.js";const Q={key:0},W=$({__name:"HongbaoPost",props:{hongbaoData:{},threadId:{},forumId:{}},emits:["refreshPostsList"],setup(D,{emit:k}){const f=F(),S=H();J(),j(),q();const r=D,P=w(()=>({1:"随机",2:"定额"})[r.hongbaoData.type]),T=w(()=>({1:"口令红包",2:"抢答红包",3:"暗号红包"})[r.hongbaoData.key_word_type]),u=A(r.hongbaoData.key_word_type===1?r.hongbaoData.key_word:""),y=k,{loading:z,send:I,onSuccess:M,onError:L}=C(a=>V(a),{immediate:!1});function c(a){if(!a.isTrusted){const N={title:"错误",closable:!1,content:"请不要用脚本抢红包喔",positiveText:"确定"};window.$dialog.warning(N);return}const{timestamp:g,newPostKey:l}=B(a.isTrusted,r.threadId,f.binggan),b={binggan:f.binggan,forum_id:r.forumId,thread_id:r.threadId,content:"--红包口令: "+u.value,nickname:"= =",post_with_admin:!1,new_post_key:l,timestamp:g,hongbao_post_id:r.hongbaoData.id,hongbao_key_word:u.value};I(b)}return M(()=>{u.value="",y("refreshPostsList")}),L(()=>{u.value="",y("refreshPostsList")}),(a,g)=>(d(),m(o(h),{size:"small",vertical:""},{default:e(()=>[t(o(K),{size:"small",bordered:!0,embedded:"",class:"hongbao-post-card"},{default:e(()=>[t(o(h),{vertical:"",align:"center"},{default:e(()=>[t(o(h),{align:"center",size:"small"},{default:e(()=>[t(o(n),{style:{"font-size":"1rem"}},{default:e(()=>[s(i(T.value),1)]),_:1}),p("img",{src:"/hongbao.svg",style:E({height:o(S).isMobile?"30px":"36px"})},null,4)]),_:1}),p("div",null,[a.hongbaoData.question?(d(),m(o(n),{key:0,depth:3},{default:e(()=>[s("提示：")]),_:1})):_("",!0),t(o(n),null,{default:e(()=>[s(i(a.hongbaoData.question),1)]),_:1})]),p("div",null,[a.hongbaoData.key_word?(d(),m(o(n),{key:0,depth:3},{default:e(()=>[s("口令：")]),_:1})):_("",!0),t(o(n),null,{default:e(()=>[s(i(a.hongbaoData.key_word),1)]),_:1})]),p("div",null,[t(o(n),{depth:3},{default:e(()=>[s("数量：")]),_:1}),t(o(n),null,{default:e(()=>[s(i(a.hongbaoData.num_remains)+" /"+i(a.hongbaoData.num_total)+" （"+i(P.value)+"）",1)]),_:1})]),a.hongbaoData.olo_hide?_("",!0):(d(),G("div",Q,[t(o(n),{depth:3},{default:e(()=>[s("总额：")]),_:1}),t(o(n),null,{default:e(()=>{var l;return[s(i((l=a.hongbaoData.olo_total)==null?void 0:l.toLocaleString("en-us"))+" olo ",1)]}),_:1})]))]),_:1})]),_:1}),t(o(h),{size:"small",wrap:!1},{default:e(()=>{var l;return[a.hongbaoData.hongbao_user===null?(d(),m(o(v),{key:0,value:u.value,"onUpdate:value":g[0]||(g[0]=b=>u.value=b),maxlength:255,onKeyup:O(c,["enter"]),style:{"max-width":"328px"},placeholder:a.hongbaoData.num_remains===0?"已经抢光啦":"请输入口令","auto-size":"",disabled:a.hongbaoData.hongbao_user!==null||a.hongbaoData.num_remains===0},null,8,["value","placeholder","disabled"])):(d(),m(o(v),{key:1,value:`你抢到了${(l=a.hongbaoData.hongbao_user)==null?void 0:l.olo.toLocaleString("en-us")}个olo`,maxlength:255,style:{"max-width":"328px"},"auto-size":"",disabled:""},null,8,["value"])),t(o(R),{type:"primary",onClick:c,disabled:a.hongbaoData.hongbao_user!==null||o(z)||a.hongbaoData.num_remains===0},{default:e(()=>[s("抢！")]),_:1},8,["disabled"])]}),_:1})]),_:1}))}}),ga=U(W,[["__scopeId","data-v-02200e4f"]]);export{ga as default};
