import{w as N,A as C,F as k,j as w,c4 as De,a as i,d as v,a5 as _,$ as S,c5 as Ce,c6 as Y,m as B,_ as se,b as Ie,M as P,f as c,H as d,i as z,k as b,n as O,z as D,h as R,aq as Se,l as _e,o as be,u as Te,q as Oe,c as we,c7 as je,B as xe,C as F,Q as V,aD as Me,G as Z,N as Pe}from"./app-CubltHgM.js";import{e as ee}from"./emojiData-nGA-8XBz.js";import{i as A,u as ke}from"./UserCenter-Br-vwi0_.js";import{g as Ae}from"./_commonjsHelpers-BosuxZz1.js";import{c as Ee}from"./copyToClipboard-BvCi2fuT.js";import{N as ue}from"./Input-C5N6R1lB.js";import"./forums-y5ES-6m6.js";import"./Tabs-Bjg3MllE.js";import"./Add-DCC5ygvc.js";import"./use-locale-CHmxQg92.js";const He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},$e=w("path",{d:"M12 12h2v12h-2z",fill:"currentColor"},null,-1),Re=w("path",{d:"M18 12h2v12h-2z",fill:"currentColor"},null,-1),ze=w("path",{d:"M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20z",fill:"currentColor"},null,-1),Ne=w("path",{d:"M12 2h8v2h-8z",fill:"currentColor"},null,-1),Ue=[$e,Re,ze,Ne],Fe=N({name:"TrashCan",render:function(t,e){return C(),k("svg",He,Ue)}});function te(r,t,e){return Array.isArray(r)?(r.length=Math.max(r.length,t),r.splice(t,1,e),e):(r[t]=e,e)}function Ve(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var L=!1,q=!1,Le=function(){function r(e){Ve(this,r),this.sourceId=null,this.internalMonitor=e.getMonitor()}var t=r.prototype;return t.receiveHandlerId=function(n){this.sourceId=n},t.getHandlerId=function(){return this.sourceId},t.canDrag=function(){A(!L,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return L=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{L=!1}},t.isDragging=function(){if(!this.sourceId)return!1;A(!q,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return q=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{q=!1}},t.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},t.isDraggingSource=function(n){return this.internalMonitor.isDraggingSource(n)},t.isOverTarget=function(n,o){return this.internalMonitor.isOverTarget(n,o)},t.getTargetIds=function(){return this.internalMonitor.getTargetIds()},t.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},t.getSourceId=function(){return this.internalMonitor.getSourceId()},t.subscribeToOffsetChange=function(n){return this.internalMonitor.subscribeToOffsetChange(n)},t.canDragSource=function(n){return this.internalMonitor.canDragSource(n)},t.canDropOnTarget=function(n){return this.internalMonitor.canDropOnTarget(n)},t.getItemType=function(){return this.internalMonitor.getItemType()},t.getItem=function(){return this.internalMonitor.getItem()},t.getDropResult=function(){return this.internalMonitor.getDropResult()},t.didDrop=function(){return this.internalMonitor.didDrop()},t.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},t.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},t.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},t.getClientOffset=function(){return this.internalMonitor.getClientOffset()},t.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}();function qe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var W=!1,We=function(){function r(e){qe(this,r),this.targetId=null,this.internalMonitor=e.getMonitor()}var t=r.prototype;return t.receiveHandlerId=function(n){this.targetId=n},t.getHandlerId=function(){return this.targetId},t.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},t.canDrop=function(){if(!this.targetId)return!1;A(!W,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return W=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{W=!1}},t.isOver=function(n){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,n):!1},t.getItemType=function(){return this.internalMonitor.getItemType()},t.getItem=function(){return this.internalMonitor.getItem()},t.getDropResult=function(){return this.internalMonitor.getDropResult()},t.didDrop=function(){return this.internalMonitor.didDrop()},t.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},t.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},t.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},t.getClientOffset=function(){return this.internalMonitor.getClientOffset()},t.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}(),Ye=function(r){"@swc/helpers - typeof";return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r};function Ge(r){return r?r.__v_isVNode===!0:!1}function Be(r){return r?r.__v_skip:!1}function Qe(r){return Ge(r)&&Ye(r.type)!=="symbol"}function Je(){throw new Error("Only native element nodes can now be passed to Vue DnD connectors.You can either wrap Component into a <div>, or turn it into a drag source or a drop target itself.")}function Ke(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Be(t)&&Je(),!Qe(t)){var n=t;return r(n,e),n}}}function ce(r){var t={};return Object.keys(r).forEach(function(e){var n=r[e];if(e.endsWith("Ref"))t[e]=r[e];else{var o=Ke(n);t[e]=function(){return o}}}),t}function G(r,t,e,n){let o=e?e.call(n,r,t):void 0;if(o!==void 0)return!!o;if(r===t)return!0;if(typeof r!="object"||!r||typeof t!="object"||!t)return!1;const a=Object.keys(r),l=Object.keys(t);if(a.length!==l.length)return!1;const s=Object.prototype.hasOwnProperty.bind(t);for(let f=0;f<a.length;f++){const p=a[f];if(!s(p))return!1;const y=r[p],j=t[p];if(o=e?e.call(n,y,j,p):void 0,o===!1||o===void 0&&y!==j)return!1}return!0}function Xe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function re(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ze(r,t,e){return t&&re(r.prototype,t),e&&re(r,e),r}var et=function(){function r(e){var n=this;Xe(this,r),this.hooks=ce({dragSource:function(o,a){n.clearDragSource(),n.dragSourceOptions=a||null,n.dragSourceNode=o,n.reconnectDragSource()},dragPreview:function(o,a){n.clearDragPreview(),n.dragPreviewOptions=a||null,n.dragPreviewNode=o,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceOptionsInternal=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}var t=r.prototype;return t.receiveHandlerId=function(n){this.handlerId!==n&&(this.handlerId=n,this.reconnect())},t.reconnect=function(){var n=this.reconnectDragSource();this.reconnectDragPreview(n)},t.reconnectDragSource=function(){var n=this.dragSource,o=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return o&&this.disconnectDragSource(),this.handlerId?n?(o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=n,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,n,this.dragSourceOptions)),o):(this.lastConnectedDragSource=n,o):o},t.reconnectDragPreview=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=this.dragPreview,a=n||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(a&&this.disconnectDragPreview(),!!this.handlerId){if(!o){this.lastConnectedDragPreview=o;return}a&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=o,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,o,this.dragPreviewOptions))}},t.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},t.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},t.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},t.didDragSourceOptionsChange=function(){return!G(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},t.didDragPreviewOptionsChange=function(){return!G(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},t.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)},t.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null)},t.clearDragSource=function(){this.dragSourceNode=null},t.clearDragPreview=function(){this.dragPreviewNode=null},Ze(r,[{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(n){this.dragSourceOptionsInternal=n}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(n){this.dragPreviewOptionsInternal=n}},{key:"dragSource",get:function(){return this.dragSourceNode}},{key:"dragPreview",get:function(){return this.dragPreviewNode}}]),r}();function tt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function rt(r,t,e){return t&&ne(r.prototype,t),e&&ne(r,e),r}var nt=function(){function r(e){var n=this;tt(this,r),this.hooks=ce({dropTarget:function(o,a){n.clearDropTarget(),n.dropTargetOptions=a,De(o)?n.dropTargetRef=o:n.dropTargetNode=o,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}var t=r.prototype;return t.reconnect=function(){var n=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();n&&this.disconnectDropTarget();var o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}},t.receiveHandlerId=function(n){n!==this.handlerId&&(this.handlerId=n,this.reconnect())},t.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},t.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},t.didOptionsChange=function(){return!G(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},t.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},t.clearDropTarget=function(){this.dropTargetRef=null,this.dropTargetNode=null},rt(r,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(n){this.dropTargetOptionsInternal=n}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.value}}]),r}();function ot(r,t,e){var n=i(e).getRegistry(),o=n.addTarget(i(r),i(t));return[o,function(){return n.removeTarget(o)}]}function it(r,t,e){var n=e.getRegistry(),o=n.addSource(r,t);return[o,function(){return n.removeSource(o)}]}function at(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var st=function(){function r(e,n,o){at(this,r),this.spec=e,this.monitor=n,this.connector=o}var t=r.prototype;return t.beginDrag=function(){var n=this.spec,o=this.monitor,a=null;return typeof n.item=="object"?a=n.item:typeof n.item=="function"?a=n.item(o):a={},a??null},t.canDrag=function(){var n=this.spec,o=this.monitor;return typeof n.canDrag=="boolean"?n.canDrag:typeof n.canDrag=="function"?n.canDrag(o):!0},t.isDragging=function(n,o){var a=this.spec,l=this.monitor,s=a.isDragging;return s?s(l):o===n.getSourceId()},t.endDrag=function(){var n=this.spec,o=this.monitor,a=this.connector,l=n.end;l&&l(o.getItem(),o),a.reconnect()},r}();function ut(r,t,e){var n=v(function(){return new st(i(r),i(t),i(e))});return _(function(){n.value.spec=i(r)}),n}function E(){var r=ke();return A(r!=null,"Expected drag drop context"),r}function ct(r){return v(function(){var t=i(r).type;return A(t!=null,"spec.type must be defined"),t})}function oe(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function lt(r){if(Array.isArray(r))return r}function dt(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,l,s;try{for(e=e.call(r);!(o=(l=e.next()).done)&&(n.push(l.value),!(t&&n.length===t));o=!0);}catch(f){a=!0,s=f}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function ft(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gt(r,t){return lt(r)||dt(r,t)||pt(r,t)||ft()}function pt(r,t){if(r){if(typeof r=="string")return oe(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oe(r,t)}}function ht(r,t,e){var n=E(),o=ut(r,t,e),a=ct(r);_(function(s){if(i(a)!=null){var f=gt(it(i(a),i(o),i(n)),2),p=f[0],y=f[1];i(t).receiveHandlerId(p),i(e).receiveHandlerId(p),s(y)}})}function le(r){return v(function(){return typeof r=="function"?r():r})}function vt(){var r=E();return v(function(){return new Le(i(r))})}function mt(r,t){var e=E(),n=v(function(){return new et(i(e).getBackend())});return _(function(o){n.value.dragSourceOptions=i(r)||null,i(n).reconnect(),o(function(){n.value.disconnectDragSource()})}),_(function(o){n.value.dragPreviewOptions=i(t)||null,i(n).reconnect(),o(function(){n.value.disconnectDragPreview()})}),n}var yt=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,o,a;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(o=n;o--!==0;)if(!r(t[o],e[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[o]))return!1;for(o=n;o--!==0;){var l=a[o];if(!r(t[l],e[l]))return!1}return!0}return t!==t&&e!==e};const de=Ae(yt);function Dt(r,t,e){var n=S(i(t)(i(r))),o=function(){var a=i(t)(i(r));de(n.value,a)||(n.value=a,e&&e())};return _(o),[n,o]}function ie(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Ct(r){if(Array.isArray(r))return r}function It(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,l,s;try{for(e=e.call(r);!(o=(l=e.next()).done)&&(n.push(l.value),!(t&&n.length===t));o=!0);}catch(f){a=!0,s=f}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _t(r,t){return Ct(r)||It(r,t)||bt(r,t)||St()}function bt(r,t){if(r){if(typeof r=="string")return ie(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ie(r,t)}}function Tt(r,t,e){var n=_t(Dt(r,t,e),2),o=n[0],a=n[1];return _(function(s){var f=i(r).getHandlerId();f!=null&&s(i(r).subscribeToStateChange(a,{handlerIds:[f]}))}),o}function fe(r,t,e){var n=function(){return{}};return Tt(t,r||n,function(){return i(e).reconnect()})}function Q(r,t){var e=Ce({el:null,options:i(t)});_(function(){r(e)},{flush:"post"});var n=function(o,a){te(e,"el",o);var l=i(t)||a;return de(e.options,l)||te(e,"options",l),i(o)};return n}function Ot(r,t){return Q(function(e){i(r).hooks.dragSource()(e.el,e.options)},v(function(){return i(t).options}))}function wt(r,t){return Q(function(e){i(r).hooks.dragPreview()(e.el,e.options)},v(function(){return i(t).previewOptions}))}function jt(r){var t=le(r),e=vt(),n=mt(v(function(){return i(t).options}),v(function(){return i(t).previewOptions}));return ht(t,e,n),[fe(v(function(){return i(t).collect||function(){return{}}}),e,n),Ot(n,t),wt(n,t)]}function xt(r){return v(function(){var t=i(r).accept;return A(t!=null,"accept must be defined"),Array.isArray(t)?t:[t]})}function Mt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Pt=function(){function r(e,n){Mt(this,r),this.spec=e,this.monitor=n}var t=r.prototype;return t.canDrop=function(){var n=this.spec,o=this.monitor;return n.canDrop?n.canDrop(o.getItem(),o):!0},t.hover=function(){var n=this.spec,o=this.monitor;n.hover&&n.hover(o.getItem(),o)},t.drop=function(){var n=this.spec,o=this.monitor;if(n.drop)return n.drop(o.getItem(),o)},r}();function kt(r,t){var e=v(function(){return new Pt(i(r),i(t))});return _(function(){e.value.spec=i(r)}),e}function ae(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function At(r){if(Array.isArray(r))return r}function Et(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],o=!0,a=!1,l,s;try{for(e=e.call(r);!(o=(l=e.next()).done)&&(n.push(l.value),!(t&&n.length===t));o=!0);}catch(f){a=!0,s=f}finally{try{!o&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function Ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $t(r,t){return At(r)||Et(r,t)||Rt(r,t)||Ht()}function Rt(r,t){if(r){if(typeof r=="string")return ae(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ae(r,t)}}function zt(r,t,e){var n=E(),o=kt(r,t),a=xt(r);_(function(s){var f=$t(ot(a,o,n),2),p=f[0],y=f[1];i(t).receiveHandlerId(p),i(e).receiveHandlerId(p),s(y)})}function Nt(){var r=E();return v(function(){return new We(i(r))})}function Ut(r){var t=E(),e=v(function(){return new nt(i(t).getBackend())});return _(function(n){e.value.dropTargetOptions=i(r)||null,e.value.reconnect(),n(function(){return e.value.disconnectDropTarget()})}),e}function Ft(r,t){return Q(function(e){i(r).hooks.dropTarget()(e.el,e.options)},v(function(){return i(t).options}))}function ge(r){var t=le(r),e=Nt(),n=Ut(v(function(){return i(t).options}));return zt(t,e,n),[fe(v(function(){return i(t).collect||function(){return{}}}),e,n),Ft(n,t)]}const Vt=["data-handler-id"],Lt=["src"],qt=N({__name:"Emoji",props:{emojiSrc:{},index:{}},emits:["deleteEmoji","moveCard"],setup(r,{emit:t}){const e=r,n=t,o=S(),[a,l]=ge({accept:"emojiImg",collect(m){return{handlerId:m.getHandlerId()}},hover(m,x){var $;if(!o.value)return;const T=m.index,H=e.index;if(T===H)return;const I=($=o.value)==null?void 0:$.getBoundingClientRect();(I.bottom-I.top)/2,x.getClientOffset().y-I.top,n("moveCard",T,H),m.index=H}}),[s,f]=jt({type:"emojiImg",item:()=>({index:e.index}),collect:m=>({isDragging:m.isDragging()}),end:(m,x)=>{const T=x.getDropResult();m&&(T==null?void 0:T.name)==="Dustbin"&&n("deleteEmoji",m.index)}}),{handlerId:p}=Y(a),{isDragging:y}=Y(s),j=v(()=>i(y)?0:1),U=m=>{o.value=f(l(m))};return(m,x)=>(C(),k("div",{ref:U,class:"emoji-box draggable",style:B({opacity:j.value}),"data-handler-id":i(p)},[w("img",{src:m.emojiSrc,class:"emoji-in-box"},null,8,Lt)],12,Vt))}}),Wt=se(qt,[["__scopeId","data-v-c3f2b658"]]),Yt=N({__name:"ExportEmojiModal",setup(r,{expose:t}){const e=Ie(),n=S(""),o=S(""),a=S(!1);function l(f,p){a.value=!0,n.value=f,o.value=p}t({show:l});function s(){Ee(n.value),window.$message.success("已复制到剪贴板")}return(f,p)=>(C(),P(i(Se),{show:a.value,"onUpdate:show":p[2]||(p[2]=y=>a.value=y),"display-directive":"if"},{default:c(()=>[d(i(z),{style:B({maxWidth:i(e).modalMaxWidth}),title:o.value,closable:"",onClose:p[1]||(p[1]=y=>a.value=!1),size:"small"},{action:c(()=>[d(i(b),{justify:"end"},{default:c(()=>[d(i(O),{onClick:s},{default:c(()=>[D("复制")]),_:1}),d(i(O),{onClick:p[0]||(p[0]=y=>a.value=!1)},{default:c(()=>[D("关闭")]),_:1})]),_:1})]),default:c(()=>[d(i(b),{vertical:""},{default:c(()=>[d(i(R),null,{default:c(()=>[D("可以用来复制给别人")]),_:1}),d(i(ue),{value:n.value,type:"textarea",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1})]),_:1},8,["style","title"])]),_:1},8,["show"]))}}),Gt={class:"emoji-box"},Bt=["src"],Qt=N({__name:"TabEmojis",setup(r){_e(u=>({"604b135b":i(e).textColor1}));const t=be(),e=Te(),n=S(null),o=ee.map(u=>u.id),a=S(o.filter(u=>!t.userData.emoji_excluded.includes(u))),l=v(()=>o.filter(u=>!a.value.includes(u))),s=S([]);function f(u){Array.isArray(u)?s.value=u.map((g,h)=>({emojiSrc:g,id:h})):s.value=[]}t.userLoginStatus===!0&&f(t.userData.my_emoji),Oe(()=>t.userDataLoading,u=>{u===!1&&f(t.userData.my_emoji)});const p=(u,g)=>{const h=s.value[u];s.value.splice(u,1),s.value.splice(g,0,h)},[y,j]=ge(()=>({accept:"emojiImg",drop:()=>({name:"Dustbin"}),collect:u=>({isOver:u.isOver(),canDrop:u.canDrop()})})),{canDrop:U,isOver:m}=Y(y),x=v(()=>i(U)&&i(m)),T=v(()=>i(x)?e.value.tagColor:e.value.cardColor);function H(u){s.value.splice(u,1)}const I=S(!1),M=S(""),$=v(()=>{var u;return(u=M.value)==null?void 0:u.split(/[\n,，]+/).filter(g=>g!="")});function J(){I.value=!1;const u=$.value.map((g,h)=>({emojiSrc:g,id:h+s.value.length}));s.value=s.value.concat(u),M.value=""}function pe(){let u=s.value.map(g=>g.emojiSrc);u=u.filter((g,h)=>u.indexOf(g)===h),s.value=u.map((g,h)=>({emojiSrc:g,id:h}))}function he(){I.value===!0&&J();const u={binggan:t.binggan,my_emoji:s.value.map(g=>g.emojiSrc),emoji_excluded:l.value};ve(u)}const{loading:K,send:ve,onSuccess:me}=we(u=>je(u),{immediate:!1,initialData:[]});me(()=>t.refreshUserData());function ye(){var u;(u=n.value)==null||u.show(s.value.map(g=>g.emojiSrc).join(`,
`),"我的表情包")}return(u,g)=>(C(),P(i(b),{vertical:""},{default:c(()=>[d(i(z),{title:"官方表情包",size:"small"},{"header-extra":c(()=>[d(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[D("可以关闭不想要的表情包")]),_:1})]),default:c(()=>[d(i(xe),{value:a.value,"onUpdate:value":g[0]||(g[0]=h=>a.value=h)},{default:c(()=>[d(i(b),{size:"small"},{default:c(()=>[(C(!0),k(F,null,V(i(ee),h=>(C(),P(i(Me),{value:h.id,label:h.name},null,8,["value","label"]))),256))]),_:1})]),_:1},8,["value"])]),_:1}),d(i(z),{title:"我的表情包",size:"small"},{"header-extra":c(()=>[d(i(b),{size:"small",align:"center",wrap:!0},{default:c(()=>[d(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[D("可拖拽排序")]),_:1}),d(i(O),{onClick:pe},{default:c(()=>[D("去重")]),_:1}),I.value?Z("",!0):(C(),P(i(O),{key:0,type:"primary",onClick:g[1]||(g[1]=h=>I.value=!0)},{default:c(()=>[D("追加")]),_:1}))]),_:1})]),default:c(()=>[d(i(b),{size:"small"},{default:c(()=>[(C(!0),k(F,null,V(s.value,(h,X)=>(C(),P(Wt,{key:h.id,emojiSrc:h.emojiSrc,index:X,onMoveCard:p,onDeleteEmoji:H},null,8,["emojiSrc","index"]))),128))]),_:1}),w("div",{ref:i(j),class:"emoji-trash",style:B({backgroundColor:T.value})},[d(i(R),{depth:3},{default:c(()=>[D("拖到这里删除")]),_:1}),d(i(Pe),{size:28},{default:c(()=>[d(i(Fe))]),_:1})],4)]),_:1}),I.value?(C(),P(i(z),{key:0,title:"待追加的表情包",size:"small",class:"dash-line"},{"header-extra":c(()=>[d(i(b),{size:"small"},{default:c(()=>[d(i(O),{type:"primary",onClick:J},{default:c(()=>[D("追加")]),_:1}),d(i(O),{type:"default",onClick:g[2]||(g[2]=h=>{I.value=!1,M.value=""})},{default:c(()=>[D("关闭")]),_:1})]),_:1})]),default:c(()=>[d(i(b),{size:"small"},{default:c(()=>[(C(!0),k(F,null,V($.value,(h,X,Jt)=>(C(),k("div",Gt,[w("img",{src:h,class:"emoji-in-box"},null,8,Bt)]))),256))]),_:1}),d(i(ue),{type:"textarea",value:M.value,"onUpdate:value":g[3]||(g[3]=h=>M.value=h),placeholder:"在这里贴网址追加表情包。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):Z("",!0),d(i(b),{align:"center",justify:"end"},{default:c(()=>[d(i(R),{depth:3,style:{"font-size":"0.875rem"}},{default:c(()=>[D("上面所有变更都要提交后才生效喔")]),_:1}),d(i(O),{onClick:ye},{default:c(()=>[D("导出")]),_:1}),d(i(O),{onClick:he,type:"primary",loading:i(K),disabled:i(K)},{default:c(()=>[D("提交")]),_:1},8,["loading","disabled"])]),_:1}),d(Yt,{ref_key:"ExportEmojiModalCom",ref:n},null,512)]),_:1}))}}),sr=se(Qt,[["__scopeId","data-v-7fa0af7e"]]);export{sr as default};
