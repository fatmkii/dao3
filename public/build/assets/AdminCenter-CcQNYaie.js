import{n as H,U as ne,W as se,t as U,a1 as pe,l as Z,am as X,g as P,p as $,j as m,x as a,K as C,E as t,q as e,F as ee,I as x,i as T,Q as E,w as j,J as F,z as je,L as s,S as d,a_ as ge,a2 as oe,ay as ae,a3 as me,b as R,ac as xe,ad as ze,b0 as we,aH as Se,bf as le,P as M,bl as te,ar as V,bg as Ue,m as Y,aZ as K,aw as Q,ax as O,av as ye,bz as ke,ak as Le,b3 as Ge,b4 as Je,ab as Ke}from"./vendor-B4iN01yc.js";import{a as B,u as D,b as N,_ as ue,c as W}from"./app-BClC4LZ1.js";import{s as Qe,g as We,h as Ze,i as ce,j as Xe,k as et,l as tt,m as at,w as lt}from"./admin-B7dXTrUg.js";import{u as re}from"./forums-CZ5f0w4y.js";import{i as nt,a as st}from"./inputNumberFormat-BPxWRFt_.js";const ut={class:"banner-box-sm"},rt=["src"],it=["src","onClick"],dt=H({__name:"TabBanners",setup(q){ne(r=>({v6a1c8eac:e(A).textColor1}));const w=B();D();const z=re(),A=se(),b=U(0);pe(()=>{g.value.length>0&&(b.value=g.value[0].value)});const g=Z(()=>w.binggan===null||w.userData.binggan.admin_forums===void 0?[]:z.forumsData.reduce((r,l)=>(w.checkAdminForums(l.id)&&r.push({value:l.id,label:l.name,forumId:l.id}),r),[])),o=U([]);X(b,r=>{var l,h;r===void 0?o.value=[]:o.value=[...(h=(l=z.forumData(r))==null?void 0:l.banners)!=null?h:[]]});const y=U(!1),c=U(),n=Z(()=>{var r,l;return(l=(r=c.value)==null?void 0:r.split(/[\n,，]+/).filter(h=>h!=""))!=null?l:[]});function k(){y.value=!1,o.value=o.value.concat(n.value),c.value=void 0,f()}function S(r){var l;(l=o.value)==null||l.splice(r,1)}const{loading:_,send:i,onSuccess:I}=P(r=>Qe(r),{immediate:!1});I(()=>{z.getForumsData()});function f(){const r={binggan:w.binggan,forum_id:b.value,banners:o.value};i(r)}return(r,l)=>(m(),$(e(x),{vertical:""},{default:a(()=>[y.value?(m(),$(e(ee),{key:0,title:"待追加的版头",size:"small",class:"dash-line"},{"header-extra":a(()=>[t(e(x),{size:"small"},{default:a(()=>[t(e(N),{type:"primary",onClick:k},{default:a(()=>[...l[4]||(l[4]=[s("追加",-1)])]),_:1}),t(e(N),{type:"default",onClick:l[0]||(l[0]=h=>{y.value=!1,c.value=void 0})},{default:a(()=>[...l[5]||(l[5]=[s("关闭",-1)])]),_:1})]),_:1})]),default:a(()=>[t(e(x),{size:"small"},{default:a(()=>[(m(!0),T(E,null,j(n.value,(h,L,G)=>(m(),T("div",ut,[F("img",{src:h,style:{width:"100%"}},null,8,rt)]))),256))]),_:1}),t(e(je),{type:"textarea",value:c.value,"onUpdate:value":l[1]||(l[1]=h=>c.value=h),placeholder:"在这里贴网址追加版头。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):C("",!0),t(e(ee),{title:"版头设定",size:"small"},{"header-extra":a(()=>[t(e(x),{size:"small",align:"center",wrap:!0},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...l[6]||(l[6]=[s("选择小岛",-1)])]),_:1}),t(e(ge),{value:b.value,"onUpdate:value":l[2]||(l[2]=h=>b.value=h),options:g.value,"consistent-menu-width":!1,style:{width:"100px"}},null,8,["value","options"]),y.value?C("",!0):(m(),$(e(N),{key:0,type:"primary",onClick:l[3]||(l[3]=h=>y.value=!0)},{default:a(()=>[...l[7]||(l[7]=[s("追加",-1)])]),_:1}))]),_:1})]),default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...l[8]||(l[8]=[s("点击图片移除",-1)])]),_:1}),t(e(x),{wrap:!0,size:[4,4]},{default:a(()=>[(m(!0),T(E,null,j(o.value,(h,L)=>{var G;return m(),T("div",{key:L+((G=b.value)!=null?G:0)*1e3,class:"banner-box"},[F("img",{src:h,class:"banner-img",onClick:ie=>S(L)},null,8,it)])}),128))]),_:1})]),_:1}),t(e(x),{align:"center",justify:"end"},{default:a(()=>[t(e(d),{depth:3,style:{"font-size":"0.875rem"}},{default:a(()=>[...l[9]||(l[9]=[s("各个小岛的变更要分别提交喔",-1)])]),_:1}),t(e(N),{type:"primary",loading:e(_),disable:e(_),onClick:f},{default:a(()=>[...l[10]||(l[10]=[s("提交",-1)])]),_:1},8,["loading","disable"])]),_:1})]),_:1}))}}),ot=ue(dt,[["__scopeId","data-v-35893c7d"]]),mt=H({__name:"TabGlobal",setup(q){ne(c=>({v21c7f12a:e(z).textColor1}));const w=B();D(),re();const z=se(),A=U(!1),b=U(!1),g=U(!1),o=U(!1);w.admin.isSuperAdmin===!0&&We().then(c=>{A.value=c.new_binggan,b.value=c.new_loudspeaker,g.value=c.new_binggan_force,o.value=!0});function y(c,n){const k={binggan:w.binggan,key:c,value:JSON.stringify(n)};Ze(k).then()}return(c,n)=>(m(),$(e(x),{vertical:"",size:[6,12]},{default:a(()=>[t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...n[6]||(n[6]=[s("领取饼干开关",-1)])]),_:1}),t(e(ae),{value:A.value,"onUpdate:value":n[0]||(n[0]=k=>A.value=k),disabled:!o.value,onUpdateValue:n[1]||(n[1]=k=>y("new_binggan",k))},null,8,["value","disabled"]),oe(t(e(d),{depth:3},{default:a(()=>[...n[7]||(n[7]=[s("读取中",-1)])]),_:1},512),[[me,!o.value]])]),_:1}),t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...n[8]||(n[8]=[s("大喇叭开关",-1)])]),_:1}),t(e(ae),{value:b.value,"onUpdate:value":n[2]||(n[2]=k=>b.value=k),disabled:!o.value,onUpdateValue:n[3]||(n[3]=k=>y("new_loudspeaker",k))},null,8,["value","disabled"]),oe(t(e(d),{depth:3},{default:a(()=>[...n[9]||(n[9]=[s("读取中",-1)])]),_:1},512),[[me,!o.value]])]),_:1}),t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...n[10]||(n[10]=[s("强制打开饼干（慎用）",-1)])]),_:1}),t(e(ae),{value:g.value,"onUpdate:value":n[4]||(n[4]=k=>g.value=k),disabled:!o.value,onUpdateValue:n[5]||(n[5]=k=>y("new_binggan_force",k))},null,8,["value","disabled"]),oe(t(e(d),{depth:3},{default:a(()=>[...n[11]||(n[11]=[s("读取中",-1)])]),_:1},512),[[me,!o.value]])]),_:1})]),_:1}))}}),gt=ue(mt,[["__scopeId","data-v-3d2b5c4f"]]),pt={class:"actives-item"},ft={style:{"margin-left":"auto"}},vt={key:0,style:{"margin-top":"6px"}},bt={style:{"margin-top":"6px"}},_t={style:{"margin-top":"6px"}},yt=H({__name:"TabActives",setup(q){ne(f=>({a0198f68:e(A).dividerColor})),R.extend(xe),R.extend(ze);const w=B(),z=D(),A=se(),b=U(R().tz("Asia/Shanghai").format("YYYY-MM-DD"));X(b,()=>S());const g=U(1);X(g,()=>S()),pe(()=>S());function o(f){return R().add(1,"day").isBefore(f)}const y=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0},{title:"主题",key:"thread_title",render:i,resizable:!0},{title:"回复",key:"post_content",render:I,resizable:!0}],{loading:c,data:n,send:k}=P(f=>ce(f),{immediate:!1,initialData:{data:[],last_page:1}});function S(){const f={binggan:w.binggan,date:b.value,page:g.value};k(f)}function _(f){return{name:"thread",params:{threadId:f.thread_id,page:f.floor===null?1:Math.ceil((f.floor+1)/200)},hash:f.floor===null?void 0:"#f_"+f.floor}}function i(f,r){return f.thread_id!==null?Y(te,{to:_(f),target:"_blank"},()=>Y(V,{style:"max-width: 120px"},()=>f.thread_title)):Y(V,{style:"max-width: 120px"},()=>f.thread_title)}function I(f,r){return f.thread_id!==null?Y(te,{to:_(f),target:"_blank"},()=>Y(V,{style:"max-width: 120px"},()=>f.post_content)):Y(V,{style:"max-width: 120px"},()=>f.post_content)}return(f,r)=>(m(),$(e(x),{size:"small"},{default:a(()=>[t(e(we),{"formatted-value":b.value,"onUpdate:formattedValue":r[0]||(r[0]=l=>b.value=l),"value-format":"yyyy-MM-dd",type:"date",size:e(z).isMobile?"small":"medium","is-date-disabled":o},null,8,["formatted-value","size"]),t(e(N),{type:"primary",onClick:r[1]||(r[1]=l=>S())},{default:a(()=>[...r[4]||(r[4]=[s(" 查询 ",-1)])]),_:1}),t(e(ee),{title:"管理员操作记录",size:"small"},{default:a(()=>[e(z).isMobile?C("",!0):(m(),$(e(x),{key:0},{default:a(()=>[t(e(Se),{columns:y,data:e(n).data,bordered:!1,loading:e(c),style:{height:"100%"}},null,8,["data","loading"]),t(e(le),{page:g.value,"onUpdate:page":r[2]||(r[2]=l=>g.value=l),"page-count":e(n).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(m(),T(E,{key:1},[e(n).data.length>0?(m(),$(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e(c)?C("",!0):(m(!0),T(E,{key:0},j(e(n).data,l=>(m(),T("div",pt,[t(e(x),null,{default:a(()=>[F("div",null,[t(e(d),{depth:3},{default:a(()=>[...r[5]||(r[5]=[s("时间：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(l.created_at),1)]),_:2},1024)]),F("div",ft,[t(e(d),{depth:3},{default:a(()=>[...r[6]||(r[6]=[s("管理员：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(l.name),1)]),_:2},1024)])]),_:2},1024),l.olo?(m(),T("div",vt,[t(e(d),{depth:3},{default:a(()=>[...r[7]||(r[7]=[s("罚款：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(l.olo),1)]),_:2},1024)])):C("",!0),F("div",bt,[t(e(d),{depth:3},{default:a(()=>[...r[8]||(r[8]=[s("操作：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(l.active),1)]),_:2},1024)]),F("div",_t,[t(e(d),{depth:3},{default:a(()=>[...r[9]||(r[9]=[s("原因：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(l.content),1)]),_:2},1024)]),l.thread_title!==null?(m(),$(e(x),{key:1,style:{"margin-top":"6px"},wrap:!1},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...r[10]||(r[10]=[s("主题：",-1)])]),_:1}),t(e(te),{to:_(l),style:{"max-width":"80%"}},{default:a(()=>[t(e(V),null,{default:a(()=>[s(M(l.thread_title),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):C("",!0),l.post_content!==null?(m(),$(e(x),{key:2,style:{"margin-top":"6px"},wrap:!1},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...r[11]||(r[11]=[s("主题：",-1)])]),_:1}),t(e(te),{to:_(l),style:{"max-width":"80%"}},{default:a(()=>[t(e(V),null,{default:a(()=>[s(M(l.post_content),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):C("",!0)]))),256)),t(e(le),{page:g.value,"onUpdate:page":r[3]||(r[3]=l=>g.value=l),"page-count":e(n).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(m(),$(e(Ue),{key:1}))],64)):C("",!0)]),_:1})]),_:1}))}}),kt=ue(yt,[["__scopeId","data-v-a35e3f42"]]),xt={class:"actives-item"},zt={style:{"margin-left":"auto"}},wt={key:0,style:{"margin-top":"6px"}},St={key:1,style:{"margin-top":"6px"}},Ut={style:{"margin-top":"6px"}},ct={style:{"margin-top":"6px"}},It=H({__name:"TabActivesSuper",setup(q){ne(_=>({v2c7ab229:e(A).dividerColor})),R.extend(xe),R.extend(ze);const w=B(),z=D(),A=se(),b=U(R().tz("Asia/Shanghai").format("YYYY-MM-DD"));X(b,()=>S());const g=U(1);X(g,()=>S()),pe(()=>S());function o(_){return R().add(1,"day").isBefore(_)}const y=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"目标饼干",key:"binggan_target",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0}],{loading:c,data:n,send:k}=P(_=>ce(_),{immediate:!1,initialData:{data:[],last_page:1}});function S(){const _={binggan:w.binggan,date:b.value,page:g.value,show_super:!0};k(_)}return(_,i)=>(m(),$(e(x),{size:"small"},{default:a(()=>[t(e(we),{"formatted-value":b.value,"onUpdate:formattedValue":i[0]||(i[0]=I=>b.value=I),"value-format":"yyyy-MM-dd",type:"date",size:e(z).isMobile?"small":"medium","is-date-disabled":o},null,8,["formatted-value","size"]),t(e(N),{type:"primary",onClick:i[1]||(i[1]=I=>S())},{default:a(()=>[...i[4]||(i[4]=[s(" 查询 ",-1)])]),_:1}),t(e(ee),{title:"管理员操作记录",size:"small"},{default:a(()=>[e(z).isMobile?C("",!0):(m(),$(e(x),{key:0},{default:a(()=>[t(e(Se),{columns:y,data:e(n).data,bordered:!1,loading:e(c),style:{height:"100%"}},null,8,["data","loading"]),t(e(le),{page:g.value,"onUpdate:page":i[2]||(i[2]=I=>g.value=I),"page-count":e(n).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(m(),T(E,{key:1},[e(n).data.length>0?(m(),$(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e(c)?C("",!0):(m(!0),T(E,{key:0},j(e(n).data,I=>(m(),T("div",xt,[t(e(x),null,{default:a(()=>[F("div",null,[t(e(d),{depth:3},{default:a(()=>[...i[5]||(i[5]=[s("时间：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(I.created_at),1)]),_:2},1024)]),F("div",zt,[t(e(d),{depth:3},{default:a(()=>[...i[6]||(i[6]=[s("管理员：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(I.name),1)]),_:2},1024)])]),_:2},1024),I.olo?(m(),T("div",wt,[t(e(d),{depth:3},{default:a(()=>[...i[7]||(i[7]=[s("目标饼干：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(I.binggan_target),1)]),_:2},1024)])):C("",!0),I.olo?(m(),T("div",St,[t(e(d),{depth:3},{default:a(()=>[...i[8]||(i[8]=[s("罚款：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(I.olo),1)]),_:2},1024)])):C("",!0),F("div",Ut,[t(e(d),{depth:3},{default:a(()=>[...i[9]||(i[9]=[s("操作：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(I.active),1)]),_:2},1024)]),F("div",ct,[t(e(d),{depth:3},{default:a(()=>[...i[10]||(i[10]=[s("原因：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[s(M(I.content),1)]),_:2},1024)])]))),256)),t(e(le),{page:g.value,"onUpdate:page":i[3]||(i[3]=I=>g.value=I),"page-count":e(n).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(m(),$(e(Ue),{key:1}))],64)):C("",!0)]),_:1})]),_:1}))}}),$t=ue(It,[["__scopeId","data-v-296b2d9d"]]),Mt={key:0,style:{"margin-top":"10px"}},Tt={key:1,style:{"margin-top":"10px"}},At=H({__name:"TabSuperAdmin",setup(q){const w=B(),z=D(),A=re(),b=U(null),g=U(null),o=U(null),y=U(null),c=U(null),n=U({binggan:"",olo:void 0,message:""}),k=U({uuid:""}),S=U({thread_id:null,forum_id:1,nissin_clear:!0}),_=U({binggan:"",medalId:181}),i=U({watermark_string:"",result_binggan:null,result_thread_id:null}),I=Z(()=>A.forumsData.map(p=>({value:p.id,label:p.name}))),f=[{value:181,label:"皇家御用画宗"},{value:182,label:"小火锅守护者"}],r={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},message:{required:!1},olo:{required:!0,message:"请选择要奖罚的olo",type:"number",trigger:"blur"}},l={uuid:{required:!0,message:"请填写目标UUID",trigger:"blur"}},h={thread_id:{required:!0,message:"请填写主题ID",type:"number",trigger:"blur"},forum_id:{required:!0,message:"请选择目标小岛",type:"number",trigger:"blur"},nissin_clear:{required:!0}},L={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},medalId:{required:!0,message:"请选择要发放的成就",type:"number",trigger:"blur"}},G={watermark_string:{required:!0,message:"请填写混淆后的水印字符串",trigger:"blur"}},{loading:ie,send:Ie,onSuccess:$e,onError:Me}=P(p=>Xe(p),{immediate:!1});$e(()=>{n.value.binggan=""}),Me(()=>{n.value.binggan=""});function Te(){var p;(p=o.value)==null||p.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const v={binggan:w.binggan,binggan_target:n.value.binggan,olo_num:n.value.olo,olo_message:n.value.message},J=n.value.olo>0?"奖励":"罚款",de={title:"奖罚olo",closable:!1,content:`对象饼干：${n.value.binggan} ${J}${n.value.olo}个olo`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Ie(v)}};window.$dialog.warning(de)}})}const{loading:fe,send:Ae,onSuccess:he,onError:Ft}=P(p=>et(p),{immediate:!1});he(()=>{k.value.uuid=""});function Fe(){var p;(p=b.value)==null||p.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const v={binggan:w.binggan,uuid:k.value.uuid};Ae(v)}})}const{loading:ve,send:Ce,onSuccess:Ne,onError:Ct}=P(p=>tt(p),{immediate:!1});Ne(()=>{S.value.thread_id=null});function Oe(){var p;(p=g.value)==null||p.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const v={binggan:w.binggan,thread_id:S.value.thread_id,forum_id:S.value.forum_id,nissin_clear:S.value.nissin_clear};Ce(v)}})}const{loading:be,send:Pe,onSuccess:Re,onError:Ee}=P(p=>at(p),{immediate:!1});Re(()=>{_.value.binggan=""}),Ee(()=>{_.value.binggan=""});function He(){var p;(p=y.value)==null||p.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{const v={binggan:w.binggan,binggan_target:_.value.binggan,medal_id:_.value.medalId},J=f.find(Ye=>Ye.value===_.value.medalId),de={title:"发放成就",closable:!1,content:`对象饼干：${_.value.binggan}  发放成就：${J==null?void 0:J.label}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Pe(v)}};window.$dialog.warning(de)}})}const{loading:_e,send:Be,onSuccess:De,onError:qe}=P(p=>lt(p),{immediate:!1});De(p=>{i.value.result_binggan=p.data.binggan,i.value.result_thread_id=p.data.thread_id}),qe(()=>{i.value.result_binggan=null,i.value.result_thread_id=null});function Ve(){var p;(p=c.value)==null||p.validate(u=>{if(u){window.$message.error("请确认信息填写完整");return}else{i.value.result_binggan=null,i.value.result_thread_id=null;const v={watermark_string:i.value.watermark_string};Be(v)}})}return(p,u)=>(m(),$(e(x),{style:{"max-width":"450px"}},{default:a(()=>[t(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[10]||(u[10]=[s("奖罚olo ",-1)])]),_:1})]),_:1}),t(e(Q),{ref_key:"oloFormRef",ref:o,model:n.value,"label-placement":"left","label-width":"auto",rules:r,size:e(z).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:a(()=>[t(e(O),{label:"目标饼干",path:"binggan"},{default:a(()=>[t(e(W),{value:n.value.binggan,"onUpdate:value":u[0]||(u[0]=v=>n.value.binggan=v)},null,8,["value"])]),_:1}),t(e(O),{label:"奖罚olo",path:"olo"},{default:a(()=>[t(e(ye),{value:n.value.olo,"onUpdate:value":u[1]||(u[1]=v=>n.value.olo=v),max:1e6,min:-1e6,step:1e3,parse:e(st),format:e(nt),placeholder:"正数是奖励，负数是罚款"},null,8,["value","parse","format"])]),_:1}),t(e(O),{label:"附带留言",path:"message"},{default:a(()=>[t(e(W),{value:n.value.message,"onUpdate:value":u[2]||(u[2]=v=>n.value.message=v),placeholder:"将显示在收支记录"},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(ie),disabled:e(ie),onClick:Te},{default:a(()=>[...u[11]||(u[11]=[s("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[12]||(u[12]=[s("解锁UUID ",-1)])]),_:1})]),_:1}),t(e(Q),{ref_key:"uuidFormRef",ref:b,model:k.value,"label-placement":"left","label-width":"auto",rules:l,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(O),{label:"解锁UUID",path:"uuid"},{default:a(()=>[t(e(W),{value:k.value.uuid,"onUpdate:value":u[3]||(u[3]=v=>k.value.uuid=v)},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(fe),disabled:e(fe),onClick:Fe},{default:a(()=>[...u[13]||(u[13]=[s("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[14]||(u[14]=[s("主题转区 ",-1)])]),_:1})]),_:1}),t(e(Q),{ref_key:"transferFormRef",ref:g,model:S.value,"label-placement":"left","label-width":"auto",rules:h,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(O),{label:"主题ID",path:"thread_id"},{default:a(()=>[t(e(ye),{"show-button":!1,value:S.value.thread_id,"onUpdate:value":u[4]||(u[4]=v=>S.value.thread_id=v),max:1e6,min:1},null,8,["value"])]),_:1}),t(e(O),{label:"目标小岛",path:"forum_id"},{default:a(()=>[t(e(ge),{value:S.value.forum_id,"onUpdate:value":u[5]||(u[5]=v=>S.value.forum_id=v),options:I.value,"consistent-menu-width":!1,style:{width:"300px"}},null,8,["value","options"])]),_:1}),t(e(O),{label:"解锁日清",path:"nissin_clear"},{default:a(()=>[t(e(ae),{value:S.value.nissin_clear,"onUpdate:value":u[6]||(u[6]=v=>S.value.nissin_clear=v)},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(ve),disabled:e(ve),onClick:Oe},{default:a(()=>[...u[15]||(u[15]=[s("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[16]||(u[16]=[s("发放成就 ",-1)])]),_:1})]),_:1}),t(e(Q),{ref_key:"formRef",ref:y,model:_.value,"label-placement":"left","label-width":"auto",rules:L,size:e(z).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:a(()=>[t(e(O),{label:"目标饼干",path:"binggan"},{default:a(()=>[t(e(W),{value:_.value.binggan,"onUpdate:value":u[7]||(u[7]=v=>_.value.binggan=v)},null,8,["value"])]),_:1}),t(e(O),{label:"发放成就",path:"medalId"},{default:a(()=>[t(e(ge),{value:_.value.medalId,"onUpdate:value":u[8]||(u[8]=v=>_.value.medalId=v),options:f,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(be),disabled:e(be),onClick:He},{default:a(()=>[...u[17]||(u[17]=[s("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(K),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...u[18]||(u[18]=[s("解密水印 ",-1)])]),_:1})]),_:1}),t(e(Q),{ref_key:"watermarkFormRef",ref:c,model:i.value,"label-placement":"left","label-width":"auto",rules:G,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(O),{label:"水印字符串",path:"watermark_string"},{default:a(()=>[t(e(W),{value:i.value.watermark_string,"onUpdate:value":u[9]||(u[9]=v=>i.value.watermark_string=v)},null,8,["value"])]),_:1}),t(e(N),{type:"primary",loading:e(_e),disabled:e(_e),onClick:Ve},{default:a(()=>[...u[19]||(u[19]=[s("提交",-1)])]),_:1},8,["loading","disabled"]),i.value.result_binggan!==null?(m(),T("div",Mt,[t(e(d),null,{default:a(()=>[s("饼干："+M(i.value.result_binggan),1)]),_:1}),u[20]||(u[20]=F("br",null,null,-1)),t(e(ke),{href:"/thread/"+i.value.result_thread_id,target:"_blank"},{default:a(()=>[s(" 跳转到主题 (ID: "+M(i.value.result_thread_id)+") ",1)]),_:1},8,["href"])])):i.value.result_thread_id!==null?(m(),T("div",Tt,[t(e(d),{type:"warning"},{default:a(()=>[...u[21]||(u[21]=[s("未登录用户（无饼干）",-1)])]),_:1}),u[22]||(u[22]=F("br",null,null,-1)),t(e(ke),{href:"/thread/"+i.value.result_thread_id,target:"_blank"},{default:a(()=>[s(" 跳转到主题 (ID: "+M(i.value.result_thread_id)+") ",1)]),_:1},8,["href"])])):C("",!0)]),_:1},8,["model","size"])]),_:1}))}}),ht=H({__name:"AdminCard",setup(q){const w=B(),z=D(),A=re(),b=Z(()=>w.binggan===null||w.userData.binggan.admin_forums===void 0?[]:A.forumsData.reduce((g,o)=>(w.checkAdminForums(o.id)&&g.push({value:o.id,label:o.name,forumId:o.id}),g),[]));return(g,o)=>(m(),$(e(ee),{hoverable:"",size:"small"},{default:a(()=>[t(e(x),{vertical:e(z).isMobile},{default:a(()=>[t(e(x),{size:"small",align:"center"},{default:a(()=>[...o[0]||(o[0]=[F("img",{src:"/ui/my-binggan.png",style:{"max-width":"50px","max-height":"50px"}},null,-1),F("span",null,"管理员中心",-1)])]),_:1}),F("div",null,[t(e(d),{depth:3},{default:a(()=>[...o[1]||(o[1]=[s("我管理的板块",-1)])]),_:1}),t(e(x),null,{default:a(()=>[(m(!0),T(E,null,j(b.value,y=>(m(),$(e(Le),null,{default:a(()=>[s(M(y.forumId)+". "+M(y.label),1)]),_:2},1024))),256))]),_:1})])]),_:1},8,["vertical"])]),_:1}))}}),Ht=H({__name:"AdminCenter",setup(q){const w=B(),z=D(),A=U();document.title="管理员中心";const b=Z(()=>{const g=[{name:"banners",tab:"版头设定",component:ot}];return w.admin.isNormalAdmin&&g.unshift({name:"actives",tab:"管理状况",component:kt}),w.admin.isSuperAdmin?g.concat([{name:"global",tab:"全局设置",component:gt},{name:"super_actives",tab:"超管状况",component:$t},{name:"super_admin",tab:"超管操作",component:At}]):g});return(g,o)=>(m(),$(e(x),{vertical:"",style:{"margin-top":"8px"}},{default:a(()=>[t(e(ht)),t(e(Ge),{type:"line","bar-width":e(z).isMobile?0:void 0,animated:"",size:e(z).isMobile?"small":"large",value:A.value,"onUpdate:value":o[0]||(o[0]=y=>A.value=y)},{default:a(()=>[(m(!0),T(E,null,j(b.value,y=>(m(),$(e(Je),{name:y.name,tab:y.tab,key:y.name},{default:a(()=>[(m(),$(Ke(y.component)))]),_:2},1032,["name","tab"]))),128))]),_:1},8,["bar-width","size","value"]),o[1]||(o[1]=F("div",{style:{height:"50px"}},null,-1))]),_:1}))}});export{Ht as default};
