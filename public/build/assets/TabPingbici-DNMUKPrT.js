import{cF as ee,aE as te,w as J,L as Q,a7 as L,bQ as ae,d as P,al as ne,cG as ie,bo as K,a9 as se,c2 as le,S as R,cH as re,aF as oe,ak as ue,bW as ce,cI as de,Y as q,b2 as pe,$ as w,a4 as ge,a3 as me,a8 as fe,aB as ve,aN as be,ah as he,b4 as U,o as ye,b as Ce,q as Se,c as xe,cJ as _e,A as Te,M as ze,f as s,H as u,a,i as k,n as N,z as I,h as A,k as G,b9 as E,j as $}from"./app-DJ79Uvu2.js";import{t as Fe,N as Ie,c as Re}from"./Tag-pwYhadDQ.js";import{u as we}from"./use-locale-DTAsc9kE.js";import{s as De}from"./prop-DfVitj0l.js";import{N as je}from"./Input-CTB-VS1k.js";import{A as Be}from"./Add-DvHfX4VL.js";import{N as H}from"./Switch-CWtEaaIt.js";const Oe=()=>ee,$e={name:"Space",self:Oe},Y=$e;let M;const Ve=()=>{if(!te)return!0;if(M===void 0){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const n=e.scrollHeight===1;return document.body.removeChild(e),M=n}return M},Pe=Object.assign(Object.assign({},L.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemClass:String,itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),Ne=J({name:"Space",props:Pe,setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:g}=Q(e),l=L("Space","-space",void 0,Y,e,n),r=ae("Space",g,n);return{useGap:Ve(),rtlEnabled:r,mergedClsPrefix:n,margin:P(()=>{const{size:i}=e;if(Array.isArray(i))return{horizontal:i[0],vertical:i[1]};if(typeof i=="number")return{horizontal:i,vertical:i};const{self:{[ne("gap",i)]:b}}=l.value,{row:p,col:h}=ie(b);return{horizontal:K(h),vertical:K(p)}})}},render(){const{vertical:e,reverse:n,align:g,inline:l,justify:r,itemClass:i,itemStyle:b,margin:p,wrap:h,mergedClsPrefix:S,rtlEnabled:d,useGap:t,wrapItem:o,internalUseGap:_}=this,T=se(le(this),!1);if(!T.length)return null;const j=`${p.horizontal}px`,z=`${p.horizontal/2}px`,B=`${p.vertical}px`,y=`${p.vertical/2}px`,x=T.length-1,C=r.startsWith("space-");return R("div",{role:"none",class:[`${S}-space`,d&&`${S}-space--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!n?"column":e&&n?"column-reverse":!e&&n?"row-reverse":"row",justifyContent:["start","end"].includes(r)?"flex-"+r:r,flexWrap:!h||e?"nowrap":"wrap",marginTop:t||e?"":`-${y}`,marginBottom:t||e?"":`-${y}`,alignItems:g,gap:t?`${p.vertical}px ${p.horizontal}px`:""}},!o&&(t||_)?T:T.map((D,f)=>D.type===re?D:R("div",{role:"none",class:i,style:[b,{maxWidth:"100%"},t?"":e?{marginBottom:f!==x?B:""}:d?{marginLeft:C?r==="space-between"&&f===x?"":z:f!==x?j:"",marginRight:C?r==="space-between"&&f===0?"":z:"",paddingTop:y,paddingBottom:y}:{marginRight:C?r==="space-between"&&f===x?"":z:f!==x?j:"",marginLeft:C?r==="space-between"&&f===0?"":z:"",paddingTop:y,paddingBottom:y}]},D)))}}),Ae=oe({name:"DynamicTags",common:ue,peers:{Input:ce,Button:de,Tag:Fe,Space:Y},self(){return{inputWidth:"64px"}}}),Le=Ae,Ue=q("dynamic-tags",[q("input",{minWidth:"var(--n-input-width)"})]),ke=Object.assign(Object.assign(Object.assign({},L.props),Re),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:e=>e},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),W=J({name:"DynamicTags",props:ke,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:g}=Q(e),{localeRef:l}=we("DynamicTags"),r=pe(e),{mergedDisabledRef:i}=r,b=w(""),p=w(!1),h=w(!0),S=w(null),d=L("DynamicTags","-dynamic-tags",Ue,Le,e,n),t=w(e.defaultValue),o=ge(e,"value"),_=me(o,t),T=P(()=>l.value.add),j=P(()=>De(e.size)),z=P(()=>i.value||!!e.max&&_.value.length>=e.max);function B(c){const{onChange:m,"onUpdate:value":v,onUpdateValue:O}=e,{nTriggerFormInput:X,nTriggerFormChange:Z}=r;m&&U(m,c),O&&U(O,c),v&&U(v,c),t.value=c,X(),Z()}function y(c){const m=_.value.slice(0);m.splice(c,1),B(m)}function x(c){switch(c.key){case"Enter":C()}}function C(c){const m=c??b.value;if(m){const v=_.value.slice(0);v.push(e.onCreate(m)),B(v)}p.value=!1,h.value=!0,b.value=""}function D(){C()}function f(){p.value=!0,he(()=>{var c;(c=S.value)===null||c===void 0||c.focus(),h.value=!1})}const V=P(()=>{const{self:{inputWidth:c}}=d.value;return{"--n-input-width":c}}),F=g?fe("dynamic-tags",void 0,V,e):void 0;return{mergedClsPrefix:n,inputInstRef:S,localizedAdd:T,inputSize:j,inputValue:b,showInput:p,inputForceFocused:h,mergedValue:_,mergedDisabled:i,triggerDisabled:z,handleInputKeyDown:x,handleAddClick:f,handleInputBlur:D,handleCloseClick:y,handleInputConfirm:C,mergedTheme:d,cssVars:g?void 0:V,themeClass:F==null?void 0:F.themeClass,onRender:F==null?void 0:F.onRender}},render(){const{mergedTheme:e,cssVars:n,mergedClsPrefix:g,onRender:l,renderTag:r}=this;return l==null||l(),R(Ne,{class:[`${g}-dynamic-tags`,this.themeClass],size:"small",style:n,theme:e.peers.Space,themeOverrides:e.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:i,tagClass:b,tagStyle:p,type:h,round:S,size:d,color:t,closable:o,mergedDisabled:_,showInput:T,inputValue:j,inputClass:z,inputStyle:B,inputSize:y,inputForceFocused:x,triggerDisabled:C,handleInputKeyDown:D,handleInputBlur:f,handleAddClick:V,handleCloseClick:F,handleInputConfirm:c,$slots:m}=this;return this.mergedValue.map((v,O)=>r?r(v,O):R(Ie,{key:O,theme:i.peers.Tag,themeOverrides:i.peerOverrides.Tag,class:b,style:p,type:h,round:S,size:d,color:t,closable:o,disabled:_,onClose:()=>{F(O)}},{default:()=>typeof v=="string"?v:v.label})).concat(T?m.input?m.input({submit:c,deactivate:f}):R(je,Object.assign({placeholder:"",size:y,style:B,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:j,onUpdateValue:v=>{this.inputValue=v},theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,onKeydown:D,onBlur:f,internalForceFocus:x})):m.trigger?m.trigger({activate:V,disabled:C}):R(ve,{dashed:!0,disabled:C,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:y,onClick:V},{icon:()=>R(be,{clsPrefix:g},{default:()=>R(Be,null)})}))}})}}),Ge=$("span",null,"这个保存在本地，不用点提交",-1),Ee=$("span",null,"这个保存在本地，不用点提交",-1),He=$("span",null,"关闭屏蔽词功能，可以提升一点性能",-1),Xe=J({__name:"TabPingbici",setup(e){const n=ye(),g=Ce();w(null);const l=w({content_pingbici:[],title_pingbici:[],fjf_pingbici:[]}),r=w(n.userData.binggan.use_pingbici);n.userLoginStatus===!0&&(l.value=n.userData.pingbici,r.value=n.userData.binggan.use_pingbici),Se(()=>n.userDataLoading,d=>{d===!1&&(l.value=n.userData.pingbici,r.value=n.userData.binggan.use_pingbici)});function i(d){l.value[d]=l.value[d].filter((t,o)=>l.value[d].indexOf(t)===o)}function b(){const d={binggan:n.binggan,use_pingbici:r.value,...l.value};h(d)}const{loading:p,send:h,onSuccess:S}=xe(d=>_e(d),{immediate:!1,initialData:[]});return S(()=>n.refreshUserData()),(d,t)=>(Te(),ze(a(G),{vertical:""},{default:s(()=>[u(a(k),{title:"标题屏蔽词",size:"small"},{"header-extra":s(()=>[u(a(N),{onClick:t[1]||(t[1]=o=>i("title_pingbici"))},{default:s(()=>[I("去重")]),_:1})]),default:s(()=>[u(a(W),{value:l.value.title_pingbici,"onUpdate:value":t[0]||(t[0]=o=>l.value.title_pingbici=o)},null,8,["value"])]),_:1}),u(a(k),{title:"内容屏蔽词",size:"small"},{"header-extra":s(()=>[u(a(N),{onClick:t[3]||(t[3]=o=>i("content_pingbici"))},{default:s(()=>[I("去重")]),_:1})]),default:s(()=>[u(a(W),{value:l.value.content_pingbici,"onUpdate:value":t[2]||(t[2]=o=>l.value.content_pingbici=o)},null,8,["value"])]),_:1}),u(a(k),{title:"FJF小尾巴和固马屏蔽词",size:"small"},{"header-extra":s(()=>[u(a(N),{onClick:t[5]||(t[5]=o=>i("fjf_pingbici"))},{default:s(()=>[I("去重")]),_:1})]),default:s(()=>[u(a(W),{value:l.value.fjf_pingbici,"onUpdate:value":t[4]||(t[4]=o=>l.value.fjf_pingbici=o)},null,8,["value"]),u(a(A),{depth:3,style:{"font-size":"0.875rem"}},{default:s(()=>[I("注意：同一个饼干在不同FJF主题中，小尾巴会改变")]),_:1})]),_:1}),u(a(G),{align:"center",justify:"start"},{default:s(()=>[u(a(E),{trigger:"hover"},{trigger:s(()=>[$("div",null,[u(a(H),{value:a(g).userCustom.hidePingbiciFloor,"onUpdate:value":t[6]||(t[6]=o=>a(g).userCustom.hidePingbiciFloor=o)},null,8,["value"]),u(a(A),{style:{"margin-left":"6px"}},{default:s(()=>[I("完全隐藏楼层 ")]),_:1})])]),default:s(()=>[Ge]),_:1}),u(a(E),{trigger:"hover"},{trigger:s(()=>[$("div",null,[u(a(H),{value:a(g).userCustom.pingbiciIngnoreCase,"onUpdate:value":t[7]||(t[7]=o=>a(g).userCustom.pingbiciIngnoreCase=o)},null,8,["value"]),u(a(A),{style:{"margin-left":"6px"}},{default:s(()=>[I("忽略大小写 ")]),_:1})])]),default:s(()=>[Ee]),_:1})]),_:1}),u(a(G),{align:"center",justify:"end"},{default:s(()=>[u(a(E),{trigger:"hover"},{trigger:s(()=>[$("div",null,[u(a(H),{value:r.value,"onUpdate:value":t[8]||(t[8]=o=>r.value=o)},null,8,["value"]),u(a(A),{style:{"margin-left":"6px"}},{default:s(()=>[I("启用 ")]),_:1})])]),default:s(()=>[He]),_:1}),u(a(N),{type:"primary",onClick:b,loading:a(p),disabled:a(p)},{default:s(()=>[I("提交")]),_:1},8,["loading","disabled"])]),_:1})]),_:1}))}});export{Xe as default};
