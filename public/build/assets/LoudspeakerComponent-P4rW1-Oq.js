import{n as I,U as N,W as V,t as x,p as d,j as r,q as e,I as M,aU as O,x as t,E as s,K as f,N as C,aS as P,aV as b,J as y,aW as W,aT as j,aX as J,X as q,D as A,F as K,H as D,i as S,w as T,Q as $,L as g,ab as L,P as E,l as R,g as X,az as Q,al as Y,T as Z,aE as ee}from"./vendor-C-2co6ae.js";import{h as oe,u as B,_ as U,b as G,a as te}from"./app-CsEnLcBD.js";import{l as ae}from"./loudspeaker-B409tdOb.js";const se=I({__name:"Sidebar",props:{mode:{}},emits:["refresh","showJumpModal","newThread"],setup(F,{emit:_}){N(a=>({d6d6f33a:e(v).primaryColor}));const u=oe(),v=V(),i=x(!1),l=x(24),w=B(),p=_;function m(a){a==="up"&&window.scrollTo(0,0),a==="down"&&window.scrollTo(0,document.body.scrollHeight)}return(a,o)=>(r(),d(e(M),{vertical:"",size:[0,24],class:O(["sidebar",[e(w).userCustom.sidebarLeft?"left":"right"]]),align:"center"},{default:t(()=>[s(b,{name:"slide-fade"},{default:t(()=>[i.value?(r(),d(e(C),{key:0,size:l.value+2,class:"icon",onClick:o[0]||(o[0]=c=>m("up")),color:e(u).themeColor.sidebarColor},{default:t(()=>[s(e(P))]),_:1},8,["size","color"])):f("",!0)]),_:1}),s(b,{name:"slide-fade"},{default:t(()=>[i.value&&a.mode=="forum"?(r(),d(e(C),{key:0,size:l.value,class:"icon",onClick:o[1]||(o[1]=c=>p("newThread")),color:e(u).themeColor.sidebarColor},{default:t(()=>[...o[6]||(o[6]=[y("svg",{viewBox:"0 0 16 16"},[y("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1)])]),_:1},8,["size","color"])):f("",!0)]),_:1}),s(b,{name:"slide-fade"},{default:t(()=>[i.value?(r(),d(e(C),{key:0,size:l.value,class:"icon",onClick:o[2]||(o[2]=c=>p("refresh")),color:e(u).themeColor.sidebarColor},{default:t(()=>[...o[7]||(o[7]=[y("svg",{viewBox:"0 0 512 512"},[y("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})],-1)])]),_:1},8,["size","color"])):f("",!0)]),_:1}),s(b,{name:"slide-fade"},{default:t(()=>[i.value&&a.mode=="thread"?(r(),d(e(C),{key:0,size:l.value,class:"icon",color:e(u).themeColor.sidebarColor,onClick:o[3]||(o[3]=c=>p("showJumpModal"))},{default:t(()=>[s(e(W))]),_:1},8,["size","color"])):f("",!0)]),_:1}),s(b,{name:"slide-fade"},{default:t(()=>[i.value?(r(),d(e(C),{key:0,size:l.value+2,class:"icon",onClick:o[4]||(o[4]=c=>m("down")),color:e(u).themeColor.sidebarColor},{default:t(()=>[s(e(j))]),_:1},8,["size","color"])):f("",!0)]),_:1}),s(e(C),{size:l.value,class:"icon",onClick:o[5]||(o[5]=c=>i.value=!i.value),color:e(u).themeColor.sidebarColor},{default:t(()=>[s(e(J))]),_:1},8,["size","color"])]),_:1},8,["class"]))}}),pe=U(se,[["__scopeId","data-v-a449bb83"]]),re=I({__name:"LoudspeakerModal",props:{loudspeakerData:{}},setup(F,{expose:_}){N(m=>({"0e072a93":e(v).textColor1}));const u=B(),v=V(),i=q(),l=x(!1);function w(){l.value=!0}_({show:w});function p(){i.push("/loudspeaker"),l.value=!1}return(m,a)=>(r(),d(e(A),{show:l.value,"onUpdate:show":a[2]||(a[2]=o=>l.value=o),"display-directive":"if"},{default:t(()=>[s(e(K),{style:D({maxWidth:e(u).modalMaxWidth}),title:"大喇叭列表",closable:"",onClose:a[1]||(a[1]=o=>l.value=!1),size:"small"},{action:t(()=>[s(e(M),{justify:"end"},{default:t(()=>[s(e(G),{type:"primary",onClick:p},{default:t(()=>[...a[3]||(a[3]=[g("去发大喇叭",-1)])]),_:1}),s(e(G),{onClick:a[0]||(a[0]=o=>l.value=!1)},{default:t(()=>[...a[4]||(a[4]=[g("关闭",-1)])]),_:1})]),_:1})]),default:t(()=>[s(e(M),{vertical:"",size:[0,12],class:"loudspeaker-content",style:{"max-height":"75vh","overflow-y":"auto"}},{default:t(()=>[(r(!0),S($,null,T(m.loudspeakerData,(o,c)=>(r(),d(L(o.thread_id?"router-link":"span"),{key:o.id,style:D([{color:e(u).userCustom.monochromeMode?e(v).textColor1:o.color},{"white-space":"pre-wrap"}]),to:o.thread_id!==null?`/thread/${o.thread_id}/1`:void 0},{default:t(()=>[g(E(c)+". "+E(o.content),1)]),_:2},1032,["style","to"]))),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]))}}),le=U(re,[["__scopeId","data-v-2a682b08"]]),ne={class:"loudspeaker-container loudspeaker_container"},ie={key:1},de=I({__name:"LoudspeakerComponent",setup(F){N(h=>({"59eb691c":e(i).textColor1}));const _=te(),u=B(),v=x(),i=V(),l=R(()=>!p&&m.value.length===0),w={binggan:_.binggan,mode:"effective"},{loading:p,data:m,send:a,onSuccess:o}=X(h=>ae(h),{immediate:!1,initialData:[]});_.binggan&&a(w),o(()=>{Q(()=>{setTimeout(()=>c(),1e3)})});function c(){const h=document.getElementsByClassName("loudspeaker-content")[0];if(h===void 0)return;const k=h.offsetHeight,z=document.createElement("style");z.id="loudspeaker-keyframe";const n=`@keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }
            @-webkit-keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }

            .loudspeaker-content {
                animation: SPEEDs loudspeaker-move infinite linear;
                -webkit-animation: SPEEDs loudspeaker-move infinite linear;
            }`;z.innerHTML=n.replace(/DOM_HEIGHT/g,String(Math.floor(k/2))).replace(/SPEED/g,String(Math.floor(k/20))),document.getElementsByTagName("head")[0].appendChild(z)}return Y(()=>{document.getElementById("loudspeaker-keyframe")?.remove()}),(h,k)=>{const z=Z("router-link");return r(),d(e(M),{wrap:!1,style:{"margin-top":"8px"}},{default:t(()=>[y("img",{style:{height:"2.5rem",cursor:"pointer"},src:"/ui/miku-loudspeaker.png",onClick:k[0]||(k[0]=n=>v.value?.show())}),y("div",ne,[e(p)?(r(),d(e(ee),{key:0,size:"small"})):f("",!0),l.value?(r(),S("div",ie,[s(z,{to:"/loudspeaker"},{default:t(()=>[...k[1]||(k[1]=[g(" 目前没有大喇叭，要发一个吗？ ",-1)])]),_:1})])):f("",!0),l.value?f("",!0):(r(),d(e(M),{key:2,vertical:"",size:[0,4],class:"loudspeaker-content"},{default:t(()=>[(r(!0),S($,null,T(e(m),(n,H)=>(r(),d(L(n.thread_id?"router-link":"span"),{key:H,style:D([{color:e(u).userCustom.monochromeMode?e(i).textColor1:n.color},{"white-space":"pre-wrap"}]),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:t(()=>[g(E(n.content),1)]),_:2},1032,["style","to"]))),128)),(r(!0),S($,null,T(e(m),(n,H)=>(r(),d(L(n.thread_id?"router-link":"span"),{key:H+e(m).length,style:D([{color:e(u).userCustom.monochromeMode?e(i).textColor1:n.color},{"white-space":"pre-wrap"}]),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:t(()=>[g(E(n.content),1)]),_:2},1032,["style","to"]))),128))]),_:1}))]),s(le,{"loudspeaker-data":e(m),ref_key:"LoudspeakerModalCom",ref:v},null,8,["loudspeaker-data"])]),_:1})}}}),fe=U(de,[["__scopeId","data-v-cd135ec8"]]);export{fe as L,pe as S};
