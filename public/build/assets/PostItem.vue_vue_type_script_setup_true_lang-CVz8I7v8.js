function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Battle-Btwuyo9Y.js","assets/app-BfTmtkkR.js","assets/app-Bhn7e-7g.css","assets/PostInput.vue_vue_type_script_setup_true_lang-RW7Jgga0.js","assets/showDialog-DL9mDBDS.js","assets/randomHeads-BkUm2b7l.js","assets/FInput.vue_vue_type_script_setup_true_lang-Bj8uTtER.js","assets/Input-C5i_M3Sx.js","assets/use-locale-CFDb4tef.js","assets/FInputGroupLabel.vue_vue_type_script_setup_true_lang-eS7YpKAk.js","assets/InputGroup-DaZmah3D.js","assets/InputNumber-CXiFC-pm.js","assets/Add-BBepOlgD.js","assets/index-CM1ALi7Q.js","assets/_commonjsHelpers-CDgoFxsB.js","assets/inputNumberFormat-DaYmlx6U.js","assets/Select-BbGpypib.js","assets/Tag-COjQsRYJ.js","assets/Grid-B_kGa6lq.js","assets/ColorPicker-Opp0lflh.js","assets/_createCompounder-CoPvQ65S.js","assets/Ellipsis-Cj_va55S.js","assets/download-sglA049O.js","assets/emojiData-nGA-8XBz.js","assets/Tabs-C7u4nR1b.js","assets/Divider-BHB90_Ne.js","assets/PostInput-JCDAAN1b.css","assets/forums-nUb1a26Z.js","assets/Spin-C-KLI5el.js","assets/Battle-Dg6Ad9aM.css","assets/HongbaoPost-Dmg1Zf-W.js","assets/HongbaoPost-CdzQ2jUV.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{am as Pe,bR as Se,bS as L,bs as j,a0 as q,a1 as I,a3 as ie,b2 as Ee,a2 as Be,w as O,T as Ae,a9 as ye,bT as Re,d as S,bn as Te,an as H,aa as Le,$ as z,S as f,a_ as je,ap as Fe,bj as Oe,aZ as We,aP as Ve,aV as Ne,aW as qe,aX as Ge,aU as Ue,bo as Je,A as d,F as D,j as u,b7 as Ze,n as Ke,b as Qe,aA as Xe,aw as G,e as le,M as P,f as _,H as w,a as s,aB as pe,G as x,aD as Ye,z as ge,s as U,N as F,t as eo,C as ce,B as Z,k as fe,v as he,aC as oo,i as to,ay as me,bU as so,az as ve}from"./app-BfTmtkkR.js";import{r as ro,D as Ce,d as no,b as ao}from"./randomHeads-BkUm2b7l.js";import{s as de}from"./showDialog-DL9mDBDS.js";import{D as ue}from"./Delete-Dz05YK73.js";const io=l=>{const{lineHeight:r,borderRadius:p,fontWeightStrong:R,baseColor:v,dividerColor:y,actionColor:h,textColor1:i,textColor2:m,closeColorHover:C,closeColorPressed:$,closeIconColor:E,closeIconColorHover:o,closeIconColorPressed:g,infoColor:c,successColor:W,warningColor:V,errorColor:N,fontSize:M}=l;return Object.assign(Object.assign({},Se),{fontSize:M,lineHeight:r,titleFontWeight:R,borderRadius:p,border:`1px solid ${y}`,color:h,titleTextColor:i,iconColor:m,contentTextColor:m,closeBorderRadius:p,closeColorHover:C,closeColorPressed:$,closeIconColor:E,closeIconColorHover:o,closeIconColorPressed:g,borderInfo:`1px solid ${L(v,j(c,{alpha:.25}))}`,colorInfo:L(v,j(c,{alpha:.08})),titleTextColorInfo:i,iconColorInfo:c,contentTextColorInfo:m,closeColorHoverInfo:C,closeColorPressedInfo:$,closeIconColorInfo:E,closeIconColorHoverInfo:o,closeIconColorPressedInfo:g,borderSuccess:`1px solid ${L(v,j(W,{alpha:.25}))}`,colorSuccess:L(v,j(W,{alpha:.08})),titleTextColorSuccess:i,iconColorSuccess:W,contentTextColorSuccess:m,closeColorHoverSuccess:C,closeColorPressedSuccess:$,closeIconColorSuccess:E,closeIconColorHoverSuccess:o,closeIconColorPressedSuccess:g,borderWarning:`1px solid ${L(v,j(V,{alpha:.33}))}`,colorWarning:L(v,j(V,{alpha:.08})),titleTextColorWarning:i,iconColorWarning:V,contentTextColorWarning:m,closeColorHoverWarning:C,closeColorPressedWarning:$,closeIconColorWarning:E,closeIconColorHoverWarning:o,closeIconColorPressedWarning:g,borderError:`1px solid ${L(v,j(N,{alpha:.25}))}`,colorError:L(v,j(N,{alpha:.08})),titleTextColorError:i,iconColorError:N,contentTextColorError:m,closeColorHoverError:C,closeColorPressedError:$,closeIconColorError:E,closeIconColorHoverError:o,closeIconColorPressedError:g})},lo={name:"Alert",common:Pe,self:io},co=lo,uo=q("alert",`
 line-height: var(--n-line-height);
 border-radius: var(--n-border-radius);
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 text-align: start;
 word-break: break-word;
`,[I("border",`
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 transition: border-color .3s var(--n-bezier);
 border: var(--n-border);
 pointer-events: none;
 `),ie("closable",[q("alert-body",[I("title",`
 padding-right: 24px;
 `)])]),I("icon",{color:"var(--n-icon-color)"}),q("alert-body",{padding:"var(--n-padding)"},[I("title",{color:"var(--n-title-text-color)"}),I("content",{color:"var(--n-content-text-color)"})]),Ee({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),I("icon",`
 position: absolute;
 left: 0;
 top: 0;
 align-items: center;
 justify-content: center;
 display: flex;
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 margin: var(--n-icon-margin);
 `),I("close",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 `),ie("show-icon",[q("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),ie("right-adjust",[q("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),q("alert-body",`
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 `,[I("title",`
 transition: color .3s var(--n-bezier);
 font-size: 16px;
 line-height: 19px;
 font-weight: var(--n-title-font-weight);
 `,[Be("& +",[I("content",{marginTop:"9px"})])]),I("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),I("icon",{transition:"color .3s var(--n-bezier)"})]),po=Object.assign(Object.assign({},ye.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),go=O({name:"Alert",inheritAttrs:!1,props:po,setup(l){const{mergedClsPrefixRef:r,mergedBorderedRef:p,inlineThemeDisabled:R,mergedRtlRef:v}=Ae(l),y=ye("Alert","-alert",uo,co,l,r),h=Re("Alert",v,r),i=S(()=>{const{common:{cubicBezierEaseInOut:g},self:c}=y.value,{fontSize:W,borderRadius:V,titleFontWeight:N,lineHeight:M,iconSize:ee,iconMargin:K,iconMarginRtl:oe,closeIconSize:te,closeBorderRadius:se,closeSize:B,closeMargin:T,closeMarginRtl:re,padding:ne}=c,{type:k}=l,{left:J,right:Q}=Te(K);return{"--n-bezier":g,"--n-color":c[H("color",k)],"--n-close-icon-size":te,"--n-close-border-radius":se,"--n-close-color-hover":c[H("closeColorHover",k)],"--n-close-color-pressed":c[H("closeColorPressed",k)],"--n-close-icon-color":c[H("closeIconColor",k)],"--n-close-icon-color-hover":c[H("closeIconColorHover",k)],"--n-close-icon-color-pressed":c[H("closeIconColorPressed",k)],"--n-icon-color":c[H("iconColor",k)],"--n-border":c[H("border",k)],"--n-title-text-color":c[H("titleTextColor",k)],"--n-content-text-color":c[H("contentTextColor",k)],"--n-line-height":M,"--n-border-radius":V,"--n-font-size":W,"--n-title-font-weight":N,"--n-icon-size":ee,"--n-icon-margin":K,"--n-icon-margin-rtl":oe,"--n-close-size":B,"--n-close-margin":T,"--n-close-margin-rtl":re,"--n-padding":ne,"--n-icon-margin-left":J,"--n-icon-margin-right":Q}}),m=R?Le("alert",S(()=>l.type[0]),i,l):void 0,C=z(!0),$=()=>{const{onAfterLeave:g,onAfterHide:c}=l;g&&g(),c&&c()};return{rtlEnabled:h,mergedClsPrefix:r,mergedBordered:p,visible:C,handleCloseClick:()=>{var g;Promise.resolve((g=l.onClose)===null||g===void 0?void 0:g.call(l)).then(c=>{c!==!1&&(C.value=!1)})},handleAfterLeave:()=>{$()},mergedTheme:y,cssVars:R?void 0:i,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){var l;return(l=this.onRender)===null||l===void 0||l.call(this),f(je,{onAfterLeave:this.handleAfterLeave},{default:()=>{const{mergedClsPrefix:r,$slots:p}=this,R={class:[`${r}-alert`,this.themeClass,this.closable&&`${r}-alert--closable`,this.showIcon&&`${r}-alert--show-icon`,!this.title&&this.closable&&`${r}-alert--right-adjust`,this.rtlEnabled&&`${r}-alert--rtl`],style:this.cssVars,role:"alert"};return this.visible?f("div",Object.assign({},Fe(this.$attrs,R)),this.closable&&f(Oe,{clsPrefix:r,class:`${r}-alert__close`,onClick:this.handleCloseClick}),this.bordered&&f("div",{class:`${r}-alert__border`}),this.showIcon&&f("div",{class:`${r}-alert__icon`,"aria-hidden":"true"},We(p.icon,()=>[f(Ve,{clsPrefix:r},{default:()=>{switch(this.type){case"success":return f(Ue,null);case"info":return f(Ge,null);case"warning":return f(qe,null);case"error":return f(Ne,null);default:return null}}})])),f("div",{class:[`${r}-alert-body`,this.mergedBordered&&`${r}-alert-body--bordered`]},Je(p.header,v=>{const y=v||this.title;return y?f("div",{class:`${r}-alert-body__title`},y):null}),p.default&&f("div",{class:`${r}-alert-body__content`},p))):null}})}}),fo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 384 512"},ho=u("path",{d:"M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148c25.049-31.381 43.63-49.449 82.757-49.449c30.764 0 68.816 19.799 68.816 49.631c0 22.552-18.617 34.134-48.993 51.164c-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271c0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271s-31.075-69.27-69.271-69.27z",fill:"currentColor"},null,-1),mo=[ho],vo=O({name:"Question",render:function(r,p){return d(),D("svg",fo,mo)}}),Co={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},bo=u("circle",{fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"48",cx:"256",cy:"256",r:"200"},null,-1),_o=u("path",{stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"48",d:"M114.58 114.58l282.84 282.84",fill:"currentColor"},null,-1),wo=[bo,_o],yo=O({name:"Ban",render:function(r,p){return d(),D("svg",Co,wo)}}),ko={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xo=u("path",{d:"M87.48 380c1.2-4.38-1.43-10.47-3.94-14.86a42.63 42.63 0 0 0-2.54-3.8a199.81 199.81 0 0 1-33-110C47.64 139.09 140.72 48 255.82 48C356.2 48 440 117.54 459.57 209.85a199 199 0 0 1 4.43 41.64c0 112.41-89.49 204.93-204.59 204.93c-18.31 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.14 31.14 0 0 0-11.13-2.07a30.7 30.7 0 0 0-12.08 2.43L81.5 462.78a15.92 15.92 0 0 1-4.66 1.22a9.61 9.61 0 0 1-9.58-9.74a15.85 15.85 0 0 1 .6-3.29z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Do=u("circle",{cx:"160",cy:"256",r:"32",fill:"currentColor"},null,-1),Io=u("circle",{cx:"256",cy:"256",r:"32",fill:"currentColor"},null,-1),zo=u("circle",{cx:"352",cy:"256",r:"32",fill:"currentColor"},null,-1),$o=[xo,Do,Io,zo],be=O({name:"ChatbubbleEllipsesOutline",render:function(r,p){return d(),D("svg",ko,$o)}}),Mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ho=Ze('<path d="M256 104v56h56a56 56 0 1 0-56-56z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></path><path d="M256 104v56h-56a56 56 0 1 1 56-56z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></path><rect x="64" y="160" width="384" height="112" rx="32" ry="32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></rect><path d="M416 272v144a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V272" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 160v304"></path>',5),Po=[Ho],_e=O({name:"GiftOutline",render:function(r,p){return d(),D("svg",Mo,Po)}}),So={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Eo=u("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Bo=u("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1),Ao=[Eo,Bo],we=O({name:"ReloadOutline",render:function(r,p){return d(),D("svg",So,Ao)}}),Ro={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},To=u("g",{fill:"none"},[u("path",{d:"M4 4V3a2 2 0 1 1 4 0v1h1a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h1zm1-1v1h2V3a1 1 0 0 0-2 0zm-2 7h6V5H3v5z",fill:"currentColor"})],-1),Lo=[To],jo=O({name:"LockClosed12Regular",render:function(r,p){return d(),D("svg",Ro,Lo)}}),Fo={key:0,class:"random-head-container"},Oo=["src"],Wo=u("div",{style:{"margin-left":"auto"}},null,-1),Vo=u("div",{style:{"margin-left":"auto"}},null,-1),No=["innerHTML"],qo={class:"post-created-at"},Go={key:0,class:"post-anti-jingfen"},Uo={key:1},Xo=O({__name:"PostItem",props:{forumId:{},postData:{},yourPostsList:{default:()=>[]},randomHeadGroupIndex:{default:1},antiJingfen:{type:Boolean,default:!1},noImageMode:{type:Boolean,default:!1},noEmojiMode:{type:Boolean,default:!1},noCustomEmojiMode:{type:Boolean,default:!1},noHeadMode:{type:Boolean,default:!1},noVideoMode:{type:Boolean,default:!1},useUrlMode:{type:Boolean,default:!1},previewMode:{type:Boolean,default:!1},superAdminMode:{type:Boolean,default:!1}},emits:["showRewardModal","quoteClick","refreshPostsList","adminHandle"],setup(l,{expose:r,emit:p}){const R=me(()=>ve(()=>import("./Battle-Btwuyo9Y.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]))),v=me(()=>ve(()=>import("./HongbaoPost-Dmg1Zf-W.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31]))),y=z(!1),h=Ke(),i=Qe(),m=Xe(),C=z(null),$=z(null),E=z(null),o=l,g=S(()=>i.userCustom.postLegacyMode?{paddingTop:"6px",paddingBottom:"6px",borderBottom:"1px solid",borderColor:m.themeColor.postItemBorderColor}:void 0),c=S(()=>i.userCustom.postLegacyMode?void 0:{padding:i.userCustom.postCardPadding+"px"}),W=S(()=>({maxHeight:X.value===void 0?void 0:X.value+"px",marginTop:i.userCustom.postInnerMargin+"px",lineHeight:i.userCustom.lineHeightPost+"px"})),V=S(()=>({top:Y.value===void 0?void 0:Y.value+"px",fontSize:i.userCustom.fontSizePost+"px"})),N=S(()=>({marginTop:i.userCustom.postInnerMargin+"px",fontSize:i.userCustom.fontSizeFooter+"px",lineHeight:i.userCustom.fontSizeFooter+"px"})),M=p,ee=S(()=>{const e=[{label:"提示",key:"hint",icon:G(vo,{size:"1.5rem"})},{label:"碎饼",key:"ban",icon:G(yo,{size:"1.5rem"})},{label:"封禁",key:"lock",icon:G(jo,{size:"1.5rem"})},{label:"删全",key:"deleteAll",icon:G(ue,{size:"1.5rem"})}];return o.postData.is_deleted===0?e.push({label:"删帖",key:"delete",icon:G(ue,{size:"1.5rem"})}):e.push({label:"恢复",key:"recovery",icon:G(we,{size:"1.5rem"})}),e});function K(){M("showRewardModal",{floor:o.postData.floor,forumId:o.forumId,threadId:o.postData.thread_id,postId:o.postData.id,postFloorMessage:k.value})}function oe(){function e(){const t={binggan:h.binggan,thread_id:o.postData.thread_id,post_id:o.postData.id};no(t).then(()=>M("refreshPostsList"))}de({title:"要删除这个回复吗？",content:"会消费300olo喔",onPositiveClick:()=>{o.postData.hongbao_id!==null?de({title:"注意",content:"这个回帖有红包。删除后红包将消失，并且olo不退回。是否确认？",onPositiveClick:()=>{e()}}):e()}})}function te(){function e(){const t={binggan:h.binggan,thread_id:o.postData.thread_id,post_id:o.postData.id};ao(t).then(()=>M("refreshPostsList"))}de({title:"要恢复这个已删除的回复吗？",content:"会消费300olo喔",onPositiveClick:()=>{e()}})}function se(e){M("adminHandle",{action:e,postId:o.postData.id})}const B=z(!1),T=z();function re(e){return e.search(/class='emoji[-_]img'/g)!=-1?o.noEmojiMode?"":e:e.search(/class='custom[-_]emoji[-_]img'/g)!=-1?o.noCustomEmojiMode?"":e:o.noImageMode?e.replace(/src/,"origin-src").replace("<img ",'<img src="/img_svg.svg" class="img-svg"'):e}const ne=S(()=>{var t;let e;if(e=o.postData.content.replace(/<img[^>]*>/g,re).replace(/<script/g,"<**禁止使用script**").replace(/\n/g,"<br>"),(t=h.userData)!=null&&t.binggan.use_pingbici){const n=i.userCustom.pingbiciIngnoreCase?"gi":"g";if(!i.userCustom.hidePingbiciFloor){const a=h.userData.pingbici.content_pingbici;a==null||a.forEach(b=>{new RegExp(b,n).test(e)&&(B.value=!0,T.value="屏蔽词折叠（点击展开）")})}if(o.antiJingfen&&!i.userCustom.hidePingbiciFloor){const a=h.userData.pingbici.fjf_pingbici;a==null||a.forEach(b=>{new RegExp(b,"g").test(o.postData.created_binggan_hash.slice(0,5))&&(B.value=!0,T.value="小尾巴黑名单（点击展开）")})}if(!i.userCustom.hidePingbiciFloor){const a=h.userData.pingbici.fjf_pingbici;a==null||a.forEach(b=>{new RegExp(b,n).test(o.postData.nickname)&&(B.value=!0,T.value="固马黑名单（点击展开）")})}}if(o.noVideoMode&&new RegExp(/<video|<audio|<embed|<iframe/,"g").test(e)&&(B.value=!0,T.value="音视频折叠（点击展开）"),o.yourPostsList&&o.yourPostsList.forEach(n=>{const a=`@№${n}(?![0-9])`,b=new RegExp(a,"g");e=e.replace(b,A=>`<span class="highlight">${A}</span>`)}),o.useUrlMode){let n=function(b){return new RegExp(/.*(png|jpe?g|webp|gif)$/,"i").test(b)?b:`<a href="${b}" target="_blank">${b}</a>`};const a=new RegExp(/(https?:\/\/|www\.)[a-zA-Z_0-9\-@]+(\.\w[a-zA-Z_0-9\-:]+)+(\/[\(\)~#&\-=?\+\%/\.\w]+)?/,"gi");e=e.replace(a,n)}return e}),k=S(()=>{var e;return o.antiJingfen?`№${o.postData.floor} ${o.postData.nickname} ${o.postData.created_at} →${(e=o.postData.created_binggan_hash)==null?void 0:e.slice(0,5)}`:`№${o.postData.floor} ${o.postData.nickname} ${o.postData.created_at}`});function J(){const e=i.userCustom.quoteMax;let t=C.value.getElementsByTagName("details");for(let A of t)A.open=!1;let n=C.value.innerText.split(`
`),a=[];n.forEach((A,He)=>{A.indexOf("@№")>-1&&a.push(He)}),a.length>=e&&(n=n.slice(a[a.length-e]+1,n.length));const b="<span class='quote-content'>"+n.join(`
`)+`
@`+k.value+`</span>
`;M("quoteClick",b)}const Q=z();function ke(){C.value.querySelectorAll("img").forEach(t=>{t.getAttribute("class")!=="img-svg"&&t.addEventListener("click",n=>{Q.value=t,window.$message.success("要添加至自定义表情包吗？",{render:xe,closable:!0})})})}const xe=e=>{const{type:t}=e;return f(go,{closable:!1,type:t==="loading"?"default":t,showIcon:!1,style:{boxShadow:"var(--n-box-shadow)",maxWidth:"calc(100vw - 64px)",width:"250px"}},()=>[f("span",{innerText:e.content}),f(he,{size:"tiny",type:"success",onClick:De},{default:()=>"确定"})])};function De(){var n;const e=h.userData.my_emoji,t=(n=Q.value)==null?void 0:n.getAttribute("src");if(e!==null&&e.includes(t))window.$message.error("已经添加过该表情包了");else{const a={binggan:h.binggan,my_emoji:t};so(a).then(()=>h.refreshUserData())}}le(()=>{ke()});function Ie(){C.value.querySelectorAll(".img-svg").forEach(t=>{t.addEventListener("click",n=>{const a=t.getAttribute("src");t.setAttribute("src",""),t.setAttribute("src",t.getAttribute("origin-src")),t.setAttribute("origin-src",a)})})}le(()=>{Ie()});const ae=z(!1),X=z(),Y=z();function ze(){const e=window.getComputedStyle($.value),t=parseInt(e.lineHeight),n=parseInt(e.height),a=t*16;n>a&&(ae.value=!0,Y.value=a-n,X.value=a)}function $e(){ae.value=!1,Y.value=void 0,X.value=void 0}le(()=>{o.postData.floor!==0&&ze()});function Me(){var e;(e=E.value)==null||e.refreshBattleDataHandle()}return r({refreshBattleData:Me}),(e,t)=>(d(),P(oo(s(i).userCustom.postLegacyMode?"div":s(to)),{class:"post-item",id:"f_"+e.postData.floor,floor:e.postData.floor,style:Z(g.value),"content-style":c.value},{default:_(()=>[w(s(fe),{size:"small",style:Z({paddingRight:s(i).isMobile?"24px":"0px"})},{default:_(()=>[e.noHeadMode?x("",!0):(d(),D("div",Fo,[u("img",{src:s(ro)[e.randomHeadGroupIndex-1].random_heads[e.postData.random_head],class:pe("head_"+e.postData.random_head)},null,10,Oo)])),T.value!==void 0?(d(),P(s(Ye),{key:1,text:"",onClick:t[0]||(t[0]=n=>B.value=!B.value)},{default:_(()=>[ge(U(T.value),1)]),_:1})):x("",!0),e.previewMode?(d(),D(ce,{key:3},[Vo,w(s(F),{size:24,style:{cursor:"pointer"}},{default:_(()=>[w(s(_e))]),_:1}),w(s(F),{size:24,style:{cursor:"pointer"}},{default:_(()=>[w(s(be))]),_:1})],64)):(d(),D(ce,{key:2},[Wo,e.postData.is_your_post&&e.postData.is_deleted===0?(d(),P(s(F),{key:0,size:24,style:{cursor:"pointer"},onClick:oe},{default:_(()=>[w(s(ue))]),_:1})):x("",!0),e.postData.is_your_post&&e.postData.is_deleted===1?(d(),P(s(F),{key:1,size:24,style:{cursor:"pointer"},onClick:te},{default:_(()=>[w(s(we))]),_:1})):x("",!0),e.postData.is_your_post?x("",!0):(d(),P(s(F),{key:2,size:24,style:{cursor:"pointer"},onClick:K},{default:_(()=>[w(s(_e))]),_:1})),w(s(F),{size:24,style:{cursor:"pointer"},onClick:J},{default:_(()=>[w(s(be))]),_:1}),!y.value&&s(h).checkAdminForums(o.forumId)?(d(),P(s(F),{key:3,size:24,style:{cursor:"pointer"},onClick:t[1]||(t[1]=n=>y.value=!0)},{default:_(()=>[w(s(Ce))]),_:1})):x("",!0),y.value&&s(h).checkAdminForums(o.forumId)?(d(),P(s(eo),{key:4,trigger:"click",options:ee.value,onSelect:se,show:y.value,size:s(i).isMobile?"medium":"large",onClickoutside:t[2]||(t[2]=n=>y.value=!1)},{default:_(()=>[w(s(F),{size:24,style:{cursor:"pointer"}},{default:_(()=>[w(s(Ce))]),_:1})]),_:1},8,["options","show","size"])):x("",!0)],64))]),_:1},8,["style"]),B.value?x("",!0):(d(),D(ce,{key:0},[u("div",{class:"post-content",ref_key:"postContentContainerDom",ref:$,style:Z(W.value)},[u("span",{innerHTML:ne.value,class:"post-span",ref_key:"postContentDom",ref:C,style:Z(V.value)},null,12,No)],4),e.postData.hongbao_data!==null?(d(),P(s(v),{key:0,"hongbao-data":e.postData.hongbao_data,"forum-id":e.forumId,"thread-id":e.postData.thread_id,onRefreshPostsList:t[3]||(t[3]=n=>M("refreshPostsList"))},null,8,["hongbao-data","forum-id","thread-id"])):x("",!0),e.postData.battle_id!==null?(d(),P(s(R),{key:1,"battle-id":e.postData.battle_id,ref_key:"BattleCom",ref:E},null,8,["battle-id"])):x("",!0),w(s(fe),{size:[4,0],class:pe(["post-footer",{"system-post":e.postData.created_by_admin===2,"admin-post":e.postData.created_by_admin===1}]),style:Z(N.value)},{default:_(()=>{var n;return[u("span",{depth:3,class:"post-footer-text",onClick:J,style:{cursor:"pointer"}},U("№"+e.postData.floor),1),u("span",{class:"post-nick-name",onClick:J,style:{cursor:"pointer"}},U(e.postData.nickname),1),u("span",qo,U(e.postData.created_at),1),e.antiJingfen?(d(),D("span",Go," →"+U((n=e.postData.created_binggan_hash)==null?void 0:n.slice(0,5)),1)):x("",!0),e.superAdminMode?(d(),D("span",Uo,U(e.postData.created_binggan),1)):x("",!0),ae.value?(d(),P(s(he),{key:2,size:"tiny",onClick:$e},{default:_(()=>[ge("展开限高")]),_:1})):x("",!0)]}),_:1},8,["style","class"])],64))]),_:1},8,["id","floor","style","content-style"]))}});export{go as N,Xo as _};
