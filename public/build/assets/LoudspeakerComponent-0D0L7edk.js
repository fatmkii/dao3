import{w as N,P as B,W as F,$ as D,A as s,M as d,q as t,H as a,o as e,N as y,aR as R,C as _,aU as S,aV as j,aS as P,aW as W,aX as J,x,al as K,am as q,O as b,R as A,z as g,F as $,Q as E,a2 as T,J as H,K as Q,L as X,ab as I,B as L,b as Y,i as Z,aD as ee,an as oe,U as te,aI as ae}from"./vendor-CGtf6mcl.js";import{i as se,u as V,_ as O,b as U,a as re}from"./app-DHEw7mxg.js";import{l as le}from"./loudspeaker-Dw6GrFoQ.js";const G=h=>(K("data-v-a449bb83"),h=h(),q(),h),ne=G(()=>b("svg",{viewBox:"0 0 16 16"},[b("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1)),ie=G(()=>b("svg",{viewBox:"0 0 512 512"},[b("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})],-1)),de=N({__name:"Sidebar",props:{mode:{}},emits:["refresh","showJumpModal","newThread"],setup(h,{emit:k}){B(l=>({d6d6f33a:e(v).primaryColor}));const u=se(),v=F(),i=D(!1),r=D(24),w=V(),p=k;function c(l){l==="up"&&window.scrollTo(0,0),l==="down"&&window.scrollTo(0,document.body.scrollHeight)}return(l,o)=>(s(),d(e(x),{vertical:"",size:[0,24],class:J(["sidebar",[e(w).userCustom.sidebarLeft?"left":"right"]]),align:"center"},{default:t(()=>[a(S,{name:"slide-fade"},{default:t(()=>[i.value?(s(),d(e(y),{key:0,size:r.value+2,class:"icon",onClick:o[0]||(o[0]=m=>c("up")),color:e(u).themeColor.sidebarColor},{default:t(()=>[a(e(R))]),_:1},8,["size","color"])):_("",!0)]),_:1}),a(S,{name:"slide-fade"},{default:t(()=>[i.value&&l.mode=="forum"?(s(),d(e(y),{key:0,size:r.value,class:"icon",onClick:o[1]||(o[1]=m=>p("newThread")),color:e(u).themeColor.sidebarColor},{default:t(()=>[ne]),_:1},8,["size","color"])):_("",!0)]),_:1}),a(S,{name:"slide-fade"},{default:t(()=>[i.value?(s(),d(e(y),{key:0,size:r.value,class:"icon",onClick:o[2]||(o[2]=m=>p("refresh")),color:e(u).themeColor.sidebarColor},{default:t(()=>[ie]),_:1},8,["size","color"])):_("",!0)]),_:1}),a(S,{name:"slide-fade"},{default:t(()=>[i.value&&l.mode=="thread"?(s(),d(e(y),{key:0,size:r.value,class:"icon",color:e(u).themeColor.sidebarColor,onClick:o[3]||(o[3]=m=>p("showJumpModal"))},{default:t(()=>[a(e(j))]),_:1},8,["size","color"])):_("",!0)]),_:1}),a(S,{name:"slide-fade"},{default:t(()=>[i.value?(s(),d(e(y),{key:0,size:r.value+2,class:"icon",onClick:o[4]||(o[4]=m=>c("down")),color:e(u).themeColor.sidebarColor},{default:t(()=>[a(e(P))]),_:1},8,["size","color"])):_("",!0)]),_:1}),a(e(y),{size:r.value,class:"icon",onClick:o[5]||(o[5]=m=>i.value=!i.value),color:e(u).themeColor.sidebarColor},{default:t(()=>[a(e(W))]),_:1},8,["size","color"])]),_:1},8,["class"]))}}),ke=O(de,[["__scopeId","data-v-a449bb83"]]),ue=N({__name:"LoudspeakerModal",props:{loudspeakerData:{}},setup(h,{expose:k}){B(c=>({"64a4b92e":e(v).textColor1}));const u=V(),v=F(),i=A(),r=D(!1);function w(){r.value=!0}k({show:w});function p(){i.push("/loudspeaker"),r.value=!1}return(c,l)=>(s(),d(e(X),{show:r.value,"onUpdate:show":l[2]||(l[2]=o=>r.value=o),"display-directive":"if"},{default:t(()=>[a(e(Q),{style:H({maxWidth:e(u).modalMaxWidth}),title:"大喇叭列表",closable:"",onClose:l[1]||(l[1]=o=>r.value=!1),size:"small"},{action:t(()=>[a(e(x),{justify:"end"},{default:t(()=>[a(e(U),{type:"primary",onClick:p},{default:t(()=>[g("去发大喇叭")]),_:1}),a(e(U),{onClick:l[0]||(l[0]=o=>r.value=!1)},{default:t(()=>[g("关闭")]),_:1})]),_:1})]),default:t(()=>[a(e(x),{vertical:"",size:[0,12],class:"loudspeaker-content",style:{"max-height":"75vh","overflow-y":"auto"}},{default:t(()=>[(s(!0),$(T,null,E(c.loudspeakerData,(o,m)=>(s(),d(I(o.thread_id?"router-link":"span"),{key:o.id,style:H({color:e(u).userCustom.monochromeMode?e(v).textColor1:o.color}),to:o.thread_id!==null?`/thread/${o.thread_id}/1`:void 0},{default:t(()=>[g(L(m)+". "+L(o.content),1)]),_:2},1032,["style","to"]))),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]))}}),ce=O(ue,[["__scopeId","data-v-d3b5fcaa"]]),me={class:"loudspeaker-container loudspeaker_container"},fe={key:1},pe=N({__name:"LoudspeakerComponent",setup(h){B(f=>({"956ad78e":e(i).textColor1}));const k=re(),u=V(),v=D(),i=F(),r=Y(()=>!p&&c.value.length===0),w={binggan:k.binggan,mode:"effective"},{loading:p,data:c,send:l,onSuccess:o}=Z(f=>le(f),{immediate:!1,initialData:[]});k.binggan&&l(w),o(()=>{ee(()=>{setTimeout(()=>m(),1e3)})});function m(){const f=document.getElementsByClassName("loudspeaker-content")[0];if(f===void 0)return;const z=f.offsetHeight,M=document.createElement("style");M.id="loudspeaker-keyframe";const n=`@keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }
            @-webkit-keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }

            .loudspeaker-content {
                animation: SPEEDs loudspeaker-move infinite linear;
                -webkit-animation: SPEEDs loudspeaker-move infinite linear;
            }`;M.innerHTML=n.replace(/DOM_HEIGHT/g,String(Math.floor(z/2))).replace(/SPEED/g,String(Math.floor(z/20))),document.getElementsByTagName("head")[0].appendChild(M)}return oe(()=>{var f;(f=document.getElementById("loudspeaker-keyframe"))==null||f.remove()}),(f,z)=>{const M=te("router-link");return s(),d(e(x),{wrap:!1,style:{"margin-top":"8px"}},{default:t(()=>[b("img",{style:{height:"2.5rem",cursor:"pointer"},src:"/ui/miku-loudspeaker.png",onClick:z[0]||(z[0]=n=>{var C;return(C=v.value)==null?void 0:C.show()})}),b("div",me,[e(p)?(s(),d(e(ae),{key:0,size:"small"})):_("",!0),r.value?(s(),$("div",fe,[a(M,{to:"/loudspeaker"},{default:t(()=>[g(" 目前没有大喇叭，要发一个吗？ ")]),_:1})])):_("",!0),r.value?_("",!0):(s(),d(e(x),{key:2,vertical:"",size:[0,4],class:"loudspeaker-content"},{default:t(()=>[(s(!0),$(T,null,E(e(c),(n,C)=>(s(),d(I(n.thread_id?"router-link":"span"),{key:C,style:H({color:e(u).userCustom.monochromeMode?e(i).textColor1:n.color}),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:t(()=>[g(L(n.content),1)]),_:2},1032,["style","to"]))),128)),(s(!0),$(T,null,E(e(c),(n,C)=>(s(),d(I(n.thread_id?"router-link":"span"),{key:C+e(c).length,style:H({color:e(u).userCustom.monochromeMode?e(i).textColor1:n.color}),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:t(()=>[g(L(n.content),1)]),_:2},1032,["style","to"]))),128))]),_:1}))]),a(ce,{"loudspeaker-data":e(c),ref_key:"LoudspeakerModalCom",ref:v},null,8,["loudspeaker-data"])]),_:1})}}}),Ce=O(pe,[["__scopeId","data-v-6fd4ba1a"]]);export{Ce as L,ke as S};
