import{w as N,o as $,b as j,g as H,u as q,d as w,$ as A,c as C,A as d,M as m,f as e,H as t,a,i as K,k as g,h as n,z as s,s as i,j as h,m as E,G as _,F as G,aF as O,n as R,_ as U}from"./app-Cg7Vcqiz.js";import{j as V,g as B}from"./randomHeads-BkxjNE8X.js";import{u as J}from"./forums-BBaMkDBE.js";import{_ as v}from"./FInput.vue_vue_type_script_setup_true_lang-DoxM4otI.js";import"./showDialog-CUSNmPRh.js";import"./index-8YCSBjiM.js";import"./_commonjsHelpers-BosuxZz1.js";import"./InputGroup-CHIfqDYe.js";import"./InputNumber-BA9nuNOe.js";import"./use-locale-Bid7opkP.js";import"./Input-D_UZB_Pc.js";import"./Add-DDhmv_c0.js";import"./Select-DvpmyBL-.js";import"./Tag-dUWvBLPY.js";import"./Grid-CmtT-bO8.js";import"./ColorPicker-BhHym3O1.js";import"./_createCompounder-iMEu2vEH.js";import"./Ellipsis-EBfKwMwD.js";import"./download-sglA049O.js";import"./emojiData-nGA-8XBz.js";import"./Tabs-oUwVUEHD.js";const Q={key:0},W=N({__name:"HongbaoPost",props:{hongbaoData:{},threadId:{},forumId:{}},emits:["refreshPostsList"],setup(D,{emit:k}){const f=$(),S=j();J(),H(),q();const r=D,P=w(()=>({1:"随机",2:"定额"})[r.hongbaoData.type]),T=w(()=>({1:"口令红包",2:"抢答红包",3:"暗号红包"})[r.hongbaoData.key_word_type]),u=A(r.hongbaoData.key_word_type===1?r.hongbaoData.key_word:""),y=k,{loading:z,send:I,onSuccess:M,onError:F}=C(o=>V(o),{immediate:!1});function c(o){if(!o.isTrusted){const L={title:"错误",closable:!1,content:"请不要用脚本抢红包喔",positiveText:"确定"};window.$dialog.warning(L);return}const{timestamp:p,newPostKey:l}=B(o.isTrusted,r.threadId,f.binggan),b={binggan:f.binggan,forum_id:r.forumId,thread_id:r.threadId,content:"--红包口令: "+u.value,nickname:"= =",post_with_admin:!1,new_post_key:l,timestamp:p,hongbao_post_id:r.hongbaoData.id,hongbao_key_word:u.value};I(b)}return M(()=>{u.value="",y("refreshPostsList")}),F(()=>{u.value="",y("refreshPostsList")}),(o,p)=>(d(),m(a(g),{size:"small",vertical:""},{default:e(()=>[t(a(K),{size:"small",bordered:!0,embedded:"",class:"hongbao-post-card"},{default:e(()=>[t(a(g),{vertical:"",align:"center"},{default:e(()=>[t(a(g),{align:"center",size:"small"},{default:e(()=>[t(a(n),{style:{"font-size":"1rem"}},{default:e(()=>[s(i(T.value),1)]),_:1}),h("img",{src:"/hongbao.svg",style:E({height:a(S).isMobile?"30px":"36px"})},null,4)]),_:1}),h("div",null,[o.hongbaoData.question?(d(),m(a(n),{key:0,depth:3},{default:e(()=>[s("提示：")]),_:1})):_("",!0),t(a(n),null,{default:e(()=>[s(i(o.hongbaoData.question),1)]),_:1})]),h("div",null,[o.hongbaoData.key_word?(d(),m(a(n),{key:0,depth:3},{default:e(()=>[s("口令：")]),_:1})):_("",!0),t(a(n),null,{default:e(()=>[s(i(o.hongbaoData.key_word),1)]),_:1})]),h("div",null,[t(a(n),{depth:3},{default:e(()=>[s("数量：")]),_:1}),t(a(n),null,{default:e(()=>[s(i(o.hongbaoData.num_remains)+" /"+i(o.hongbaoData.num_total)+" （"+i(P.value)+"）",1)]),_:1})]),o.hongbaoData.olo_hide?_("",!0):(d(),G("div",Q,[t(a(n),{depth:3},{default:e(()=>[s("总额：")]),_:1}),t(a(n),null,{default:e(()=>{var l;return[s(i((l=o.hongbaoData.olo_total)==null?void 0:l.toLocaleString("en-us"))+" olo ",1)]}),_:1})]))]),_:1})]),_:1}),t(a(g),{size:"small",wrap:!1},{default:e(()=>{var l;return[o.hongbaoData.hongbao_user===null?(d(),m(a(v),{key:0,value:u.value,"onUpdate:value":p[0]||(p[0]=b=>u.value=b),maxlength:255,onKeyup:O(c,["enter"]),style:{"max-width":"328px"},placeholder:o.hongbaoData.num_remains===0?"已经抢光啦":"请输入口令","auto-size":"",disabled:o.hongbaoData.hongbao_user!==null||o.hongbaoData.num_remains===0},null,8,["value","placeholder","disabled"])):(d(),m(a(v),{key:1,value:`你抢到了${(l=o.hongbaoData.hongbao_user)==null?void 0:l.olo.toLocaleString("en-us")}个olo`,maxlength:255,style:{"max-width":"328px"},"auto-size":"",disabled:""},null,8,["value"])),t(a(R),{type:"primary",onClick:c,disabled:o.hongbaoData.hongbao_user!==null||a(z)||o.hongbaoData.num_remains===0},{default:e(()=>[s("抢！")]),_:1},8,["disabled"])]}),_:1})]),_:1}))}}),yo=U(W,[["__scopeId","data-v-02200e4f"]]);export{yo as default};
