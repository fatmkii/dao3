var K=Object.defineProperty;var Q=(o,a,e)=>a in o?K(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e;var W=(o,a,e)=>(Q(o,typeof a!="symbol"?a+"":a,e),e);import{a0 as j,Y as S,aQ as X,a1 as F,w,L as Y,a7 as U,d as T,am as q,al as Z,a8 as ee,aR as te,$ as M,a5 as oe,S as y,aS as se,ae as L,aT as ne,A as c,F as _,j as g,l as ae,aU as re,u as R,M as v,f as l,H as p,a as t,N as $,G as C,k as B,R as ie,O as le,_ as ce,b as A,n as G,z as D,Q as O,C as I,m as H,i as de,aG as ue,aV as V,s as N,o as me,c as pe,aW as he,ah as fe,aX as ve,U as ge}from"./app-CbdLWzt8.js";const _e=j([j("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),S("spin-container",`
 position: relative;
 `,[S("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[X()])]),S("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),S("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[F("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),S("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),S("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[F("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),we={small:20,medium:18,large:16},ke=Object.assign(Object.assign({},U.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),ye=w({name:"Spin",props:ke,setup(o){const{mergedClsPrefixRef:a,inlineThemeDisabled:e}=Y(o),u=U("Spin","-spin",_e,ne,o,a),i=T(()=>{const{size:s}=o,{common:{cubicBezierEaseInOut:n},self:h}=u.value,{opacitySpinning:E,color:k,textColor:x}=h,z=typeof s=="number"?q(s):h[Z("size",s)];return{"--n-bezier":n,"--n-opacity-spinning":E,"--n-size":z,"--n-color":k,"--n-text-color":x}}),r=e?ee("spin",T(()=>{const{size:s}=o;return typeof s=="number"?String(s):s[0]}),i,o):void 0,m=te(o,["spinning","show"]),d=M(!1);return oe(s=>{let n;if(m.value){const{delay:h}=o;if(h){n=window.setTimeout(()=>{d.value=!0},h),s(()=>{clearTimeout(n)});return}}d.value=m.value}),{mergedClsPrefix:a,active:d,mergedStrokeWidth:T(()=>{const{strokeWidth:s}=o;if(s!==void 0)return s;const{size:n}=o;return we[typeof n=="number"?"medium":n]}),cssVars:e?void 0:i,themeClass:r==null?void 0:r.themeClass,onRender:r==null?void 0:r.onRender}},render(){var o,a;const{$slots:e,mergedClsPrefix:u,description:i}=this,r=e.icon&&this.rotate,m=(i||e.description)&&y("div",{class:`${u}-spin-description`},i||((o=e.description)===null||o===void 0?void 0:o.call(e))),d=e.icon?y("div",{class:[`${u}-spin-body`,this.themeClass]},y("div",{class:[`${u}-spin`,r&&`${u}-spin--rotate`],style:e.default?"":this.cssVars},e.icon()),m):y("div",{class:[`${u}-spin-body`,this.themeClass]},y(se,{clsPrefix:u,style:e.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${u}-spin`}),m);return(a=this.onRender)===null||a===void 0||a.call(this),e.default?y("div",{class:[`${u}-spin-container`,this.themeClass],style:this.cssVars},y("div",{class:[`${u}-spin-content`,this.active&&`${u}-spin-content--spinning`,this.contentClass],style:this.contentStyle},e),y(L,{name:"fade-in-transition"},{default:()=>this.active?d:null})):d}}),Ce={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},xe=g("path",{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z",fill:"currentColor"},null,-1),ze=[xe],be=w({name:"ArrowDown",render:function(a,e){return c(),_("svg",Ce,ze)}}),Se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},$e=g("path",{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z",fill:"currentColor"},null,-1),Le=[$e],De=w({name:"ArrowUp",render:function(a,e){return c(),_("svg",Se,Le)}}),Me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Te=g("path",{d:"M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z",fill:"currentColor"},null,-1),Be=[Te],He=w({name:"Forward",render:function(a,e){return c(),_("svg",Me,Be)}}),Ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ee=g("path",{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33l-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23l-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87L12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z",fill:"currentColor"},null,-1),Oe=[Ee],Ie=w({name:"LayerGroup",render:function(a,e){return c(),_("svg",Ne,Oe)}}),Ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Re=g("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),We=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1),je=[Re,We],Xe=w({name:"SearchOutline",render:function(a,e){return c(),_("svg",Ve,je)}});let P;function Ye(o,a=500){return function(...e){clearTimeout(P),P=setTimeout(()=>{o(...e)},a)}}function qe(o){class a{constructor(i){W(this,"_logData",M(o));const r=localStorage.getItem("browseLogger");if(!r)this._logData.value=i;else{let m=JSON.parse(r);for(let d in m)m[d].expireTime<Date.now()&&delete m[d];this._logData.value=JSON.parse(r)}}log(i,r){const m=new Date().getTime();this._logData.value[i]={expireTime:m,floor:r},localStorage.setItem("browseLogger",JSON.stringify(this._logData.value))}initThread(i){this.get(i)===void 0&&this.log(i,0)}get(i){return this._logData.value[i]}get data(){return this._logData}}return new a(o)}const J=o=>(ie("data-v-f6bacd12"),o=o(),le(),o),Fe=J(()=>g("svg",{viewBox:"0 0 16 16"},[g("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1)),Ge=J(()=>g("svg",{viewBox:"0 0 512 512"},[g("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})],-1)),Pe=w({__name:"Sidebar",props:{mode:{}},emits:["refresh","showJumpModal","newThread"],setup(o,{emit:a}){ae(s=>({"00cb0681":t(u).primaryColor}));const e=re(),u=R(),i=M(!1),r=M(24),m=a;function d(s){s==="up"&&window.scrollTo(0,0),s==="down"&&window.scrollTo(0,document.body.scrollHeight)}return(s,n)=>(c(),v(t(B),{vertical:"",size:[0,16],class:"sidebar",align:"center"},{default:l(()=>[p(L,{name:"slide-fade"},{default:l(()=>[i.value?(c(),v(t($),{key:0,size:r.value+2,class:"icon",onClick:n[0]||(n[0]=h=>d("up")),color:t(e).themeColor.sidebarColor},{default:l(()=>[p(t(De))]),_:1},8,["size","color"])):C("",!0)]),_:1}),p(L,{name:"slide-fade"},{default:l(()=>[i.value&&s.mode=="forum"?(c(),v(t($),{key:0,size:r.value,class:"icon",onClick:n[1]||(n[1]=h=>m("newThread")),color:t(e).themeColor.sidebarColor},{default:l(()=>[Fe]),_:1},8,["size","color"])):C("",!0)]),_:1}),p(L,{name:"slide-fade"},{default:l(()=>[i.value?(c(),v(t($),{key:0,size:r.value,class:"icon",onClick:n[2]||(n[2]=h=>m("refresh")),color:t(e).themeColor.sidebarColor},{default:l(()=>[Ge]),_:1},8,["size","color"])):C("",!0)]),_:1}),p(L,{name:"slide-fade"},{default:l(()=>[i.value&&s.mode=="thread"?(c(),v(t($),{key:0,size:r.value,class:"icon",color:t(e).themeColor.sidebarColor,onClick:n[3]||(n[3]=h=>m("showJumpModal"))},{default:l(()=>[p(t(He))]),_:1},8,["size","color"])):C("",!0)]),_:1}),p(L,{name:"slide-fade"},{default:l(()=>[i.value?(c(),v(t($),{key:0,size:r.value+2,class:"icon",onClick:n[4]||(n[4]=h=>d("down")),color:t(e).themeColor.sidebarColor},{default:l(()=>[p(t(be))]),_:1},8,["size","color"])):C("",!0)]),_:1}),p(t($),{size:r.value,class:"icon",onClick:n[5]||(n[5]=h=>i.value=!i.value),style:{"margin-top":"6px"},color:t(e).themeColor.sidebarColor},{default:l(()=>[p(t(Ie))]),_:1},8,["size","color"])]),_:1}))}}),Ze=ce(Pe,[["__scopeId","data-v-f6bacd12"]]),Ue=w({__name:"LoudspeakerModal",props:{loudspeakerData:{}},setup(o,{expose:a}){const e=A(),u=R(),i=T(()=>{const d=window.innerWidth;return d>=532?"500px":d-32+"px"}),r=M(!1);function m(){r.value=!0}return a({show:m}),(d,s)=>(c(),v(t(ue),{show:r.value,"onUpdate:show":s[3]||(s[3]=n=>r.value=n),"display-directive":"if"},{default:l(()=>[p(t(de),{style:H({maxWidth:i.value}),title:"大喇叭列表",closable:"",onClose:s[2]||(s[2]=n=>r.value=!1),size:"small"},{action:l(()=>[p(t(B),{justify:"end"},{default:l(()=>[p(t(G),{type:"primary",onClick:s[0]||(s[0]=n=>d.$router.push("/loudspeaker"))},{default:l(()=>[D("去发大喇叭")]),_:1}),p(t(G),{onClick:s[1]||(s[1]=n=>r.value=!1)},{default:l(()=>[D("关闭")]),_:1})]),_:1})]),default:l(()=>[p(t(B),{vertical:"",size:[0,12],class:"loudspeaker-content",style:{"max-height":"75vh","overflow-y":"auto"}},{default:l(()=>[(c(!0),_(I,null,O(d.loudspeakerData,(n,h)=>(c(),v(V(n.thread_id?"router-link":"span"),{key:n.id,style:H({color:t(e).userCustom.monochromeMode?t(u).textColor1:n.color}),to:n.thread_id!==null?`/thread/${n.thread_id}/1`:void 0},{default:l(()=>[D(N(h)+". "+N(n.content),1)]),_:2},1032,["style","to"]))),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["show"]))}}),Ae={class:"loudspeaker-container loudspeaker_container"},Je={key:1},et=w({__name:"LoudspeakerComponent",setup(o){const a=me(),e=A(),u=M(),i=R(),r=T(()=>!d&&s.value.length===0),m={binggan:a.binggan,mode:"effective"},{loading:d,data:s,send:n,onSuccess:h}=pe(k=>he(k),{immediate:!1,initialData:[]});a.binggan&&n(m),h(()=>{fe(()=>{setTimeout(()=>E(),1e3)})});function E(){const x=document.getElementsByClassName("loudspeaker-content")[0].offsetHeight,z=document.createElement("style");z.id="loudspeaker-keyframe";const f=`@keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }
            @-webkit-keyframes loudspeaker-move {
                /* 原理 height值的变化 移动一个容器的高度 */
                from {
                    top: 0;
                }
                to {
                    top: -DOM_HEIGHTpx;
                }
            }

            .loudspeaker-content {
                animation: SPEEDs loudspeaker-move infinite linear;
                -webkit-animation: SPEEDs loudspeaker-move infinite linear;
            }`;z.innerHTML=f.replace(/DOM_HEIGHT/g,String(Math.floor(x/2))).replace(/SPEED/g,String(Math.floor(x/20))),document.getElementsByTagName("head")[0].appendChild(z)}return ve(()=>{var k;(k=document.getElementById("loudspeaker-keyframe"))==null||k.remove()}),(k,x)=>{const z=ge("router-link");return c(),v(t(B),{wrap:!1,style:{"margin-top":"8px"}},{default:l(()=>[g("img",{style:{height:"2.5rem",cursor:"pointer"},src:"https://oss.cpttmm.com/xhg_other/miku_loudspeaker.png",onClick:x[0]||(x[0]=f=>{var b;return(b=u.value)==null?void 0:b.show()})}),g("div",Ae,[t(d)?(c(),v(t(ye),{key:0,size:"small"})):C("",!0),r.value?(c(),_("div",Je,[p(z,{to:"/loudspeaker"},{default:l(()=>[D(" 目前没有大喇叭，要发一个吗？ ")]),_:1})])):C("",!0),r.value?C("",!0):(c(),v(t(B),{key:2,vertical:"",size:[0,4],class:"loudspeaker-content"},{default:l(()=>[(c(!0),_(I,null,O(t(s),(f,b)=>(c(),v(V(f.thread_id?"router-link":"span"),{key:b,style:H({color:t(e).userCustom.monochromeMode?t(i).textColor1:f.color}),to:f.thread_id!==null?`/thread/${f.thread_id}/1`:void 0},{default:l(()=>[D(N(f.content),1)]),_:2},1032,["style","to"]))),128)),(c(!0),_(I,null,O(t(s),(f,b)=>(c(),v(V(f.thread_id?"router-link":"span"),{key:b+t(s).length,style:H({color:t(e).userCustom.monochromeMode?t(i).textColor1:f.color}),to:f.thread_id!==null?`/thread/${f.thread_id}/1`:void 0},{default:l(()=>[D(N(f.content),1)]),_:2},1032,["style","to"]))),128))]),_:1}))]),p(Ue,{"loudspeaker-data":t(s),ref_key:"LoudspeakerModalCom",ref:u},null,8,["loudspeaker-data"])]),_:1})}}});export{be as D,ye as N,Xe as S,De as U,et as _,Ze as a,Ye as b,qe as u};
