import{i as f,f as d,j as u,d as S,k as M,m as y,n as w}from"./vendor-B6OyIHrq.js";import{g as L,d as k,s as D,l as C,a as z,b as _,c as x,e as T}from"./data-Chqh2Qd2.js";import{u as P,f as W}from"./api-BmrQciZx.js";const j=f("commonStore",()=>{const t=d(!1),a=d(0),n=d(document.body.clientWidth),i=d(document.body.clientWidth<1200),l=u(()=>n.value>=532?"500px":n.value-32+"px");window.addEventListener("resize",()=>{i.value=document.body.clientWidth<1200,n.value=document.body.clientWidth});const o=d(!0);function s(){const g=document.getElementById("app").offsetWidth-24;return Math.ceil(g*250/920)+"px"}const m=d(s());window.addEventListener("resize",()=>m.value=s());const h=u(()=>{const c=[{month:6,date:18},{month:11,date:11},{month:1,date:28},{month:1,date:29}],g=S.tz();let b=!1;return c.forEach(p=>{g.month()+1===p.month&&g.date()===p.date&&(b=!0)}),b}),v=u(()=>S.tz().month()===9),e=M("user_custom",{version:240505,imgHost:"imgbb",hongbaoThenStop:!1,holdPageWhenListening:!1,lessToast:!1,postLegacyMode:!1,monochromeMode:!1,sidebarLeft:!1,loudspeakerPosition:"bottom",quoteMax:3,foldMaxLine:16,emojiWhiteBack:!1,lineHeightPost:28,fontSizePost:16,fontSizeQuote:16,fontSizeFooter:14,fontSizeThreadList:16,fontSizeThreadListFooter:14,fontSizeInput:16,threadListCardPadding:12,threadListInnerMargin:6,postCardPadding:12,postInnerMargin:12,hidePingbiciFloor:!1,pingbiciIngnoreCase:!1},localStorage,{mergeDefaults:!0});function r(){const c={title:"重置设定",closable:!1,content:"确定要重置所有一般设定吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{e.value.quoteMax=3,e.value.foldMaxLine=16,e.value.lineHeightPost=28,e.value.fontSizePost=16,e.value.fontSizeQuote=16,e.value.fontSizeFooter=14,e.value.fontSizeThreadList=16,e.value.fontSizeThreadListFooter=14,e.value.fontSizeInput=16,e.value.threadListCardPadding=12,e.value.threadListInnerMargin=6,e.value.postCardPadding=12,e.value.postInnerMargin=12,e.value.emojiWhiteBack=!1}};window.$dialog.warning(c)}return{unauthModalShow:t,requestErrorCode:a,isMobile:i,clientWidth:n,showTopbarNav:o,bannerHeight:m,isDouble11:h,isOctober:v,userCustom:e,modalMaxWidth:l,userCustomReset:r}}),O=f("themeStore",()=>{const t=M("theme","green");function a(s){t.value=s}const n=u(()=>({light:null,sfw:null,dark:y,green:null})[t.value]||null),i=u(()=>({light:C,sfw:D,dark:k,green:L})[t.value]||C),l=u(()=>({light:{strong:!0,secondary:!0,tertiary:!1},sfw:{strong:!0,secondary:!1,tertiary:!0},dark:{strong:!0,secondary:!0,tertiary:!1},green:{strong:!1,secondary:!1,tertiary:!1}})[t.value]||{strong:!0,secondary:!0,tertiary:!1}),o=u(()=>({light:T,sfw:x,dark:_,green:z})[t.value]||T);return{themeClass:n,themeOverrideClass:i,themeChange:a,buttonThemeAttr:l,themeColor:o}}),B=f("userStore",()=>{const t=d(!1),a=localStorage.getItem("Binggan"),n=localStorage.getItem("Token"),i={binggan:{nickname:"= =",coin:0,coin_in_bank:0,use_pingbici:!1,new_msg:!1,user_lv:0,locked_ttl:0},my_battle_chara:[],emoji_excluded:[],pingbici:{content_pingbici:[],fjf_pingbici:[],title_pingbici:[]},my_emoji:[]},{loading:l,data:o,onSuccess:s,send:m}=w(P,{initialData:i,immediate:!1});a&&n&&(t.value=!0,m(a));function h(){m(a)}function v(r){return r===void 0||l.value||o.value.binggan.admin_forums===void 0?!1:o.value.binggan.admin_forums.includes(r)}const e=u(()=>{const r=o.value.binggan.admin??0;return{isForumAdmin:r>=1,isNormalAdmin:r>=10,isSeniorAdmin:r>=20,isSuperAdmin:r>=99}});return{userDataLoading:l,userData:o,userLoginStatus:t,binggan:a,admin:e,refreshUserData:h,checkAdminForums:v}}),E=f("forumsStore",()=>{const{loading:t,data:a,send:n}=w(W,{initialData:[],immediate:!1});n();function i(l){return a.value.find(o=>o.id===l)}return{forumsDataLoading:t,forumsData:a,forumData:i,getForumsData:n}});export{B as a,O as b,E as c,j as u};
