import{n as E,U as ne,W as se,t as w,a1 as pe,l as K,am as Q,g as B,p as $,j as m,x as a,K as F,E as t,q as e,F as W,I as x,i as C,Q as h,w as L,J as N,z as Re,L as n,S as d,a_ as me,a2 as re,ay as ae,a3 as oe,b as R,ac as ye,ad as xe,b0 as ke,aH as ze,bf as le,P as A,bl as Z,ar as Y,bg as Se,m as j,aZ as X,aw as ee,ax as P,av as _e,ak as he,b3 as Be,b4 as Ee,ab as He}from"./vendor-CSO85mTd.js";import{a as H,u as q,b as O,_ as ue,c as te}from"./app-BjEN923_.js";import{s as qe,g as Ve,h as Ye,i as ce,j as je,k as Le,l as De,m as Ge}from"./admin-DXocw54A.js";import{u as ie}from"./forums-Xz5YUn50.js";import{i as Je,a as Ke}from"./inputNumberFormat-BPxWRFt_.js";const Qe={class:"banner-box-sm"},We=["src"],Ze=["src","onClick"],Xe=E({__name:"TabBanners",setup(V){ne(u=>({v6a1c8eac:e(T).textColor1}));const k=H();q();const z=ie(),T=se(),b=w(0);pe(()=>{p.value.length>0&&(b.value=p.value[0].value)});const p=K(()=>k.binggan===null||k.userData.binggan.admin_forums===void 0?[]:z.forumsData.reduce((u,l)=>(k.checkAdminForums(l.id)&&u.push({value:l.id,label:l.name,forumId:l.id}),u),[])),r=w([]);Q(b,u=>{var l,M;u===void 0?r.value=[]:r.value=[...(M=(l=z.forumData(u))==null?void 0:l.banners)!=null?M:[]]});const _=w(!1),o=w(),s=K(()=>{var u,l;return(l=(u=o.value)==null?void 0:u.split(/[\n,，]+/).filter(M=>M!=""))!=null?l:[]});function f(){_.value=!1,r.value=r.value.concat(s.value),o.value=void 0,v()}function S(u){var l;(l=r.value)==null||l.splice(u,1)}const{loading:I,send:g,onSuccess:U}=B(u=>qe(u),{immediate:!1});U(()=>{z.getForumsData()});function v(){const u={binggan:k.binggan,forum_id:b.value,banners:r.value};g(u)}return(u,l)=>(m(),$(e(x),{vertical:""},{default:a(()=>[_.value?(m(),$(e(W),{key:0,title:"待追加的版头",size:"small",class:"dash-line"},{"header-extra":a(()=>[t(e(x),{size:"small"},{default:a(()=>[t(e(O),{type:"primary",onClick:f},{default:a(()=>[...l[4]||(l[4]=[n("追加",-1)])]),_:1}),t(e(O),{type:"default",onClick:l[0]||(l[0]=M=>{_.value=!1,o.value=void 0})},{default:a(()=>[...l[5]||(l[5]=[n("关闭",-1)])]),_:1})]),_:1})]),default:a(()=>[t(e(x),{size:"small"},{default:a(()=>[(m(!0),C(h,null,L(s.value,(M,D,G)=>(m(),C("div",Qe,[N("img",{src:M,style:{width:"100%"}},null,8,We)]))),256))]),_:1}),t(e(Re),{type:"textarea",value:o.value,"onUpdate:value":l[1]||(l[1]=M=>o.value=M),placeholder:"在这里贴网址追加版头。可以一次多个，每行一个。",style:{"border-radius":"10px","margin-top":"6px"},autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})):F("",!0),t(e(W),{title:"版头设定",size:"small"},{"header-extra":a(()=>[t(e(x),{size:"small",align:"center",wrap:!0},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...l[6]||(l[6]=[n("选择小岛",-1)])]),_:1}),t(e(me),{value:b.value,"onUpdate:value":l[2]||(l[2]=M=>b.value=M),options:p.value,"consistent-menu-width":!1,style:{width:"100px"}},null,8,["value","options"]),_.value?F("",!0):(m(),$(e(O),{key:0,type:"primary",onClick:l[3]||(l[3]=M=>_.value=!0)},{default:a(()=>[...l[7]||(l[7]=[n("追加",-1)])]),_:1}))]),_:1})]),default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...l[8]||(l[8]=[n("点击图片移除",-1)])]),_:1}),t(e(x),{wrap:!0,size:[4,4]},{default:a(()=>[(m(!0),C(h,null,L(r.value,(M,D)=>{var G;return m(),C("div",{key:D+((G=b.value)!=null?G:0)*1e3,class:"banner-box"},[N("img",{src:M,class:"banner-img",onClick:fe=>S(D)},null,8,Ze)])}),128))]),_:1})]),_:1}),t(e(x),{align:"center",justify:"end"},{default:a(()=>[t(e(d),{depth:3,style:{"font-size":"0.875rem"}},{default:a(()=>[...l[9]||(l[9]=[n("各个小岛的变更要分别提交喔",-1)])]),_:1}),t(e(O),{type:"primary",loading:e(I),disable:e(I),onClick:v},{default:a(()=>[...l[10]||(l[10]=[n("提交",-1)])]),_:1},8,["loading","disable"])]),_:1})]),_:1}))}}),et=ue(Xe,[["__scopeId","data-v-35893c7d"]]),tt=E({__name:"TabGlobal",setup(V){ne(o=>({v21c7f12a:e(z).textColor1}));const k=H();q(),ie();const z=se(),T=w(!1),b=w(!1),p=w(!1),r=w(!1);k.admin.isSuperAdmin===!0&&Ve().then(o=>{T.value=o.new_binggan,b.value=o.new_loudspeaker,p.value=o.new_binggan_force,r.value=!0});function _(o,s){const f={binggan:k.binggan,key:o,value:JSON.stringify(s)};Ye(f).then()}return(o,s)=>(m(),$(e(x),{vertical:"",size:[6,12]},{default:a(()=>[t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...s[6]||(s[6]=[n("领取饼干开关",-1)])]),_:1}),t(e(ae),{value:T.value,"onUpdate:value":s[0]||(s[0]=f=>T.value=f),disabled:!r.value,onUpdateValue:s[1]||(s[1]=f=>_("new_binggan",f))},null,8,["value","disabled"]),re(t(e(d),{depth:3},{default:a(()=>[...s[7]||(s[7]=[n("读取中",-1)])]),_:1},512),[[oe,!r.value]])]),_:1}),t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...s[8]||(s[8]=[n("大喇叭开关",-1)])]),_:1}),t(e(ae),{value:b.value,"onUpdate:value":s[2]||(s[2]=f=>b.value=f),disabled:!r.value,onUpdateValue:s[3]||(s[3]=f=>_("new_loudspeaker",f))},null,8,["value","disabled"]),re(t(e(d),{depth:3},{default:a(()=>[...s[9]||(s[9]=[n("读取中",-1)])]),_:1},512),[[oe,!r.value]])]),_:1}),t(e(x),{size:"small"},{default:a(()=>[t(e(d),{style:{width:"6.2rem"}},{default:a(()=>[...s[10]||(s[10]=[n("强制打开饼干（慎用）",-1)])]),_:1}),t(e(ae),{value:p.value,"onUpdate:value":s[4]||(s[4]=f=>p.value=f),disabled:!r.value,onUpdateValue:s[5]||(s[5]=f=>_("new_binggan_force",f))},null,8,["value","disabled"]),re(t(e(d),{depth:3},{default:a(()=>[...s[11]||(s[11]=[n("读取中",-1)])]),_:1},512),[[oe,!r.value]])]),_:1})]),_:1}))}}),at=ue(tt,[["__scopeId","data-v-3d2b5c4f"]]),lt={class:"actives-item"},nt={style:{"margin-left":"auto"}},st={key:0,style:{"margin-top":"6px"}},ut={style:{"margin-top":"6px"}},it={style:{"margin-top":"6px"}},dt=E({__name:"TabActives",setup(V){ne(v=>({a0198f68:e(T).dividerColor})),R.extend(ye),R.extend(xe);const k=H(),z=q(),T=se(),b=w(R().tz("Asia/Shanghai").format("YYYY-MM-DD"));Q(b,()=>S());const p=w(1);Q(p,()=>S()),pe(()=>S());function r(v){return R().add(1,"day").isBefore(v)}const _=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0},{title:"主题",key:"thread_title",render:g,resizable:!0},{title:"回复",key:"post_content",render:U,resizable:!0}],{loading:o,data:s,send:f}=B(v=>ce(v),{immediate:!1,initialData:{data:[],last_page:1}});function S(){const v={binggan:k.binggan,date:b.value,page:p.value};f(v)}function I(v){return{name:"thread",params:{threadId:v.thread_id,page:v.floor===null?1:Math.ceil((v.floor+1)/200)},hash:v.floor===null?void 0:"#f_"+v.floor}}function g(v,u){return v.thread_id!==null?j(Z,{to:I(v),target:"_blank"},()=>j(Y,{style:"max-width: 120px"},()=>v.thread_title)):j(Y,{style:"max-width: 120px"},()=>v.thread_title)}function U(v,u){return v.thread_id!==null?j(Z,{to:I(v),target:"_blank"},()=>j(Y,{style:"max-width: 120px"},()=>v.post_content)):j(Y,{style:"max-width: 120px"},()=>v.post_content)}return(v,u)=>(m(),$(e(x),{size:"small"},{default:a(()=>[t(e(ke),{"formatted-value":b.value,"onUpdate:formattedValue":u[0]||(u[0]=l=>b.value=l),"value-format":"yyyy-MM-dd",type:"date",size:e(z).isMobile?"small":"medium","is-date-disabled":r},null,8,["formatted-value","size"]),t(e(O),{type:"primary",onClick:u[1]||(u[1]=l=>S())},{default:a(()=>[...u[4]||(u[4]=[n(" 查询 ",-1)])]),_:1}),t(e(W),{title:"管理员操作记录",size:"small"},{default:a(()=>[e(z).isMobile?F("",!0):(m(),$(e(x),{key:0},{default:a(()=>[t(e(ze),{columns:_,data:e(s).data,bordered:!1,loading:e(o),style:{height:"100%"}},null,8,["data","loading"]),t(e(le),{page:p.value,"onUpdate:page":u[2]||(u[2]=l=>p.value=l),"page-count":e(s).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(m(),C(h,{key:1},[e(s).data.length>0?(m(),$(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e(o)?F("",!0):(m(!0),C(h,{key:0},L(e(s).data,l=>(m(),C("div",lt,[t(e(x),null,{default:a(()=>[N("div",null,[t(e(d),{depth:3},{default:a(()=>[...u[5]||(u[5]=[n("时间：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(l.created_at),1)]),_:2},1024)]),N("div",nt,[t(e(d),{depth:3},{default:a(()=>[...u[6]||(u[6]=[n("管理员：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(l.name),1)]),_:2},1024)])]),_:2},1024),l.olo?(m(),C("div",st,[t(e(d),{depth:3},{default:a(()=>[...u[7]||(u[7]=[n("罚款：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(l.olo),1)]),_:2},1024)])):F("",!0),N("div",ut,[t(e(d),{depth:3},{default:a(()=>[...u[8]||(u[8]=[n("操作：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(l.active),1)]),_:2},1024)]),N("div",it,[t(e(d),{depth:3},{default:a(()=>[...u[9]||(u[9]=[n("原因：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(l.content),1)]),_:2},1024)]),l.thread_title!==null?(m(),$(e(x),{key:1,style:{"margin-top":"6px"},wrap:!1},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...u[10]||(u[10]=[n("主题：",-1)])]),_:1}),t(e(Z),{to:I(l),style:{"max-width":"80%"}},{default:a(()=>[t(e(Y),null,{default:a(()=>[n(A(l.thread_title),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):F("",!0),l.post_content!==null?(m(),$(e(x),{key:2,style:{"margin-top":"6px"},wrap:!1},{default:a(()=>[t(e(d),{depth:3},{default:a(()=>[...u[11]||(u[11]=[n("主题：",-1)])]),_:1}),t(e(Z),{to:I(l),style:{"max-width":"80%"}},{default:a(()=>[t(e(Y),null,{default:a(()=>[n(A(l.post_content),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024)):F("",!0)]))),256)),t(e(le),{page:p.value,"onUpdate:page":u[3]||(u[3]=l=>p.value=l),"page-count":e(s).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(m(),$(e(Se),{key:1}))],64)):F("",!0)]),_:1})]),_:1}))}}),rt=ue(dt,[["__scopeId","data-v-a35e3f42"]]),ot={class:"actives-item"},mt={style:{"margin-left":"auto"}},pt={key:0,style:{"margin-top":"6px"}},ft={key:1,style:{"margin-top":"6px"}},gt={style:{"margin-top":"6px"}},vt={style:{"margin-top":"6px"}},bt=E({__name:"TabActivesSuper",setup(V){ne(I=>({v2c7ab229:e(T).dividerColor})),R.extend(ye),R.extend(xe);const k=H(),z=q(),T=se(),b=w(R().tz("Asia/Shanghai").format("YYYY-MM-DD"));Q(b,()=>S());const p=w(1);Q(p,()=>S()),pe(()=>S());function r(I){return R().add(1,"day").isBefore(I)}const _=[{title:"时间",key:"created_at",resizable:!0},{title:"管理员",key:"name",resizable:!0},{title:"目标饼干",key:"binggan_target",resizable:!0},{title:"罚款",key:"olo",resizable:!0},{title:"操作",key:"active",resizable:!0},{title:"原因",key:"content",resizable:!0}],{loading:o,data:s,send:f}=B(I=>ce(I),{immediate:!1,initialData:{data:[],last_page:1}});function S(){const I={binggan:k.binggan,date:b.value,page:p.value,show_super:!0};f(I)}return(I,g)=>(m(),$(e(x),{size:"small"},{default:a(()=>[t(e(ke),{"formatted-value":b.value,"onUpdate:formattedValue":g[0]||(g[0]=U=>b.value=U),"value-format":"yyyy-MM-dd",type:"date",size:e(z).isMobile?"small":"medium","is-date-disabled":r},null,8,["formatted-value","size"]),t(e(O),{type:"primary",onClick:g[1]||(g[1]=U=>S())},{default:a(()=>[...g[4]||(g[4]=[n(" 查询 ",-1)])]),_:1}),t(e(W),{title:"管理员操作记录",size:"small"},{default:a(()=>[e(z).isMobile?F("",!0):(m(),$(e(x),{key:0},{default:a(()=>[t(e(ze),{columns:_,data:e(s).data,bordered:!1,loading:e(o),style:{height:"100%"}},null,8,["data","loading"]),t(e(le),{page:p.value,"onUpdate:page":g[2]||(g[2]=U=>p.value=U),"page-count":e(s).last_page,size:"medium",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})),e(z).isMobile?(m(),C(h,{key:1},[e(s).data.length>0?(m(),$(e(x),{key:0,vertical:"",align:"start",size:"small"},{default:a(()=>[e(o)?F("",!0):(m(!0),C(h,{key:0},L(e(s).data,U=>(m(),C("div",ot,[t(e(x),null,{default:a(()=>[N("div",null,[t(e(d),{depth:3},{default:a(()=>[...g[5]||(g[5]=[n("时间：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(U.created_at),1)]),_:2},1024)]),N("div",mt,[t(e(d),{depth:3},{default:a(()=>[...g[6]||(g[6]=[n("管理员：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(U.name),1)]),_:2},1024)])]),_:2},1024),U.olo?(m(),C("div",pt,[t(e(d),{depth:3},{default:a(()=>[...g[7]||(g[7]=[n("目标饼干：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(U.binggan_target),1)]),_:2},1024)])):F("",!0),U.olo?(m(),C("div",ft,[t(e(d),{depth:3},{default:a(()=>[...g[8]||(g[8]=[n("罚款：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(U.olo),1)]),_:2},1024)])):F("",!0),N("div",gt,[t(e(d),{depth:3},{default:a(()=>[...g[9]||(g[9]=[n("操作：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(U.active),1)]),_:2},1024)]),N("div",vt,[t(e(d),{depth:3},{default:a(()=>[...g[10]||(g[10]=[n("原因：",-1)])]),_:1}),t(e(d),null,{default:a(()=>[n(A(U.content),1)]),_:2},1024)])]))),256)),t(e(le),{page:p.value,"onUpdate:page":g[3]||(g[3]=U=>p.value=U),"page-count":e(s).last_page,size:"small",style:{"margin-left":"auto"}},null,8,["page","page-count"])]),_:1})):(m(),$(e(Se),{key:1}))],64)):F("",!0)]),_:1})]),_:1}))}}),_t=ue(bt,[["__scopeId","data-v-296b2d9d"]]),yt=E({__name:"TabSuperAdmin",setup(V){const k=H(),z=q(),T=ie(),b=w(null),p=w(null),r=w(null),_=w(null),o=w({binggan:"",olo:void 0,message:""}),s=w({uuid:""}),f=w({thread_id:null,forum_id:1,nissin_clear:!0}),S=w({binggan:"",medalId:181}),I=K(()=>T.forumsData.map(c=>({value:c.id,label:c.name}))),g=[{value:181,label:"皇家御用画宗"},{value:182,label:"小火锅守护者"}],U={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},message:{required:!1},olo:{required:!0,message:"请选择要奖罚的olo",type:"number",trigger:"blur"}},v={uuid:{required:!0,message:"请填写目标UUID",trigger:"blur"}},u={thread_id:{required:!0,message:"请填写主题ID",type:"number",trigger:"blur"},forum_id:{required:!0,message:"请选择目标小岛",type:"number",trigger:"blur"},nissin_clear:{required:!0}},l={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},medalId:{required:!0,message:"请选择要发放的成就",type:"number",trigger:"blur"}},{loading:M,send:D,onSuccess:G,onError:fe}=B(c=>je(c),{immediate:!1});G(()=>{o.value.binggan=""}),fe(()=>{o.value.binggan=""});function Ue(){var c;(c=r.value)==null||c.validate(i=>{if(i){window.$message.error("请确认信息填写完整");return}else{const y={binggan:k.binggan,binggan_target:o.value.binggan,olo_num:o.value.olo,olo_message:o.value.message},J=o.value.olo>0?"奖励":"罚款",de={title:"奖罚olo",closable:!1,content:`对象饼干：${o.value.binggan} ${J}${o.value.olo}个olo`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{D(y)}};window.$dialog.warning(de)}})}const{loading:ge,send:we,onSuccess:$e,onError:kt}=B(c=>Le(c),{immediate:!1});$e(()=>{s.value.uuid=""});function Ie(){var c;(c=b.value)==null||c.validate(i=>{if(i){window.$message.error("请确认信息填写完整");return}else{const y={binggan:k.binggan,uuid:s.value.uuid};we(y)}})}const{loading:ve,send:Me,onSuccess:Te,onError:zt}=B(c=>De(c),{immediate:!1});Te(()=>{f.value.thread_id=null});function Ae(){var c;(c=p.value)==null||c.validate(i=>{if(i){window.$message.error("请确认信息填写完整");return}else{const y={binggan:k.binggan,thread_id:f.value.thread_id,forum_id:f.value.forum_id,nissin_clear:f.value.nissin_clear};Me(y)}})}const{loading:be,send:Ce,onSuccess:Ne,onError:Fe}=B(c=>Ge(c),{immediate:!1});Ne(()=>{S.value.binggan=""}),Fe(()=>{S.value.binggan=""});function Oe(){var c;(c=_.value)==null||c.validate(i=>{if(i){window.$message.error("请确认信息填写完整");return}else{const y={binggan:k.binggan,binggan_target:S.value.binggan,medal_id:S.value.medalId},J=g.find(Pe=>Pe.value===S.value.medalId),de={title:"发放成就",closable:!1,content:`对象饼干：${S.value.binggan}  发放成就：${J==null?void 0:J.label}`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Ce(y)}};window.$dialog.warning(de)}})}return(c,i)=>(m(),$(e(x),{style:{"max-width":"450px"}},{default:a(()=>[t(e(X),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...i[9]||(i[9]=[n("奖罚olo ",-1)])]),_:1})]),_:1}),t(e(ee),{ref_key:"oloFormRef",ref:r,model:o.value,"label-placement":"left","label-width":"auto",rules:U,size:e(z).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:a(()=>[t(e(P),{label:"目标饼干",path:"binggan"},{default:a(()=>[t(e(te),{value:o.value.binggan,"onUpdate:value":i[0]||(i[0]=y=>o.value.binggan=y)},null,8,["value"])]),_:1}),t(e(P),{label:"奖罚olo",path:"olo"},{default:a(()=>[t(e(_e),{value:o.value.olo,"onUpdate:value":i[1]||(i[1]=y=>o.value.olo=y),max:1e6,min:-1e6,step:1e3,parse:e(Ke),format:e(Je),placeholder:"正数是奖励，负数是罚款"},null,8,["value","parse","format"])]),_:1}),t(e(P),{label:"附带留言",path:"message"},{default:a(()=>[t(e(te),{value:o.value.message,"onUpdate:value":i[2]||(i[2]=y=>o.value.message=y),placeholder:"将显示在收支记录"},null,8,["value"])]),_:1}),t(e(O),{type:"primary",loading:e(M),disabled:e(M),onClick:Ue},{default:a(()=>[...i[10]||(i[10]=[n("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(X),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...i[11]||(i[11]=[n("解锁UUID ",-1)])]),_:1})]),_:1}),t(e(ee),{ref_key:"uuidFormRef",ref:b,model:s.value,"label-placement":"left","label-width":"auto",rules:v,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(P),{label:"解锁UUID",path:"uuid"},{default:a(()=>[t(e(te),{value:s.value.uuid,"onUpdate:value":i[3]||(i[3]=y=>s.value.uuid=y)},null,8,["value"])]),_:1}),t(e(O),{type:"primary",loading:e(ge),disabled:e(ge),onClick:Ie},{default:a(()=>[...i[12]||(i[12]=[n("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(X),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...i[13]||(i[13]=[n("主题转区 ",-1)])]),_:1})]),_:1}),t(e(ee),{ref_key:"transferFormRef",ref:p,model:f.value,"label-placement":"left","label-width":"auto",rules:u,size:e(z).isMobile?"small":"medium",style:{"max-width":"450px"}},{default:a(()=>[t(e(P),{label:"主题ID",path:"thread_id"},{default:a(()=>[t(e(_e),{"show-button":!1,value:f.value.thread_id,"onUpdate:value":i[4]||(i[4]=y=>f.value.thread_id=y),max:1e6,min:1},null,8,["value"])]),_:1}),t(e(P),{label:"目标小岛",path:"forum_id"},{default:a(()=>[t(e(me),{value:f.value.forum_id,"onUpdate:value":i[5]||(i[5]=y=>f.value.forum_id=y),options:I.value,"consistent-menu-width":!1,style:{width:"300px"}},null,8,["value","options"])]),_:1}),t(e(P),{label:"解锁日清",path:"nissin_clear"},{default:a(()=>[t(e(ae),{value:f.value.nissin_clear,"onUpdate:value":i[6]||(i[6]=y=>f.value.nissin_clear=y)},null,8,["value"])]),_:1}),t(e(O),{type:"primary",loading:e(ve),disabled:e(ve),onClick:Ae},{default:a(()=>[...i[14]||(i[14]=[n("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]),t(e(X),{dashed:"",style:{"margin-top":"8px","margin-bottom":"8px"}},{default:a(()=>[t(e(d),{style:{"font-size":"0.875rem"}},{default:a(()=>[...i[15]||(i[15]=[n("发放成就 ",-1)])]),_:1})]),_:1}),t(e(ee),{ref_key:"formRef",ref:_,model:S.value,"label-placement":"left","label-width":"auto",rules:l,size:e(z).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:a(()=>[t(e(P),{label:"目标饼干",path:"binggan"},{default:a(()=>[t(e(te),{value:S.value.binggan,"onUpdate:value":i[7]||(i[7]=y=>S.value.binggan=y)},null,8,["value"])]),_:1}),t(e(P),{label:"发放成就",path:"medalId"},{default:a(()=>[t(e(me),{value:S.value.medalId,"onUpdate:value":i[8]||(i[8]=y=>S.value.medalId=y),options:g,"menu-props":{style:{borderRadius:"10px"}}},null,8,["value"])]),_:1}),t(e(O),{type:"primary",loading:e(be),disabled:e(be),onClick:Oe},{default:a(()=>[...i[16]||(i[16]=[n("提交",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"])]),_:1}))}}),xt=E({__name:"AdminCard",setup(V){const k=H(),z=q(),T=ie(),b=K(()=>k.binggan===null||k.userData.binggan.admin_forums===void 0?[]:T.forumsData.reduce((p,r)=>(k.checkAdminForums(r.id)&&p.push({value:r.id,label:r.name,forumId:r.id}),p),[]));return(p,r)=>(m(),$(e(W),{hoverable:"",size:"small"},{default:a(()=>[t(e(x),{vertical:e(z).isMobile},{default:a(()=>[t(e(x),{size:"small",align:"center"},{default:a(()=>[...r[0]||(r[0]=[N("img",{src:"/ui/my-binggan.png",style:{"max-width":"50px","max-height":"50px"}},null,-1),N("span",null,"管理员中心",-1)])]),_:1}),N("div",null,[t(e(d),{depth:3},{default:a(()=>[...r[1]||(r[1]=[n("我管理的板块",-1)])]),_:1}),t(e(x),null,{default:a(()=>[(m(!0),C(h,null,L(b.value,_=>(m(),$(e(he),null,{default:a(()=>[n(A(_.forumId)+". "+A(_.label),1)]),_:2},1024))),256))]),_:1})])]),_:1},8,["vertical"])]),_:1}))}}),It=E({__name:"AdminCenter",setup(V){const k=H(),z=q(),T=w();document.title="管理员中心";const b=K(()=>{const p=[{name:"banners",tab:"版头设定",component:et}];return k.admin.isNormalAdmin&&p.unshift({name:"actives",tab:"管理状况",component:rt}),k.admin.isSuperAdmin?p.concat([{name:"global",tab:"全局设置",component:at},{name:"super_actives",tab:"超管状况",component:_t},{name:"super_admin",tab:"超管操作",component:yt}]):p});return(p,r)=>(m(),$(e(x),{vertical:"",style:{"margin-top":"8px"}},{default:a(()=>[t(e(xt)),t(e(Be),{type:"line","bar-width":e(z).isMobile?0:void 0,animated:"",size:e(z).isMobile?"small":"large",value:T.value,"onUpdate:value":r[0]||(r[0]=_=>T.value=_)},{default:a(()=>[(m(!0),C(h,null,L(b.value,_=>(m(),$(e(Ee),{name:_.name,tab:_.tab,key:_.name},{default:a(()=>[(m(),$(He(_.component)))]),_:2},1032,["name","tab"]))),128))]),_:1},8,["bar-width","size","value"]),r[1]||(r[1]=N("div",{style:{height:"50px"}},null,-1))]),_:1}))}});export{It as default};
