var ne=Object.defineProperty;var J=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var q=(e,t,i)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Q=(e,t)=>{for(var i in t||(t={}))ie.call(t,i)&&q(e,i,t[i]);if(J)for(var i of J(t))se.call(t,i)&&q(e,i,t[i]);return e};import{cG as le,aG as re,w as K,T as Z,a9 as U,bT as oe,d as V,an as ue,cH as ce,bq as Y,ab as de,ct as pe,S as w,cI as ge,aH as me,am as fe,bY as ve,cJ as be,a0 as X,b4 as he,$ as D,a6 as ye,a5 as Ce,aa as Se,aD as xe,aP as _e,aj as Te,b6 as L,n as ze,b as Ie,p as Re,c as we,cK as De,A as Fe,M as je,f as l,H as c,a as n,i as k,v as A,z as R,h as N,k as G,ax as H,j as $}from"./app-BfTmtkkR.js";import{t as Be,N as Oe,c as $e}from"./Tag-COjQsRYJ.js";import{u as Pe}from"./use-locale-CFDb4tef.js";import{s as Ve}from"./prop-DfVitj0l.js";import{N as Ae}from"./Input-C5i_M3Sx.js";import{A as Ne}from"./Add-BBepOlgD.js";import{N as E}from"./Switch-Q-g3II9Y.js";const Ue=()=>le,Le={name:"Space",self:Ue},ee=Le;let M;const ke=()=>{if(!re)return!0;if(M===void 0){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);const t=e.scrollHeight===1;return document.body.removeChild(e),M=t}return M},Ge=Object.assign(Object.assign({},U.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemClass:String,itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),He=K({name:"Space",props:Ge,setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:i}=Z(e),r=U("Space","-space",void 0,ee,e,t),o=oe("Space",i,t);return{useGap:ke(),rtlEnabled:o,mergedClsPrefix:t,margin:V(()=>{const{size:s}=e;if(Array.isArray(s))return{horizontal:s[0],vertical:s[1]};if(typeof s=="number")return{horizontal:s,vertical:s};const{self:{[ue("gap",s)]:b}}=r.value,{row:g,col:h}=ce(b);return{horizontal:Y(h),vertical:Y(g)}})}},render(){const{vertical:e,reverse:t,align:i,inline:r,justify:o,itemClass:s,itemStyle:b,margin:g,wrap:h,mergedClsPrefix:S,rtlEnabled:p,useGap:a,wrapItem:u,internalUseGap:_}=this,T=de(pe(this),!1);if(!T.length)return null;const j=`${g.horizontal}px`,z=`${g.horizontal/2}px`,B=`${g.vertical}px`,y=`${g.vertical/2}px`,x=T.length-1,C=o.startsWith("space-");return w("div",{role:"none",class:[`${S}-space`,p&&`${S}-space--rtl`],style:{display:r?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:["start","end"].includes(o)?"flex-"+o:o,flexWrap:!h||e?"nowrap":"wrap",marginTop:a||e?"":`-${y}`,marginBottom:a||e?"":`-${y}`,alignItems:i,gap:a?`${g.vertical}px ${g.horizontal}px`:""}},!u&&(a||_)?T:T.map((F,f)=>F.type===ge?F:w("div",{role:"none",class:s,style:[b,{maxWidth:"100%"},a?"":e?{marginBottom:f!==x?B:""}:p?{marginLeft:C?o==="space-between"&&f===x?"":z:f!==x?j:"",marginRight:C?o==="space-between"&&f===0?"":z:"",paddingTop:y,paddingBottom:y}:{marginRight:C?o==="space-between"&&f===x?"":z:f!==x?j:"",marginLeft:C?o==="space-between"&&f===0?"":z:"",paddingTop:y,paddingBottom:y}]},F)))}}),Ee=me({name:"DynamicTags",common:fe,peers:{Input:ve,Button:be,Tag:Be,Space:ee},self(){return{inputWidth:"64px"}}}),Me=Ee,We=X("dynamic-tags",[X("input",{minWidth:"var(--n-input-width)"})]),Ke=Object.assign(Object.assign(Object.assign({},U.props),$e),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:e=>e},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),W=K({name:"DynamicTags",props:Ke,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:i}=Z(e),{localeRef:r}=Pe("DynamicTags"),o=he(e),{mergedDisabledRef:s}=o,b=D(""),g=D(!1),h=D(!0),S=D(null),p=U("DynamicTags","-dynamic-tags",We,Me,e,t),a=D(e.defaultValue),u=ye(e,"value"),_=Ce(u,a),T=V(()=>r.value.add),j=V(()=>Ve(e.size)),z=V(()=>s.value||!!e.max&&_.value.length>=e.max);function B(d){const{onChange:m,"onUpdate:value":v,onUpdateValue:O}=e,{nTriggerFormInput:te,nTriggerFormChange:ae}=o;m&&L(m,d),O&&L(O,d),v&&L(v,d),a.value=d,te(),ae()}function y(d){const m=_.value.slice(0);m.splice(d,1),B(m)}function x(d){switch(d.key){case"Enter":C()}}function C(d){const m=d!=null?d:b.value;if(m){const v=_.value.slice(0);v.push(e.onCreate(m)),B(v)}g.value=!1,h.value=!0,b.value=""}function F(){C()}function f(){g.value=!0,Te(()=>{var d;(d=S.value)===null||d===void 0||d.focus(),h.value=!1})}const P=V(()=>{const{self:{inputWidth:d}}=p.value;return{"--n-input-width":d}}),I=i?Se("dynamic-tags",void 0,P,e):void 0;return{mergedClsPrefix:t,inputInstRef:S,localizedAdd:T,inputSize:j,inputValue:b,showInput:g,inputForceFocused:h,mergedValue:_,mergedDisabled:s,triggerDisabled:z,handleInputKeyDown:x,handleAddClick:f,handleInputBlur:F,handleCloseClick:y,handleInputConfirm:C,mergedTheme:p,cssVars:i?void 0:P,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender}},render(){const{mergedTheme:e,cssVars:t,mergedClsPrefix:i,onRender:r,renderTag:o}=this;return r==null||r(),w(He,{class:[`${i}-dynamic-tags`,this.themeClass],size:"small",style:t,theme:e.peers.Space,themeOverrides:e.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagClass:b,tagStyle:g,type:h,round:S,size:p,color:a,closable:u,mergedDisabled:_,showInput:T,inputValue:j,inputClass:z,inputStyle:B,inputSize:y,inputForceFocused:x,triggerDisabled:C,handleInputKeyDown:F,handleInputBlur:f,handleAddClick:P,handleCloseClick:I,handleInputConfirm:d,$slots:m}=this;return this.mergedValue.map((v,O)=>o?o(v,O):w(Oe,{key:O,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,class:b,style:g,type:h,round:S,size:p,color:a,closable:u,disabled:_,onClose:()=>{I(O)}},{default:()=>typeof v=="string"?v:v.label})).concat(T?m.input?m.input({submit:d,deactivate:f}):w(Ae,Object.assign({placeholder:"",size:y,style:B,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:j,onUpdateValue:v=>{this.inputValue=v},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeydown:F,onBlur:f,internalForceFocus:x})):m.trigger?m.trigger({activate:P,disabled:C}):w(xe,{dashed:!0,disabled:C,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:y,onClick:P},{icon:()=>w(_e,{clsPrefix:i},{default:()=>w(Ne,null)})}))}})}}),Je=$("span",null,"这个保存在本地，不用点提交",-1),qe=$("span",null,"这个保存在本地，不用点提交",-1),Qe=$("span",null,"关闭屏蔽词功能，可以提升一点性能",-1),st=K({__name:"TabPingbici",setup(e){const t=ze(),i=Ie();D(null);const r=D({content_pingbici:[],title_pingbici:[],fjf_pingbici:[]}),o=D(t.userData.binggan.use_pingbici);t.userLoginStatus===!0&&(r.value=t.userData.pingbici,o.value=t.userData.binggan.use_pingbici),Re(()=>t.userDataLoading,p=>{p===!1&&(r.value=t.userData.pingbici,o.value=t.userData.binggan.use_pingbici)});function s(p){r.value[p]=r.value[p].filter((a,u)=>r.value[p].indexOf(a)===u)}function b(){const p=Q({binggan:t.binggan,use_pingbici:o.value},r.value);h(p)}const{loading:g,send:h,onSuccess:S}=we(p=>De(p),{immediate:!1,initialData:[]});return S(()=>t.refreshUserData()),(p,a)=>(Fe(),je(n(G),{vertical:""},{default:l(()=>[c(n(k),{title:"标题屏蔽词",size:"small"},{"header-extra":l(()=>[c(n(A),{onClick:a[1]||(a[1]=u=>s("title_pingbici"))},{default:l(()=>[R("去重")]),_:1})]),default:l(()=>[c(n(W),{value:r.value.title_pingbici,"onUpdate:value":a[0]||(a[0]=u=>r.value.title_pingbici=u)},null,8,["value"])]),_:1}),c(n(k),{title:"内容屏蔽词",size:"small"},{"header-extra":l(()=>[c(n(A),{onClick:a[3]||(a[3]=u=>s("content_pingbici"))},{default:l(()=>[R("去重")]),_:1})]),default:l(()=>[c(n(W),{value:r.value.content_pingbici,"onUpdate:value":a[2]||(a[2]=u=>r.value.content_pingbici=u)},null,8,["value"])]),_:1}),c(n(k),{title:"FJF小尾巴和固马屏蔽词",size:"small"},{"header-extra":l(()=>[c(n(A),{onClick:a[5]||(a[5]=u=>s("fjf_pingbici"))},{default:l(()=>[R("去重")]),_:1})]),default:l(()=>[c(n(W),{value:r.value.fjf_pingbici,"onUpdate:value":a[4]||(a[4]=u=>r.value.fjf_pingbici=u)},null,8,["value"]),c(n(N),{depth:3,style:{"font-size":"0.875rem"}},{default:l(()=>[R("注意：同一个饼干在不同FJF主题中，小尾巴会改变")]),_:1})]),_:1}),c(n(G),{align:"center",justify:"start"},{default:l(()=>[c(n(H),{trigger:"hover"},{trigger:l(()=>[$("div",null,[c(n(E),{value:n(i).userCustom.hidePingbiciFloor,"onUpdate:value":a[6]||(a[6]=u=>n(i).userCustom.hidePingbiciFloor=u)},null,8,["value"]),c(n(N),{style:{"margin-left":"6px"}},{default:l(()=>[R("完全隐藏楼层 ")]),_:1})])]),default:l(()=>[Je]),_:1}),c(n(H),{trigger:"hover"},{trigger:l(()=>[$("div",null,[c(n(E),{value:n(i).userCustom.pingbiciIngnoreCase,"onUpdate:value":a[7]||(a[7]=u=>n(i).userCustom.pingbiciIngnoreCase=u)},null,8,["value"]),c(n(N),{style:{"margin-left":"6px"}},{default:l(()=>[R("忽略大小写 ")]),_:1})])]),default:l(()=>[qe]),_:1})]),_:1}),c(n(G),{align:"center",justify:"end"},{default:l(()=>[c(n(H),{trigger:"hover"},{trigger:l(()=>[$("div",null,[c(n(E),{value:o.value,"onUpdate:value":a[8]||(a[8]=u=>o.value=u)},null,8,["value"]),c(n(N),{style:{"margin-left":"6px"}},{default:l(()=>[R("启用 ")]),_:1})])]),default:l(()=>[Qe]),_:1}),c(n(A),{type:"primary",onClick:b,loading:n(g),disabled:n(g)},{default:l(()=>[R("提交")]),_:1},8,["loading","disabled"])]),_:1})]),_:1}))}});export{st as default};
