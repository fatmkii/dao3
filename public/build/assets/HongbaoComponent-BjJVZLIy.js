import{w as P,n as j,b as F,$ as G,d as A,c as y,A as u,M as _,f as a,H as t,a as o,k as h,h as i,z as s,j as c,B as K,G as v,s as m,F as O,x as U,v as q,i as B,_ as R}from"./app-DHSg6T1I.js";import{h as E,b as J,g as Q}from"./PostInput.vue_vue_type_script_setup_true_lang-BdXuP8TA.js";import{_ as w}from"./FInput.vue_vue_type_script_setup_true_lang-DkIPuNnh.js";import{N as V}from"./Spin-B-80xSh-.js";import"./showDialog-X27gZ7Iz.js";import"./randomHeads-BiQLUbo6.js";import"./FInputGroupLabel.vue_vue_type_script_setup_true_lang-DMofk_Pe.js";import"./InputGroup-A5fnApsu.js";import"./InputNumber-t9dTEnz3.js";import"./use-locale-DOrdRpgM.js";import"./Input-DalQbTGL.js";import"./Add-DuUoTvAO.js";import"./index-Crq6HWd9.js";import"./_commonjsHelpers-BosuxZz1.js";import"./inputNumberFormat-DaYmlx6U.js";import"./Select-BPBz4cwx.js";import"./Tag-Ak8vCvVq.js";import"./Grid-BP3nVEgd.js";import"./ColorPicker-D7EfN-XB.js";import"./_createCompounder-CK8fnUEt.js";import"./Ellipsis-BBK28lfF.js";import"./download-sglA049O.js";import"./emojiData-nGA-8XBz.js";import"./Tabs-RPN3vO5j.js";import"./Divider-D7n3EUA3.js";const W={key:0},X=P({__name:"HongbaoComponent",props:{hongbaoId:{},threadId:{},forumId:{}},emits:["refreshPostsList"],setup(S,{emit:x}){const p=j(),k=F(),l=S,d=G(),I=A(()=>({1:"随机olo",2:"定额olo"})[e.value.type]),{data:e,loading:z,send:D,onSuccess:N}=y(E(l.hongbaoId),{immediate:!1,initialData:{}});N(n=>{d.value=n.data.key_word});function T(){D({binggan:p.binggan})}p.binggan&&T();const{loading:H,send:L,onSuccess:$}=y(n=>J(n),{immediate:!1});$(()=>{C("refreshPostsList")});function f(n){if(!n.isTrusted){const M={title:"错误",closable:!1,content:"请不要用脚本抢红包喔",positiveText:"确定"};window.$dialog.warning(M);return}const{timestamp:g,newPostKey:r}=Q(n.isTrusted,l.threadId,p.binggan),b={binggan:p.binggan,forum_id:l.forumId,thread_id:l.threadId,content:"--红包口令: "+d.value,nickname:"= =",post_with_admin:!1,new_post_key:r,timestamp:g,hongbao_id:l.hongbaoId,hongbao_key_word:d.value};L(b)}const C=x;return(n,g)=>(u(),_(o(B),{size:"small",bordered:!0},{default:a(()=>[t(o(V),{show:o(z)},{default:a(()=>[t(o(h),{vertical:"",align:"center"},{default:a(()=>[t(o(h),{align:"center",size:"small"},{default:a(()=>[t(o(i),{style:{"font-size":"1rem"}},{default:a(()=>[s("口令红包")]),_:1}),c("img",{src:"/hongbao.svg",style:K({height:o(k).isMobile?"30px":"36px"})},null,4)]),_:1}),c("div",null,[o(e).key_word?(u(),_(o(i),{key:0,depth:3},{default:a(()=>[s("口令：")]),_:1})):v("",!0),t(o(i),null,{default:a(()=>[s(m(o(e).key_word),1)]),_:1})]),c("div",null,[t(o(i),{depth:3},{default:a(()=>[s("数量：")]),_:1}),t(o(i),null,{default:a(()=>[s(m(o(e).num_remains)+" /"+m(o(e).num_total)+" （"+m(I.value)+"）",1)]),_:1})]),o(e).olo_hide?v("",!0):(u(),O("div",W,[t(o(i),{depth:3},{default:a(()=>[s("总额：")]),_:1}),t(o(i),null,{default:a(()=>{var r;return[s(m((r=o(e).olo_total)==null?void 0:r.toLocaleString("en-us"))+" olo ",1)]}),_:1})])),t(o(h),{size:"small",wrap:!1},{default:a(()=>{var r;return[o(e).hongbao_user===null?(u(),_(o(w),{key:0,value:d.value,"onUpdate:value":g[0]||(g[0]=b=>d.value=b),maxlength:255,onKeyup:U(f,["enter"]),style:{"max-width":"328px"},placeholder:o(e).num_remains===0?"已经抢光啦":"请输入口令","auto-size":"",disabled:o(e).hongbao_user!==null||o(e).num_remains===0},null,8,["value","placeholder","disabled"])):(u(),_(o(w),{key:1,value:`你抢到了${(r=o(e).hongbao_user)==null?void 0:r.olo.toLocaleString("en-us")}个olo`,maxlength:255,style:{"max-width":"328px"},"auto-size":"",disabled:""},null,8,["value"])),t(o(q),{type:"primary",onClick:f,disabled:o(e).hongbao_user!==null||o(H)||o(e).num_remains===0},{default:a(()=>[s("抢！")]),_:1},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["show"])]),_:1}))}}),ko=R(X,[["__scopeId","data-v-bb4b1914"]]);export{ko as default};
