import{w as x,n as R,b as y,$ as m,c as O,cF as S,A as z,M as P,f as r,H as l,a as e,k as f,j as v,h as c,z as d,x as k,v as $,i as E}from"./app-DfuiwjtQ.js";import{_ as n}from"./FInput.vue_vue_type_script_setup_true_lang-Du6DluEI.js";import{N as F,a as u}from"./FormItem-CXYCjeD5.js";import"./Input-CihpN1Le.js";import"./use-locale-DX3noyJ_.js";const q=v("span",null,"新饼干无密码。建议尽快设定密码，以免饼干遗失。",-1),I=x({__name:"TabPassword",setup(U){const g=R(),_=y(),p=m(null),a=m({passwordOld:null,passwordNew:null,passwordRepeat:null}),h={passwordOld:{required:!1},passwordNew:{required:!0,validator:(o,s)=>{const t=/^[a-zA-Z0-9_]+$/;if(s===null)return new Error("请输入密码");if(t.test(s)){if(s.length<7)return new Error("最少需要7个字符");if(s.length>20)return new Error("最多20个字符")}else return new Error("只能是数字、英文、下划线");return!0},trigger:"blur"},passwordRepeat:{required:!0,validator:(o,s)=>s===a.value.passwordNew,message:"密码不一致",trigger:"blur"}},{loading:i,send:b,onSuccess:N}=O(o=>S(o),{immediate:!1});N(()=>{a.value.passwordOld=null,a.value.passwordNew=null,a.value.passwordRepeat=null});function w(){var o;(o=p.value)==null||o.validate(s=>{if(s)window.$message.error("请确认信息填写完整");else{const t={binggan:g.binggan,old_password:a.value.passwordOld,new_password:a.value.passwordNew};b(t)}})}return(o,s)=>(z(),P(e(E),{title:"密码设定",size:"small"},{default:r(()=>[l(e(f),{vertical:""},{default:r(()=>[v("div",null,[l(e(c),{depth:3},{default:r(()=>[d("说明：")]),_:1}),q]),l(e(F),{ref_key:"formRef",ref:p,model:a.value,"label-placement":"left","label-width":"auto",style:{"max-width":"400px"},rules:h,size:e(_).isMobile?"small":"medium"},{default:r(()=>[l(e(u),{label:"旧密码",path:"passwordOld"},{default:r(()=>[l(e(n),{value:a.value.passwordOld,"onUpdate:value":s[0]||(s[0]=t=>a.value.passwordOld=t),placeholder:"(选填)如果未设定密码可以留空",type:"password",maxlength:20,minlength:7,"show-password-on":"click"},null,8,["value"])]),_:1}),l(e(u),{label:"密码",path:"passwordNew"},{default:r(()=>[l(e(n),{value:a.value.passwordNew,"onUpdate:value":s[1]||(s[1]=t=>a.value.passwordNew=t),placeholder:"7~20个字符(字母、数字、下划线)",type:"password",maxlength:20,minlength:7,"show-password-on":"click"},null,8,["value"])]),_:1}),l(e(u),{label:"重复密码",path:"passwordRepeat"},{default:r(()=>[l(e(n),{value:a.value.passwordRepeat,"onUpdate:value":s[2]||(s[2]=t=>a.value.passwordRepeat=t),placeholder:"再次输入密码",type:"password",maxlength:20,minlength:7,"show-password-on":"click",onKeyup:k(w,["enter"])},null,8,["value"])]),_:1})]),_:1},8,["model","size"]),l(e(f),{size:"small",align:"center"},{default:r(()=>[l(e($),{type:"primary",loading:e(i),disabled:e(i),onClick:w},{default:r(()=>[d("提交")]),_:1},8,["loading","disabled"]),l(e(c),{depth:3},{default:r(()=>[d("请务必保存好新密码喔")]),_:1})]),_:1})]),_:1})]),_:1}))}});export{I as default};
