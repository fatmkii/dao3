import{w as N,o as $,b as O,$ as m,c as x,A as S,M as y,f as t,H as s,a,n as k,z as q}from"./app-CubltHgM.js";import{k as z}from"./admin-D8EFBkxr.js";import{_ as g}from"./FInput.vue_vue_type_script_setup_true_lang-Dp8PqeqY.js";import{i as C,a as F}from"./inputNumberFormat-DaYmlx6U.js";import{a as n,N as H}from"./FormItem-DWUCoORK.js";import{N as P}from"./InputNumber-CuAy3OiG.js";import"./Input-C5N6R1lB.js";import"./use-locale-CHmxQg92.js";import"./Add-DCC5ygvc.js";const G=N({__name:"TabCoin",setup(R){const d=$(),p=O(),i=m(null),e=m({binggan:"",olo:void 0,message:""}),f={binggan:{required:!0,message:"请填写目标饼干",trigger:"blur"},message:{required:!1},olo:{required:!0,message:"请选择要奖罚的olo",type:"number",trigger:"blur"}},{loading:u,send:v,onSuccess:b,onError:c}=x(r=>z(r),{immediate:!1});b(()=>{e.value.binggan=""}),c(()=>{e.value.binggan=""});function _(){var r;(r=i.value)==null||r.validate(o=>{if(o){window.$message.error("请确认信息填写完整");return}else{const l={binggan:d.binggan,binggan_target:e.value.binggan,olo_num:e.value.olo,olo_message:e.value.message},U=e.value.olo>0?"奖励":"罚款",w={title:"奖罚olo",closable:!1,content:`对象饼干：${e.value.binggan} ${U}${e.value.olo}个olo`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{v(l)}};window.$dialog.warning(w)}})}return(r,o)=>(S(),y(a(H),{ref_key:"formRef",ref:i,model:e.value,"label-placement":"left","label-width":"auto",rules:f,size:a(p).isMobile?"small":"medium",style:{"max-width":"300px"}},{default:t(()=>[s(a(n),{label:"目标饼干",path:"binggan"},{default:t(()=>[s(a(g),{value:e.value.binggan,"onUpdate:value":o[0]||(o[0]=l=>e.value.binggan=l)},null,8,["value"])]),_:1}),s(a(n),{label:"奖罚olo",path:"olo"},{default:t(()=>[s(a(P),{value:e.value.olo,"onUpdate:value":o[1]||(o[1]=l=>e.value.olo=l),max:1e6,min:-1e6,step:1e3,parse:a(C),format:a(F),placeholder:"正数是奖励，负数是罚款"},null,8,["value","parse","format"])]),_:1}),s(a(n),{label:"附带留言",path:"message"},{default:t(()=>[s(a(g),{value:e.value.message,"onUpdate:value":o[2]||(o[2]=l=>e.value.message=l),placeholder:"将显示在收支记录"},null,8,["value"])]),_:1}),s(a(k),{type:"primary",loading:a(u),disabled:a(u),onClick:_},{default:t(()=>[q("提交")]),_:1},8,["loading","disabled"])]),_:1},8,["model","size"]))}});export{G as default};
